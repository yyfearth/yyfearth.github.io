"use strict";var requirejs,require,define;(function(Z){function H(b){return"[object Function]"===L.call(b)}function I(b){return"[object Array]"===L.call(b)}function y(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1);}}function M(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));d-=1);}}function s(b,c){return ga.call(b,c)}function l(b,c){return s(b,c)&&b[c]}function F(b,c){for(var d in b)if(s(b,d)&&c(b[d],d))break}function Q(b,c,d,h){c&&F(c,function(c,j){if(d||!s(b,j))h&&"string"!==typeof c?(b[j]||(b[j]={}),Q(b[j],c,d,h)):b[j]=c});return b}function u(b,c){return function(){return c.apply(b,arguments)}}function aa(b){throw b}function ba(b){if(!b)return b;var c=Z;y(b.split("."),function(b){c=c[b]});return c}function A(b,c,d,h){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=h;d&&(c.originalError=d);return c}function ha(b){function c(a,f,b){var e,m,c,g,d,h,j,i=f&&f.split("/");e=i;var n=k.map,p=n&&n["*"];if(a&&"."===a.charAt(0))if(f){e=l(k.pkgs,f)?i=[f]:i.slice(0,i.length-1);f=a=e.concat(a.split("/"));for(e=0;f[e];e+=1)if(m=f[e],"."===m)f.splice(e,1),e-=1;else if(".."===m)if(1===e&&(".."===f[2]||".."===f[0]))break;else 0<e&&(f.splice(e-1,2),e-=2);e=l(k.pkgs,f=a[0]);a=a.join("/");e&&a===f+"/"+e.main&&(a=f)}else 0===a.indexOf("./")&&(a=a.substring(2));if(b&&n&&(i||p)){f=a.split("/");for(e=f.length;0<e;e-=1){c=f.slice(0,e).join("/");if(i)for(m=i.length;0<m;m-=1)if(b=l(n,i.slice(0,m).join("/")))if(b=l(b,c)){g=b;d=e;break}if(g)break;!h&&(p&&l(p,c))&&(h=l(p,c),j=e)}!g&&h&&(g=h,d=j);g&&(f.splice(0,d,g),a=f.join("/"))}return a}function d(a){z&&y(document.getElementsByTagName("script"),function(f){if(f.getAttribute("data-requiremodule")===a&&f.getAttribute("data-requirecontext")===i.contextName)return f.parentNode.removeChild(f),!0})}function h(a){var f=l(k.paths,a);if(f&&I(f)&&1<f.length)return d(a),f.shift(),i.require.undef(a),i.require([a]),!0}function $(a){var f,b=a?a.indexOf("!"):-1;-1<b&&(f=a.substring(0,b),a=a.substring(b+1,a.length));return[f,a]}function n(a,f,b,e){var m,B,g=null,d=f?f.name:null,h=a,j=!0,k="";a||(j=!1,a="_@r"+(L+=1));a=$(a);g=a[0];a=a[1];g&&(g=c(g,d,e),B=l(r,g));a&&(g?k=B&&B.normalize?B.normalize(a,function(a){return c(a,d,e)}):c(a,d,e):(k=c(a,d,e),a=$(k),g=a[0],k=a[1],b=!0,m=i.nameToUrl(k)));b=g&&!B&&!b?"_unnormalized"+(M+=1):"";return{prefix:g,name:k,parentMap:f,unnormalized:!!b,url:m,originalName:h,isDefine:j,id:(g?g+"!"+k:k)+b}}function q(a){var f=a.id,b=l(p,f);b||(b=p[f]=new i.Module(a));return b}function t(a,f,b){var e=a.id,m=l(p,e);if(s(r,e)&&(!m||m.defineEmitComplete))"defined"===f&&b(r[e]);else if(m=q(a),m.error&&"error"===f)b(m.error);else m.on(f,b)}function v(a,f){var b=a.requireModules,e=!1;if(f)f(a);else if(y(b,function(f){if(f=l(p,f))f.error=a,f.events.error&&(e=!0,f.emit("error",a))}),!e)j.onError(a)}function w(){R.length&&(ia.apply(G,[G.length-1,0].concat(R)),R=[])}function x(a){delete p[a];delete T[a]}function E(a,f,b){var e=a.map.id;a.error?a.emit("error",a.error):(f[e]=!0,y(a.depMaps,function(e,c){var g=e.id,d=l(p,g);d&&(!a.depMatched[c]&&!b[g])&&(l(f,g)?(a.defineDep(c,r[g]),a.check()):E(d,f,b))}),b[e]=!0)}function C(){var a,f,b,e,m=(b=1e3*k.waitSeconds)&&i.startTime+b<(new Date).getTime(),c=[],g=[],j=!1,l=!0;if(!U){U=!0;F(T,function(b){a=b.map;f=a.id;if(b.enabled&&(a.isDefine||g.push(b),!b.error))if(!b.inited&&m)h(f)?j=e=!0:(c.push(f),d(f));else if(!b.inited&&(b.fetched&&a.isDefine)&&(j=!0,!a.prefix))return l=!1});if(m&&c.length)return b=A("timeout","Load timeout for modules: "+c,null,c),b.contextName=i.contextName,v(b);l&&y(g,function(a){E(a,{},{})});if((!m||e)&&j)if((z||da)&&!V)V=setTimeout(function(){V=0;C()},50);U=!1}}function D(a){s(r,a[0])||q(n(a[0],null,!0)).init(a[1],a[2])}function J(a){var a=a.currentTarget||a.srcElement,b=i.onScriptLoad;a.detachEvent&&!W?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=i.onScriptError;(!a.detachEvent||W)&&a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function K(){var a;for(w();G.length;){a=G.shift();if(null===a[0])return v(A("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));D(a)}}var U,X,i,N,V,k={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},p={},T={},Y={},G=[],r={},S={},L=1,M=1;N={require:function(a){return a.require?a.require:a.require=i.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports?a.exports:a.exports=r[a.map.id]={}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b=l(k.pkgs,a.map.id);return(b?l(k.config,a.map.id+"/"+b.main):l(k.config,a.map.id))||{}},exports:r[a.map.id]}}};X=function(a){this.events=l(Y,a.id)||{};this.map=a;this.shim=l(k.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};X.prototype={init:function(a,b,c,e){e=e||{};if(!this.inited){this.factory=b;if(c)this.on("error",c);else this.events.error&&(c=u(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=e.ignore;e.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;i.startTime=(new Date).getTime();var a=this.map;if(this.shim)i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;S[a]||(S[a]=!0,i.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var e=this.exports,m=this.factory;if(this.inited)if(this.error)this.emit("error",this.error);else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(H(m)){if(this.events.error&&this.map.isDefine||j.onError!==aa)try{e=i.execCb(c,m,b,e)}catch(d){a=d}else e=i.execCb(c,m,b,e);this.map.isDefine&&((b=this.module)&&void 0!==b.exports&&b.exports!==this.exports?e=b.exports:void 0===e&&this.usingExports&&(e=this.exports));if(a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",v(this.error=a)}else e=m;this.exports=e;if(this.map.isDefine&&!this.ignore&&(r[c]=e,j.onResourceLoad))j.onResourceLoad(i,this.map,this.depMaps);x(c);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=n(a.prefix);this.depMaps.push(d);t(d,"defined",u(this,function(e){var m,d;d=this.map.name;var g=this.map.parentMap?this.map.parentMap.name:null,h=i.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(e.normalize&&(d=e.normalize(d,function(a){return c(a,g,!0)})||""),e=n(a.prefix+"!"+d,this.map.parentMap),t(e,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),d=l(p,e.id)){this.depMaps.push(e);if(this.events.error)d.on("error",u(this,function(a){this.emit("error",a)}));d.enable()}}else m=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),m.error=u(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];F(p,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&x(a.map.id)});v(a)}),m.fromText=u(this,function(e,c){var d=a.name,g=n(d),B=O;c&&(e=c);B&&(O=!1);q(g);s(k.config,b)&&(k.config[d]=k.config[b]);try{j.exec(e)}catch(ca){return v(A("fromtexteval","fromText eval for "+b+" failed: "+ca,ca,[b]))}B&&(O=!0);this.depMaps.push(g);i.completeLoad(d);h([d],m)}),e.load(a.name,h,m,k)}));i.enable(d,this);this.pluginMaps[d.id]=d},enable:function(){T[this.map.id]=this;this.enabling=this.enabled=!0;y(this.depMaps,u(this,function(a,b){var c,e;if("string"===typeof a){a=n(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=l(N,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;t(a,"defined",u(this,function(a){this.defineDep(b,a);this.check()}));this.errback&&t(a,"error",u(this,this.errback))}c=a.id;e=p[c];!s(N,c)&&(e&&!e.enabled)&&i.enable(a,this)}));F(this.pluginMaps,u(this,function(a){var b=l(p,a.id);b&&!b.enabled&&i.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){y(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};i={config:k,contextName:b,registry:p,defined:r,urlFetched:S,defQueue:G,Module:X,makeModuleMap:n,nextTick:j.nextTick,onError:v,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=k.pkgs,c=k.shim,e={paths:!0,config:!0,map:!0};F(a,function(a,b){e[b]?"map"===b?(k.map||(k.map={}),Q(k[b],a,!0,!0)):Q(k[b],a,!0):k[b]=a});a.shim&&(F(a.shim,function(a,b){I(a)&&(a={deps:a});if((a.exports||a.init)&&!a.exportsFn)a.exportsFn=i.makeShimExports(a);c[b]=a}),k.shim=c);a.packages&&(y(a.packages,function(a){a="string"===typeof a?{name:a}:a;b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ja,"").replace(ea,"")}}),k.pkgs=b);F(p,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=n(b))});if(a.deps||a.callback)i.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(Z,arguments));return b||a.exports&&ba(a.exports)}},makeRequire:function(a,f){function d(e,c,h){var g,k;f.enableBuildCallback&&(c&&H(c))&&(c.__requireJsBuild=!0);if("string"===typeof e){if(H(c))return v(A("requireargs","Invalid require call"),h);if(a&&s(N,e))return N[e](p[a.id]);if(j.get)return j.get(i,e,a,d);g=n(e,a,!1,!0);g=g.id;return!s(r,g)?v(A("notloaded",'Module name "'+g+'" has not been loaded yet for context: '+b+(a?"":". Use require([])"))):r[g]}K();i.nextTick(function(){K();k=q(n(null,a));k.skipMap=f.skipMap;k.init(e,c,h,{enabled:!0});C()});return d}f=f||{};Q(d,{isBrowser:z,toUrl:function(b){var d,f=b.lastIndexOf("."),g=b.split("/")[0];if(-1!==f&&(!("."===g||".."===g)||1<f))d=b.substring(f,b.length),b=b.substring(0,f);return i.nameToUrl(c(b,a&&a.id,!0),d,!0)},defined:function(b){return s(r,n(b,a,!1,!0).id)},specified:function(b){b=n(b,a,!1,!0).id;return s(r,b)||s(p,b)}});a||(d.undef=function(b){w();var c=n(b,a,!0),f=l(p,b);delete r[b];delete S[c.url];delete Y[b];f&&(f.events.defined&&(Y[b]=f.events),x(b))});return d},enable:function(a){l(p,a.id)&&q(a).enable()},completeLoad:function(a){var b,c,e=l(k.shim,a)||{},d=e.exports;for(w();G.length;){c=G.shift();if(null===c[0]){c[0]=a;if(b)break;b=!0}else c[0]===a&&(b=!0);D(c)}c=l(p,a);if(!b&&!s(r,a)&&c&&!c.inited){if(k.enforceDefine&&(!d||!ba(d)))return h(a)?void 0:v(A("nodefine","No define call for "+a,null,[a]));D([a,e.deps||[],e.exportsFn])}C()},nameToUrl:function(a,b,c){var e,d,h,g,i,n;if(j.jsExtRegExp.test(a))g=a+(b||"");else{e=k.paths;d=k.pkgs;g=a.split("/");for(i=g.length;0<i;i-=1)if(n=g.slice(0,i).join("/"),h=l(d,n),n=l(e,n)){I(n)&&(n=n[0]);g.splice(0,i,n);break}else if(h){a=a===h.name?h.location+"/"+h.main:h.location;g.splice(0,i,a);break}g=g.join("/");g+=b||(/\?/.test(g)||c?"":".js");g=("/"===g.charAt(0)||g.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+g}return k.urlArgs?g+((-1===g.indexOf("?")?"?":"&")+k.urlArgs):g},load:function(a,b){j.load(i,a,b)},execCb:function(a,b,c,e){return b.apply(e,c)},onScriptLoad:function(a){if("load"===a.type||ka.test((a.currentTarget||a.srcElement).readyState))P=null,a=J(a),i.completeLoad(a.id)},onScriptError:function(a){var b=J(a);if(!h(b.id))return v(A("scripterror","Script error for: "+b.id,a,[b.id]))}};i.require=i.makeRequire();return i}var j,w,x,C,J,D,P,K,q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,z=!!("undefined"!==typeof window&&navigator&&window.document),da=!z&&"undefined"!==typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,W="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),E={},t={},R=[],O=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(H(requirejs))return;t=requirejs;requirejs=void 0}"undefined"!==typeof require&&!H(require)&&(t=require,require=void 0);j=requirejs=function(b,c,d,h){var q,n="_";!I(b)&&"string"!==typeof b&&(q=b,I(c)?(b=c,c=d,d=h):b=[]);q&&q.context&&(n=q.context);(h=l(E,n))||(h=E[n]=j.s.newContext(n));q&&h.configure(q);return h.require(b,c,d)};j.config=function(b){return j(b)};j.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()};require||(require=j);j.version="2.1.8";j.jsExtRegExp=/^\/|:|\?|\.js$/;j.isBrowser=z;w=j.s={contexts:E,newContext:ha};j({});y(["toUrl","undef","defined","specified"],function(b){j[b]=function(){var c=E._;return c.require[b].apply(c,arguments)}});if(z&&(x=w.head=document.getElementsByTagName("head")[0],C=document.getElementsByTagName("base")[0]))x=w.head=C.parentNode;j.onError=aa;j.createNode=function(b){var c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");c.type=b.scriptType||"text/javascript";c.charset="utf-8";c.async=!0;return c};j.load=function(b,c,d){var h=b&&b.config||{};if(z)return h=j.createNode(h,c,d),h.setAttribute("data-requirecontext",b.contextName),h.setAttribute("data-requiremodule",c),h.attachEvent&&!(h.attachEvent.toString&&0>h.attachEvent.toString().indexOf("[native code"))&&!W?(O=!0,h.attachEvent("onreadystatechange",b.onScriptLoad)):(h.addEventListener("load",b.onScriptLoad,!1),h.addEventListener("error",b.onScriptError,!1)),h.src=d,K=h,C?x.insertBefore(h,C):x.appendChild(h),K=null,h;if(da)try{importScripts(d),b.completeLoad(c)}catch(l){b.onError(A("importscripts","importScripts failed for "+c+" at "+d,l,[c]))}};z&&M(document.getElementsByTagName("script"),function(b){x||(x=b.parentNode);if(J=b.getAttribute("data-main"))return q=J,t.baseUrl||(D=q.split("/"),q=D.pop(),fa=D.length?D.join("/")+"/":"./",t.baseUrl=fa),q=q.replace(ea,""),j.jsExtRegExp.test(q)&&(q=J),t.deps=t.deps?t.deps.concat(q):[q],!0});define=function(b,c,d){var h,j;"string"!==typeof b&&(d=c,c=b,b=null);I(c)||(d=c,c=null);!c&&H(d)&&(c=[],d.length&&(d.toString().replace(la,"").replace(ma,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));if(O){if(!(h=K))P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState)return P=b}),h=P;h&&(b||(b=h.getAttribute("data-requiremodule")),j=E[h.getAttribute("data-requirecontext")])}(j?j.defQueue:R).push([b,c,d])};define.amd={jQuery:!0};j.exec=function(b){return eval(b)};j(t)}})(this);"use strict";!function(t,e){function n(t){var e=t.length,n=oe.type(t);return oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=de[t]={};return oe.each(t.match(ae)||[],function(t,n){e[n]=!0}),e}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=oe.expando+Math.random()}function o(t,n,i){var r;if(i===e&&1===t.nodeType)if(r="data-"+n.replace(ye,"-$1").toLowerCase(),i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ve.test(i)?JSON.parse(i):i}catch(i){}ge.set(t,n,i)}else i=e;return i}function s(){return!0}function a(){return!1}function u(){try{return U.activeElement}catch(e){}}function l(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(je.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return ee.call(e,t)>=0!==n})}function h(t,e){return oe.nodeName(t,"table")&&oe.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function f(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Fe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function d(t,e){for(var n=t.length,i=0;n>i;i++)me.set(t[i],"globalEval",!e||me.get(e[i],"globalEval"))}function g(t,e){var n,i,r,o,s,a,u,l;if(1===e.nodeType){if(me.hasData(t)&&(o=me.access(t),s=me.set(e,o),l=o.events)){delete s.handle,s.events={};for(r in l)for(n=0,i=l[r].length;i>n;n++)oe.event.add(e,r,l[r][n])}ge.hasData(t)&&(a=ge.access(t),u=oe.extend({},a),ge.set(e,u))}}function m(t,n){var i=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&oe.nodeName(t,n)?oe.merge([t],i):i}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&He.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=Ze.length;r--;)if(e=Ze[r]+n,e in t)return e;return i}function b(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)}function x(e){return t.getComputedStyle(e,null)}function w(t,e){for(var n,i,r,o=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(o[s]=me.get(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&b(i)&&(o[s]=me.access(i,"olddisplay",$(i.nodeName)))):o[s]||(r=b(i),(n&&"none"!==n||!r)&&me.set(i,"olddisplay",r?n:oe.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none"));return t}function C(t,e,n){var i=Xe.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function k(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=oe.css(t,n+Ge[o],!0,r)),i?("content"===n&&(s-=oe.css(t,"padding"+Ge[o],!0,r)),"margin"!==n&&(s-=oe.css(t,"border"+Ge[o]+"Width",!0,r))):(s+=oe.css(t,"padding"+Ge[o],!0,r),"padding"!==n&&(s+=oe.css(t,"border"+Ge[o]+"Width",!0,r)));return s}function T(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=x(t),s=oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=Be(t,e,o),(0>r||null==r)&&(r=t.style[e]),Qe.test(r))return r;i=s&&(oe.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+k(t,e,n||(s?"border":"content"),i,o)+"px"}function $(t){var e=U,n=Ke[t];return n||(n=E(t,e),"none"!==n&&n||(We=(We||oe("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(We[0].contentWindow||We[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=E(t,e),We.detach()),Ke[t]=n),n}function E(t,e){var n=oe(e.createElement(t)).appendTo(e.body),i=oe.css(n[0],"display");return n.remove(),i}function S(t,e,n,i){var r;if(oe.isArray(e))oe.each(e,function(e,r){n||en.test(t)?i(t,r):S(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(r in e)S(t+"["+r+"]",e[r],n,i)}function j(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(ae)||[];if(oe.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function P(t,n,i,r){function o(u){var l;return s[u]=!0,oe.each(t[u]||[],function(t,u){var c=u(n,i,r);return"string"!=typeof c||a||s[c]?a?!(l=c):e:(n.dataTypes.unshift(c),o(c),!1)}),l}var s={},a=t===bn;return o(n.dataTypes[0])||!s["*"]&&o("*")}function N(t,n){var i,r,o=oe.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((o[i]?t:r||(r={}))[i]=n[i]);return r&&oe.extend(!0,t,r),t}function _(t,n,i){for(var r,o,s,a,u=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("Content-Type"));if(r)for(o in u)if(u[o]&&u[o].test(r)){l.unshift(o);break}if(l[0]in i)s=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==l[0]&&l.unshift(s),i[s]):e}function A(t,e,n,i){var r,o,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(r in l)if(a=r.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[r]:l[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function D(){return setTimeout(function(){Sn=e}),Sn=oe.now()}function O(t,e,n){for(var i,r=(Dn[e]||[]).concat(Dn["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,e,t))return i}function q(t,e,n){var i,r,o=0,s=An.length,a=oe.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var e=Sn||D(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,o=1-i,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(t,[l,o,n]),1>o&&u?n:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Sn||D(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),c=l.props;for(H(c,l.opts.specialEasing);s>o;o++)if(i=An[o].call(l,t,c,l.opts))return i;return oe.map(c,O,l),oe.isFunction(l.opts.start)&&l.opts.start.call(t,l),oe.fx.timer(oe.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function H(t,e){var n,i,r,o,s;for(n in t)if(i=oe.camelCase(n),r=e[i],o=t[n],oe.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),s=oe.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function R(t,n,i){var r,o,s,a,u,l,c=this,h={},f=t.style,p=t.nodeType&&b(t),d=me.get(t,"fxshow");i.queue||(u=oe._queueHooks(t,"fx"),null==u.unqueued&&(u.unqueued=0,l=u.empty.fire,u.empty.fire=function(){u.unqueued||l()}),u.unqueued++,c.always(function(){c.always(function(){u.unqueued--,oe.queue(t,"fx").length||u.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===oe.css(t,"display")&&"none"===oe.css(t,"float")&&(f.display="inline-block")),i.overflow&&(f.overflow="hidden",c.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}));for(r in n)if(o=n[r],Pn.exec(o)){if(delete n[r],s=s||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!d||d[r]===e)continue;p=!0}h[r]=d&&d[r]||oe.style(t,r)}if(!oe.isEmptyObject(h)){d?"hidden"in d&&(p=d.hidden):d=me.access(t,"fxshow",{}),s&&(d.hidden=!p),p?oe(t).show():c.done(function(){oe(t).hide()}),c.done(function(){var e;me.remove(t,"fxshow");for(e in h)oe.style(t,e,h[e])});for(r in h)a=O(p?d[r]:0,r,c),r in d||(d[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function L(t,e,n,i,r){return new L.prototype.init(t,e,n,i,r)}function F(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=Ge[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function M(t){return oe.isWindow(t)?t:9===t.nodeType&&t.defaultView}var I,B,W=typeof e,z=t.location,U=t.document,X=U.documentElement,Q=t.jQuery,J=t.$,K={},V=[],Y="2.0.3",G=V.concat,Z=V.push,te=V.slice,ee=V.indexOf,ne=K.toString,ie=K.hasOwnProperty,re=Y.trim,oe=function(t,e){return new oe.fn.init(t,e,I)},se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,le=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ce=/^-ms-/,he=/-([\da-z])/gi,fe=function(t,e){return e.toUpperCase()},pe=function(){U.removeEventListener("DOMContentLoaded",pe,!1),t.removeEventListener("load",pe,!1),oe.ready()};oe.fn=oe.prototype={jquery:Y,constructor:oe,init:function(t,n,i){var r,o;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ue.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof oe?n[0]:n,oe.merge(this,oe.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:U,!0)),le.test(r[1])&&oe.isPlainObject(n))for(r in n)oe.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return o=U.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=U,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},ready:function(t){return oe.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},oe.fn.init.prototype=oe.fn,oe.extend=oe.fn.extend=function(){var t,n,i,r,o,s,a=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},u=2),"object"==typeof a||oe.isFunction(a)||(a={}),l===u&&(a=this,--u);l>u;u++)if(null!=(t=arguments[u]))for(n in t)i=a[n],r=t[n],a!==r&&(c&&r&&(oe.isPlainObject(r)||(o=oe.isArray(r)))?(o?(o=!1,s=i&&oe.isArray(i)?i:[]):s=i&&oe.isPlainObject(i)?i:{},a[n]=oe.extend(c,s,r)):r!==e&&(a[n]=r));return a},oe.extend({expando:"jQuery"+(Y+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===oe&&(t.$=J),e&&t.jQuery===oe&&(t.jQuery=Q),oe},isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){(t===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,t!==!0&&--oe.readyWait>0||(B.resolveWith(U,[oe]),oe.fn.trigger&&oe(U).trigger("ready").off("ready")))},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[ne.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ie.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||U;var i=le.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,r),r&&oe(r).remove(),oe.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,n=i.parseFromString(t,"text/xml")}catch(r){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&oe.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=oe.trim(t),t&&(1===t.indexOf("use strict")?(e=U.createElement("script"),e.text=t,U.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ce,"ms-").replace(he,fe)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,s=t.length,a=n(t);if(i){if(a)for(;s>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":re.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):Z.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:ee.call(e,t,n)},merge:function(t,n){var i=n.length,r=t.length,o=0;if("number"==typeof i)for(;i>o;o++)t[r++]=n[o];else for(;n[o]!==e;)t[r++]=n[o++];return t.length=r,t},grep:function(t,e,n){var i,r=[],o=0,s=t.length;for(n=!!n;s>o;o++)i=!!e(t[o],o),n!==i&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,s=t.length,a=n(t),u=[];if(a)for(;s>o;o++)r=e(t[o],o,i),null!=r&&(u[u.length]=r);else for(o in t)r=e(t[o],o,i),null!=r&&(u[u.length]=r);return G.apply([],u)},guid:1,proxy:function(t,n){var i,r,o;return"string"==typeof n&&(i=t[n],n=t,t=i),oe.isFunction(t)?(r=te.call(arguments,2),o=function(){return t.apply(n||this,r.concat(te.call(arguments)))},o.guid=t.guid=t.guid||oe.guid++,o):e},access:function(t,n,i,r,o,s,a){var u=0,l=t.length,c=null==i;if("object"===oe.type(i)){o=!0;for(u in i)oe.access(t,n,u,i[u],!0,s,a)}else if(r!==e&&(o=!0,oe.isFunction(r)||(a=!0),c&&(a?(n.call(t,r),n=null):(c=n,n=function(t,e,n){return c.call(oe(t),n)})),n))for(;l>u;u++)n(t[u],i,a?r:r.call(t[u],u,n(t[u],i)));return o?t:c?n.call(t):l?n(t[0],i):s},now:Date.now,swap:function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=s[o];return r}}),oe.ready.promise=function(e){return B||(B=oe.Deferred(),"complete"===U.readyState?setTimeout(oe.ready):(U.addEventListener("DOMContentLoaded",pe,!1),t.addEventListener("load",pe,!1))),B.promise(e)},oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()}),I=oe(U),function(t,e){function n(t,e,n,i){var r,o,s,a,u,l,c,h,d,g;if((e?e.ownerDocument||e:M)!==A&&_(e),e=e||A,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(O&&!i){if(r=be.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&L(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return te.apply(n,e.getElementsByTagName(t)),n;if((s=r[3])&&k.getElementsByClassName&&e.getElementsByClassName)return te.apply(n,e.getElementsByClassName(s)),n}if(k.qsa&&(!q||!q.test(t))){if(h=c=F,d=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=f(t),(c=e.getAttribute("id"))?h=c.replace(Ce,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",u=l.length;u--;)l[u]=h+p(l[u]);d=pe.test(t)&&e.parentNode||e,g=l.join(",")}if(g)try{return te.apply(n,d.querySelectorAll(g)),n}catch(T){}finally{c||e.removeAttribute("id")}}}return w(t.replace(ce,"$1"),e,n,i)}function i(){function t(n,i){return e.push(n+=" ")>$.cacheLength&&delete t[e.shift()],t[n]=i}var e=[];return t}function r(t){return t[F]=!0,t}function o(t){var e=A.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=t.length;i--;)$.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||K)-(~t.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function u(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return r(function(e){return e=+e,r(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function h(){}function f(t,e){var i,r,o,s,a,u,l,c=z[t+" "];
if(c)return e?0:c.slice(0);for(a=t,u=[],l=$.preFilter;a;){(!i||(r=he.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),i=!1,(r=fe.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ce," ")}),a=a.slice(i.length));for(s in $.filter)!(r=ve[s].exec(a))||l[s]&&!(r=l[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?n.error(t):z(t,u).slice(0)}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=B++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,u,l,c=I+" "+o;if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(l=e[F]||(e[F]={}),(u=l[i])&&u[0]===c){if((a=u[1])===!0||a===T)return a===!0}else if(u=l[i]=[c],u[1]=t(e,n,s)||T,u[1]===!0)return!0}}function g(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,r){for(var o,s=[],a=0,u=t.length,l=null!=e;u>a;a++)(o=t[a])&&(!n||n(o,i,r))&&(s.push(o),l&&e.push(a));return s}function v(t,e,n,i,o,s){return i&&!i[F]&&(i=v(i)),o&&!o[F]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,h,f=[],p=[],d=s.length,g=r||x(e||"*",a.nodeType?[a]:a,[]),v=!t||!r&&e?g:m(g,f,t,a,u),y=n?o||(r?t:d||i)?[]:s:v;if(n&&n(v,y,a,u),i)for(l=m(y,p),i(l,[],a,u),c=l.length;c--;)(h=l[c])&&(y[p[c]]=!(v[p[c]]=h));if(r){if(o||t){if(o){for(l=[],c=y.length;c--;)(h=y[c])&&l.push(v[c]=h);o(null,y=[],l,u)}for(c=y.length;c--;)(h=y[c])&&(l=o?ne.call(r,h):f[c])>-1&&(r[l]=!(s[l]=h))}}else y=m(y===s?y.splice(d,y.length):y),o?o(null,s,y,u):te.apply(s,y)})}function y(t){for(var e,n,i,r=t.length,o=$.relative[t[0].type],s=o||$.relative[" "],a=o?1:0,u=d(function(t){return t===e},s,!0),l=d(function(t){return ne.call(e,t)>-1},s,!0),c=[function(t,n,i){return!o&&(i||n!==P)||((e=n).nodeType?u(t,n,i):l(t,n,i))}];r>a;a++)if(n=$.relative[t[a].type])c=[d(g(c),n)];else{if(n=$.filter[t[a].type].apply(null,t[a].matches),n[F]){for(i=++a;r>i&&!$.relative[t[i].type];i++);return v(a>1&&g(c),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ce,"$1"),n,i>a&&y(t.slice(a,i)),r>i&&y(t=t.slice(i)),r>i&&p(t))}c.push(n)}return g(c)}function b(t,e){var i=0,o=e.length>0,s=t.length>0,a=function(r,a,u,l,c){var h,f,p,d=[],g=0,v="0",y=r&&[],b=null!=c,x=P,w=r||s&&$.find.TAG("*",c&&a.parentNode||a),C=I+=null==x?1:Math.random()||.1;for(b&&(P=a!==A&&a,T=i);null!=(h=w[v]);v++){if(s&&h){for(f=0;p=t[f++];)if(p(h,a,u)){l.push(h);break}b&&(I=C,T=++i)}o&&((h=!p&&h)&&g--,r&&y.push(h))}if(g+=v,o&&v!==g){for(f=0;p=e[f++];)p(y,d,a,u);if(r){if(g>0)for(;v--;)y[v]||d[v]||(d[v]=G.call(l));d=m(d)}te.apply(l,d),b&&!r&&d.length>0&&g+e.length>1&&n.uniqueSort(l)}return b&&(I=C,P=x),y};return o?r(a):a}function x(t,e,i){for(var r=0,o=e.length;o>r;r++)n(t,e[r],i);return i}function w(t,e,n,i){var r,o,s,a,u,l=f(t);if(!i&&1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&k.getById&&9===e.nodeType&&O&&$.relative[o[1].type]){if(e=($.find.ID(s.matches[0].replace(ke,Te),e)||[])[0],!e)return n;t=t.slice(o.shift().value.length)}for(r=ve.needsContext.test(t)?0:o.length;r--&&(s=o[r],!$.relative[a=s.type]);)if((u=$.find[a])&&(i=u(s.matches[0].replace(ke,Te),pe.test(o[0].type)&&e.parentNode||e))){if(o.splice(r,1),t=i.length&&p(o),!t)return te.apply(n,i),n;break}}return j(t,l)(i,e,!O,n,pe.test(t)),n}var C,k,T,$,E,S,j,P,N,_,A,D,O,q,H,R,L,F="sizzle"+-new Date,M=t.document,I=0,B=0,W=i(),z=i(),U=i(),X=!1,Q=function(t,e){return t===e?(X=!0,0):0},J=typeof e,K=1<<31,V={}.hasOwnProperty,Y=[],G=Y.pop,Z=Y.push,te=Y.push,ee=Y.slice,ne=Y.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=se.replace("w","w#"),ue="\\["+re+"*("+se+")"+re+"*(?:([*^$|!~]?=)"+re+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+re+"*\\]",le=":("+se+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ue.replace(3,8)+")*)|.*)\\)|)",ce=RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),he=RegExp("^"+re+"*,"+re+"*"),fe=RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),pe=RegExp(re+"*[+~]"),de=RegExp("="+re+"*([^\\]'\"]*)"+re+"*\\]","g"),ge=RegExp(le),me=RegExp("^"+ae+"$"),ve={ID:RegExp("^#("+se+")"),CLASS:RegExp("^\\.("+se+")"),TAG:RegExp("^("+se.replace("w","w*")+")"),ATTR:RegExp("^"+ue),PSEUDO:RegExp("^"+le),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:RegExp("^(?:"+ie+")$","i"),needsContext:RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ye=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/^(?:input|select|textarea|button)$/i,we=/^h\d$/i,Ce=/'|\\/g,ke=RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),Te=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{te.apply(Y=ee.call(M.childNodes),M.childNodes),Y[M.childNodes.length].nodeType}catch(it){te={apply:Y.length?function(t,e){Z.apply(t,ee.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}S=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},k=n.support={},_=n.setDocument=function(t){var n=t?t.ownerDocument||t:M,i=n.defaultView;return n!==A&&9===n.nodeType&&n.documentElement?(A=n,D=n.documentElement,O=!S(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){_()}),k.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),k.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),k.getElementsByClassName=o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),k.getById=o(function(t){return D.appendChild(t).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),k.getById?($.find.ID=function(t,e){if(typeof e.getElementById!==J&&O){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},$.filter.ID=function(t){var e=t.replace(ke,Te);return function(t){return t.getAttribute("id")===e}}):(delete $.find.ID,$.filter.ID=function(t){var e=t.replace(ke,Te);return function(t){var n=typeof t.getAttributeNode!==J&&t.getAttributeNode("id");return n&&n.value===e}}),$.find.TAG=k.getElementsByTagName?function(t,n){return typeof n.getElementsByTagName!==J?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},$.find.CLASS=k.getElementsByClassName&&function(t,n){return typeof n.getElementsByClassName!==J&&O?n.getElementsByClassName(t):e},H=[],q=[],(k.qsa=ye.test(n.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||q.push("\\["+re+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||q.push(":checked")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&q.push("[*^$]="+re+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),q.push(",.*:")})),(k.matchesSelector=ye.test(R=D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&o(function(t){k.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),H.push("!=",le)}),q=q.length&&RegExp(q.join("|")),H=H.length&&RegExp(H.join("|")),L=ye.test(D.contains)||D.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Q=D.compareDocumentPosition?function(t,e){if(t===e)return X=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||!k.sortDetached&&e.compareDocumentPosition(t)===i?t===n||L(M,t)?-1:e===n||L(M,e)?1:N?ne.call(N,t)-ne.call(N,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,r=0,o=t.parentNode,s=e.parentNode,u=[t],l=[e];if(t===e)return X=!0,0;if(!o||!s)return t===n?-1:e===n?1:o?-1:s?1:N?ne.call(N,t)-ne.call(N,e):0;if(o===s)return a(t,e);for(i=t;i=i.parentNode;)u.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;u[r]===l[r];)r++;return r?a(u[r],l[r]):u[r]===M?-1:l[r]===M?1:0},n):A},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==A&&_(t),e=e.replace(de,"='$1']"),!(!k.matchesSelector||!O||H&&H.test(e)||q&&q.test(e)))try{var i=R.call(t,e);if(i||k.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(i){}return n(e,A,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==A&&_(t),L(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==A&&_(t);var i=$.attrHandle[n.toLowerCase()],r=i&&V.call($.attrHandle,n.toLowerCase())?i(t,n,!O):e;return r===e?k.attributes||!O?t.getAttribute(n):(r=t.getAttributeNode(n))&&r.specified?r.value:null:r},n.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],i=0,r=0;if(X=!k.detectDuplicates,N=!k.sortStable&&t.slice(0),t.sort(Q),X){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},E=n.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=E(e);return n},$=n.selectors={cacheLength:50,createPseudo:r,match:ve,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ke,Te),t[3]=(t[4]||t[5]||"").replace(ke,Te),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,i=!t[5]&&t[2];return ve.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:i&&ge.test(i)&&(n=f(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(ke,Te).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=RegExp("(^|"+re+")"+t+"("+re+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==J&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(r){var o=n.attr(r,t);return null==o?"!="===e:e?(o+="","="===e?o===i:"!="===e?o!==i:"^="===e?i&&0===o.indexOf(i):"*="===e?i&&o.indexOf(i)>-1:"$="===e?i&&o.slice(-i.length)===i:"~="===e?(" "+o+" ").indexOf(i)>-1:"|="===e?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,f,p,d,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!u&&!a;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&y){for(c=m[F]||(m[F]={}),l=c[t]||[],p=l[0]===I&&l[1],f=l[0]===I&&l[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(f=p=0)||d.pop();)if(1===h.nodeType&&++f&&h===e){c[t]=[I,p,f];break}}else if(y&&(l=(e[F]||(e[F]={}))[t])&&l[0]===I)f=l[1];else for(;(h=++p&&h&&h[g]||(f=p=0)||d.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++f||(y&&((h[F]||(h[F]={}))[t]=[I,f]),h!==e)););return f-=r,f===i||0===f%i&&f/i>=0}}},PSEUDO:function(t,e){var i,o=$.pseudos[t]||$.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return o[F]?o(e):o.length>1?(i=[t,t,"",e],$.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,n){for(var i,r=o(t,e),s=r.length;s--;)i=ne.call(t,r[s]),t[i]=!(n[i]=r[s])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=j(t.replace(ce,"$1"));return i[F]?r(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),!n.pop()}}),has:r(function(t){return function(e){return n(t,e).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:r(function(t){return me.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(ke,Te).toLowerCase(),function(e){var n;do if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===D},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!$.pseudos.empty(t)},header:function(t){return we.test(t.nodeName)},input:function(t){return xe.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}},$.pseudos.nth=$.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[C]=u(C);for(C in{submit:!0,reset:!0})$.pseudos[C]=l(C);h.prototype=$.filters=$.pseudos,$.setFilters=new h,j=n.compile=function(t,e){var n,i=[],r=[],o=U[t+" "];if(!o){for(e||(e=f(t)),n=e.length;n--;)o=y(e[n]),o[F]?i.push(o):r.push(o);o=U(t,b(r,i))}return o},k.sortStable=F.split("").sort(Q).join("")===F,k.detectDuplicates=X,_(),k.sortDetached=o(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,n,i){return i?e:t.getAttribute(n,"type"===n.toLowerCase()?1:2)}),k.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,n,i){return i||"input"!==t.nodeName.toLowerCase()?e:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||s(ie,function(t,n,i){var r;return i?e:(r=t.getAttributeNode(n))&&r.specified?r.value:t[n]===!0?n.toLowerCase():null}),oe.find=n,oe.expr=n.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=n.uniqueSort,oe.text=n.getText,oe.isXMLDoc=n.isXML,oe.contains=n.contains}(t);var de={};oe.Callbacks=function(t){t="string"==typeof t?de[t]||i(t):oe.extend({},t);var n,r,o,s,a,u,l=[],c=!t.once&&[],h=function(e){for(n=t.memory&&e,r=!0,u=s||0,s=0,a=l.length,o=!0;l&&a>u;u++)if(l[u].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,l&&(c?c.length&&h(c.shift()):n?l=[]:f.disable())},f={add:function(){if(l){var e=l.length;!function e(n){oe.each(n,function(n,i){var r=oe.type(i);"function"===r?t.unique&&f.has(i)||l.push(i):i&&i.length&&"string"!==r&&e(i)})}(arguments),o?a=l.length:n&&(s=e,h(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,e){for(var n;(n=oe.inArray(e,l,n))>-1;)l.splice(n,1),o&&(a>=n&&a--,u>=n&&u--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=n=e,this},disabled:function(){return!l},lock:function(){return c=e,n||f.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||r&&!c||(e=e||[],e=[t,e.slice?e.slice():e],o?c.push(e):h(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,o){var s=o[0],a=oe.isFunction(t[e])&&t[e];r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},r={};return i.pipe=i.then,oe.each(e,function(t,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=te.call(arguments),s=o.length,a=1!==s||t&&oe.isFunction(t.promise)?s:0,u=1===a?t:oe.Deferred(),l=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?te.call(arguments):r,i===e?u.notifyWith(n,i):--a||u.resolveWith(n,i)}};if(s>1)for(e=Array(s),n=Array(s),i=Array(s);s>r;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(u.reject).progress(l(r,n,e)):--a;return a||u.resolveWith(i,o),u.promise()}}),oe.support=function(e){var n=U.createElement("input"),i=U.createDocumentFragment(),r=U.createElement("div"),o=U.createElement("select"),s=o.appendChild(U.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=s.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!s.disabled,n=U.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),e.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===r.style.backgroundClip,oe(function(){var n,i,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=U.getElementsByTagName("body")[0];s&&(n=U.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",oe.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===r.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(r,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(U.createElement("div")),i.style.cssText=r.style.cssText=o,i.style.marginRight=i.style.width="0",r.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),s.removeChild(n))}),e):e}({});var ge,me,ve=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ye=/([A-Z])/g;r.uid=1,r.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},r.prototype={key:function(t){if(!r.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=r.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,oe.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),o=this.cache[r];if("string"==typeof e)o[e]=n;else if(oe.isEmptyObject(o))oe.extend(this.cache[r],e);else for(i in e)o[i]=e[i];return o},get:function(t,n){var i=this.cache[this.key(t)];return n===e?i:i[n]},access:function(t,n,i){var r;return n===e||n&&"string"==typeof n&&i===e?(r=this.get(t,n),r!==e?r:this.get(t,oe.camelCase(n))):(this.set(t,n,i),i!==e?i:n)},remove:function(t,n){var i,r,o,s=this.key(t),a=this.cache[s];if(n===e)this.cache[s]={};else{oe.isArray(n)?r=n.concat(n.map(oe.camelCase)):(o=oe.camelCase(n),n in a?r=[n,o]:(r=o,r=r in a?[r]:r.match(ae)||[])),i=r.length;for(;i--;)delete a[r[i]]}},hasData:function(t){return!oe.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},ge=new r,me=new r,oe.extend({acceptData:r.accepts,hasData:function(t){return ge.hasData(t)||me.hasData(t)},data:function(t,e,n){return ge.access(t,e,n)},removeData:function(t,e){ge.remove(t,e)},_data:function(t,e,n){return me.access(t,e,n)},_removeData:function(t,e){me.remove(t,e)}}),oe.fn.extend({data:function(t,n){var i,r,s=this[0],a=0,u=null;if(t===e){if(this.length&&(u=ge.get(s),1===s.nodeType&&!me.get(s,"hasDataAttrs"))){for(i=s.attributes;i.length>a;a++)r=i[a].name,0===r.indexOf("data-")&&(r=oe.camelCase(r.slice(5)),o(s,r,u[r]));me.set(s,"hasDataAttrs",!0)}return u}return"object"==typeof t?this.each(function(){ge.set(this,t)}):oe.access(this,function(n){var i,r=oe.camelCase(t);if(s&&n===e){if(i=ge.get(s,t),i!==e)return i;if(i=ge.get(s,r),i!==e)return i;if(i=o(s,r,e),i!==e)return i}else this.each(function(){var i=ge.get(this,r);ge.set(this,r,n),-1!==t.indexOf("-")&&i!==e&&ge.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ge.remove(this,t)})}}),oe.extend({queue:function(t,n,i){var r;return t?(n=(n||"fx")+"queue",r=me.get(t,n),i&&(!r||oe.isArray(i)?r=me.access(t,n,oe.makeArray(i)):r.push(i)),r||[]):e},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,r=n.shift(),o=oe._queueHooks(t,e),s=function(){oe.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return me.get(t,n)||me.access(t,n,{empty:oe.Callbacks("once memory").add(function(){me.remove(t,[e+"queue",n])})})}}),oe.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?oe.queue(this[0],t):n===e?this:this.each(function(){var e=oe.queue(this,t,n);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},delay:function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,o=oe.Deferred(),s=this,a=this.length,u=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=me.get(s[a],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(u));return u(),o.promise(n)}});var be,xe,we=/[\t\r\n\f]/g,Ce=/\r/g,ke=/^(?:input|select|textarea|button)$/i;oe.fn.extend({attr:function(t,e){return oe.access(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})},prop:function(t,e){return oe.access(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[oe.propFix[t]||t]})},addClass:function(t){var e,n,i,r,o,s=0,a=this.length,u="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):" ")){for(o=0;r=e[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=oe.trim(i)}return this},removeClass:function(t){var e,n,i,r,o,s=0,a=this.length,u=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?oe.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):oe.isFunction(t)?this.each(function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,r=oe(this),o=t.match(ae)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===W||"boolean"===n)&&(this.className&&me.set(this,"__className__",this.className),this.className=this.className||t===!1?"":me.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(we," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,o=this[0];return arguments.length?(r=oe.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=r?t.call(this,i,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),n=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==e||(this.value=o))})):o?(n=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==e?i:(i=o.value,"string"==typeof i?i.replace(Ce,""):null==i?"":i)):void 0}}),oe.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:i.length,u=0>r?a:o?r:0;a>u;u++)if(n=i[u],!(!n.selected&&u!==r||(oe.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=oe.makeArray(e),s=r.length;s--;)i=r[s],(i.selected=oe.inArray(oe(i).val(),o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}},attr:function(t,n,i){var r,o,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?typeof t.getAttribute===W?oe.prop(t,n,i):(1===s&&oe.isXMLDoc(t)||(n=n.toLowerCase(),r=oe.attrHooks[n]||(oe.expr.match.bool.test(n)?xe:be)),i===e?r&&"get"in r&&null!==(o=r.get(t,n))?o:(o=oe.find.attr(t,n),null==o?e:o):null!==i?r&&"set"in r&&(o=r.set(t,i,n))!==e?o:(t.setAttribute(n,i+""),i):(oe.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(ae);if(o&&1===t.nodeType)for(;n=o[r++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!oe.support.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{for:"htmlFor",class:"className"},prop:function(t,n,i){var r,o,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!oe.isXMLDoc(t),s&&(n=oe.propFix[n]||n,o=oe.propHooks[n]),i!==e?o&&"set"in o&&(r=o.set(t,i,n))!==e?r:t[n]=i:o&&"get"in o&&null!==(r=o.get(t,n))?r:t[n]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ke.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),xe={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):t.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,n){var i=oe.expr.attrHandle[n]||oe.find.attr;oe.expr.attrHandle[n]=function(t,n,r){var o=oe.expr.attrHandle[n],s=r?e:(oe.expr.attrHandle[n]=e)!=i(t,n,r)?n.toLowerCase():null;return oe.expr.attrHandle[n]=o,s}}),oe.support.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,n){return oe.isArray(n)?t.checked=oe.inArray(oe(t).val(),n)>=0:e}},oe.support.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Te=/^key/,$e=/^(?:mouse|contextmenu)|click/,Ee=/^(?:focusinfocus|focusoutblur)$/,Se=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,n,i,r,o){var s,a,u,l,c,h,f,p,d,g,m,v=me.get(t);if(v){for(i.handler&&(s=i,i=s.handler,o=s.selector),i.guid||(i.guid=oe.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof oe===W||t&&oe.event.triggered===t.type?e:oe.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(ae)||[""],c=n.length;c--;)u=Se.exec(n[c])||[],d=m=u[1],g=(u[2]||"").split(".").sort(),d&&(f=oe.event.special[d]||{},d=(o?f.delegateType:f.bindType)||d,f=oe.event.special[d]||{},h=oe.extend({type:d,origType:m,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:g.join(".")},s),(p=l[d])||(p=l[d]=[],p.delegateCount=0,f.setup&&f.setup.call(t,r,g,a)!==!1||t.addEventListener&&t.addEventListener(d,a,!1)),f.add&&(f.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),oe.event.global[d]=!0);t=null}},remove:function(t,e,n,i,r){var o,s,a,u,l,c,h,f,p,d,g,m=me.hasData(t)&&me.get(t);if(m&&(u=m.events)){for(e=(e||"").match(ae)||[""],l=e.length;l--;)if(a=Se.exec(e[l])||[],p=g=a[1],d=(a[2]||"").split(".").sort(),p){for(h=oe.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,f=u[p]||[],a=a[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)c=f[o],!r&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));s&&!f.length&&(h.teardown&&h.teardown.call(t,d,m.handle)!==!1||oe.removeEvent(t,p,m.handle),delete u[p])}else for(p in u)oe.event.remove(t,p+e[l],n,i,!0);oe.isEmptyObject(u)&&(delete m.handle,me.remove(t,"events"))}},trigger:function(n,i,r,o){var s,a,u,l,c,h,f,p=[r||U],d=ie.call(n,"type")?n.type:n,g=ie.call(n,"namespace")?n.namespace.split("."):[];if(a=u=r=r||U,3!==r.nodeType&&8!==r.nodeType&&!Ee.test(d+oe.event.triggered)&&(d.indexOf(".")>=0&&(g=d.split("."),d=g.shift(),g.sort()),c=0>d.indexOf(":")&&"on"+d,n=n[oe.expando]?n:new oe.Event(d,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:oe.makeArray(i,[n]),f=oe.event.special[d]||{},o||!f.trigger||f.trigger.apply(r,i)!==!1)){if(!o&&!f.noBubble&&!oe.isWindow(r)){for(l=f.delegateType||d,Ee.test(l+d)||(a=a.parentNode);a;a=a.parentNode)p.push(a),u=a;u===(r.ownerDocument||U)&&p.push(u.defaultView||u.parentWindow||t)}for(s=0;(a=p[s++])&&!n.isPropagationStopped();)n.type=s>1?l:f.bindType||d,h=(me.get(a,"events")||{})[n.type]&&me.get(a,"handle"),h&&h.apply(a,i),h=c&&a[c],h&&oe.acceptData(a)&&h.apply&&h.apply(a,i)===!1&&n.preventDefault();return n.type=d,o||n.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),i)!==!1||!oe.acceptData(r)||c&&oe.isFunction(r[d])&&!oe.isWindow(r)&&(u=r[c],u&&(r[c]=null),oe.event.triggered=d,r[d](),oe.event.triggered=e,u&&(r[c]=u)),n.result
}},dispatch:function(t){t=oe.event.fix(t);var n,i,r,o,s,a=[],u=te.call(arguments),l=(me.get(this,"events")||{})[t.type]||[],c=oe.event.special[t.type]||{};if(u[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,l),n=0;(o=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,r=((oe.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,u),r!==e&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,o,s,a=[],u=n.delegateCount,l=t.target;if(u&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(r=[],i=0;u>i;i++)s=n[i],o=s.selector+" ",r[o]===e&&(r[o]=s.needsContext?oe(o,this).index(l)>=0:oe.find(o,this,null,[l]).length),r[o]&&r.push(s);r.length&&a.push({elem:l,handlers:r})}return n.length>u&&a.push({elem:this,handlers:n.slice(u)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,o,s=n.button;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||U,r=i.documentElement,o=i.body,t.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[oe.expando])return t;var e,n,i,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=$e.test(r)?this.mouseHooks:Te.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new oe.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=U),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):e},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(r,null,e):oe.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},oe.Event=function(t,n){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?s:a):this.type=t,n&&oe.extend(this,n),this.timeStamp=t&&t.timeStamp||oe.now(),this[oe.expando]=!0,e):new oe.Event(t,n)},oe.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=s,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=s,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!oe.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),oe.support.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){0===n++&&U.addEventListener(t,i,!0)},teardown:function(){0===--n&&U.removeEventListener(t,i,!0)}}}),oe.fn.extend({on:function(t,n,i,r,o){var s,u;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(u in t)this.on(u,n,i,t[u],o);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=a;else if(!r)return this;return 1===o&&(s=r,r=function(t){return oe().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,oe(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=a),this.each(function(){oe.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?oe.event.trigger(t,n,i,!0):e}});var je=/^.[^:#\[\.,]*$/,Pe=/^(?:parents|prev(?:Until|All))/,Ne=oe.expr.match.needsContext,_e={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;r>e;e++)if(oe.contains(i[e],this))return!0}));for(e=0;r>e;e++)oe.find(t,i[e],n);return n=this.pushStack(r>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=oe(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(oe.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(c(this,t||[],!0))},filter:function(t){return this.pushStack(c(this,t||[],!1))},is:function(t){return!!c(this,"string"==typeof t&&Ne.test(t)?oe(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=Ne.test(t)||"string"!=typeof t?oe(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){n=o.push(n);break}return this.pushStack(o.length>1?oe.unique(o):o)},index:function(t){return t?"string"==typeof t?ee.call(oe(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?oe(t,e):oe.makeArray(t&&t.nodeType?[t]:t),i=oe.merge(this.get(),n);return this.pushStack(oe.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return t.contentDocument||oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var r=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=oe.filter(i,r)),this.length>1&&(_e[t]||oe.unique(r),Pe.test(t)&&r.reverse()),this.pushStack(r)}}),oe.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?oe.find.matchesSelector(i,t)?[i]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var r=[],o=i!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&oe(t).is(i))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,De=/<([\w:]+)/,Oe=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,He=/^(?:checkbox|radio)$/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ie={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ie.optgroup=Ie.option,Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,oe.fn.extend({text:function(t){return oe.access(this,function(t){return t===e?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||U).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?oe.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||oe.cleanData(m(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&d(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(oe.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return oe.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!qe.test(t)&&!Ie[(De.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ae,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(oe.cleanData(m(n,!1)),n.innerHTML=t);n=0}catch(i){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=oe.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],r=t[e++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),oe(this).remove(),r.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=G.apply([],t);var i,r,o,s,a,u,l=0,c=this.length,h=this,d=c-1,g=t[0],v=oe.isFunction(g);if(v||!(1>=c||"string"!=typeof g||oe.support.checkClone)&&Re.test(g))return this.each(function(i){var r=h.eq(i);v&&(t[0]=g.call(this,i,r.html())),r.domManip(t,e,n)});if(c&&(i=oe.buildFragment(t,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(o=oe.map(m(i,"script"),f),s=o.length;c>l;l++)a=i,l!==d&&(a=oe.clone(a,!0,!0),s&&oe.merge(o,m(a,"script"))),e.call(this[l],a,l);if(s)for(u=o[o.length-1].ownerDocument,oe.map(o,p),l=0;s>l;l++)a=o[l],Le.test(a.type||"")&&!me.access(a,"globalEval")&&oe.contains(u,a)&&(a.src?oe._evalUrl(a.src):oe.globalEval(a.textContent.replace(Me,"")))}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=[],r=oe(t),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),oe(r[s])[e](n),Z.apply(i,n.get());return this.pushStack(i)}}),oe.extend({clone:function(t,e,n){var i,r,o,s,a=t.cloneNode(!0),u=oe.contains(t.ownerDocument,t);if(!(oe.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(s=m(a),o=m(t),i=0,r=o.length;r>i;i++)v(o[i],s[i]);if(e)if(n)for(o=o||m(t),s=s||m(a),i=0,r=o.length;r>i;i++)g(o[i],s[i]);else g(t,a);return s=m(a,"script"),s.length>0&&d(s,!u&&m(t,"script")),a},buildFragment:function(t,e,n,i){for(var r,o,s,a,u,l,c=0,h=t.length,f=e.createDocumentFragment(),p=[];h>c;c++)if(r=t[c],r||0===r)if("object"===oe.type(r))oe.merge(p,r.nodeType?[r]:r);else if(Oe.test(r)){for(o=o||f.appendChild(e.createElement("div")),s=(De.exec(r)||["",""])[1].toLowerCase(),a=Ie[s]||Ie._default,o.innerHTML=a[1]+r.replace(Ae,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;oe.merge(p,o.childNodes),o=f.firstChild,o.textContent=""}else p.push(e.createTextNode(r));for(f.textContent="",c=0;r=p[c++];)if((!i||-1===oe.inArray(r,i))&&(u=oe.contains(r.ownerDocument,r),o=m(f.appendChild(r),"script"),u&&d(o),n))for(l=0;r=o[l++];)Le.test(r.type||"")&&n.push(r);return f},cleanData:function(t){for(var n,i,o,s,a,u,l=oe.event.special,c=0;(i=t[c])!==e;c++){if(r.accepts(i)&&(a=i[me.expando],a&&(n=me.cache[a]))){if(o=Object.keys(n.events||{}),o.length)for(u=0;(s=o[u])!==e;u++)l[s]?oe.event.remove(i,s):oe.removeEvent(i,s,n.handle);me.cache[a]&&delete me.cache[a]}delete ge.cache[i[ge.expando]]}},_evalUrl:function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),oe.fn.extend({wrapAll:function(t){var e;return oe.isFunction(t)?this.each(function(e){oe(this).wrapAll(t.call(this,e))}):(this[0]&&(e=oe(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return oe.isFunction(t)?this.each(function(e){oe(this).wrapInner(t.call(this,e))}):this.each(function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}});var Be,We,ze=/^(none|table(?!-c[ea]).+)/,Ue=/^margin/,Xe=RegExp("^("+se+")(.*)$","i"),Qe=RegExp("^("+se+")(?!px)[a-z%]+$","i"),Je=RegExp("^([+-])=("+se+")","i"),Ke={BODY:"block"},Ve={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:0,fontWeight:400},Ge=["Top","Right","Bottom","Left"],Ze=["Webkit","O","Moz","ms"];oe.fn.extend({css:function(t,n){return oe.access(this,function(t,n,i){var r,o,s={},a=0;if(oe.isArray(n)){for(r=x(t),o=n.length;o>a;a++)s[n[a]]=oe.css(t,n[a],!1,r);return s}return i!==e?oe.style(t,n,i):oe.css(t,n)},t,n,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){b(this)?oe(this).show():oe(this).hide()})}}),oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Be(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,a,u=oe.camelCase(n),l=t.style;return n=oe.cssProps[u]||(oe.cssProps[u]=y(l,u)),a=oe.cssHooks[n]||oe.cssHooks[u],i===e?a&&"get"in a&&(o=a.get(t,!1,r))!==e?o:l[n]:(s=typeof i,"string"===s&&(o=Je.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(oe.css(t,n)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||oe.cssNumber[u]||(i+="px"),oe.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(l[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,r))===e||(l[n]=i)),e)}},css:function(t,n,i,r){var o,s,a,u=oe.camelCase(n);return n=oe.cssProps[u]||(oe.cssProps[u]=y(t.style,u)),a=oe.cssHooks[n]||oe.cssHooks[u],a&&"get"in a&&(o=a.get(t,!0,i)),o===e&&(o=Be(t,n,r)),"normal"===o&&n in Ye&&(o=Ye[n]),""===i||i?(s=parseFloat(o),i===!0||oe.isNumeric(s)?s||0:o):o}}),Be=function(t,n,i){var r,o,s,a=i||x(t),u=a?a.getPropertyValue(n)||a[n]:e,l=t.style;return a&&(""!==u||oe.contains(t.ownerDocument,t)||(u=oe.style(t,n)),Qe.test(u)&&Ue.test(n)&&(r=l.width,o=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=a.width,l.width=r,l.minWidth=o,l.maxWidth=s)),u},oe.each(["height","width"],function(t,n){oe.cssHooks[n]={get:function(t,i,r){return i?0===t.offsetWidth&&ze.test(oe.css(t,"display"))?oe.swap(t,Ve,function(){return T(t,n,r)}):T(t,n,r):e},set:function(t,e,i){var r=i&&x(t);return C(t,e,i?k(t,n,i,oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,r),r):0)}}}),oe(function(){oe.support.reliableMarginRight||(oe.cssHooks.marginRight={get:function(t,n){return n?oe.swap(t,{display:"inline-block"},Be,[t,"marginRight"]):e}}),!oe.support.pixelPosition&&oe.fn.position&&oe.each(["top","left"],function(t,n){oe.cssHooks[n]={get:function(t,i){return i?(i=Be(t,n),Qe.test(i)?oe(t).position()[n]+"px":i):e}}})}),oe.expr&&oe.expr.filters&&(oe.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Ge[i]+e]=o[i]||o[i-2]||o[0];return r}},Ue.test(t)||(oe.cssHooks[t+e].set=C)});var tn=/%20/g,en=/\[\]$/,nn=/\r?\n/g,rn=/^(?:submit|button|image|reset|file)$/i,on=/^(?:input|select|textarea|keygen)/i;oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&on.test(this.nodeName)&&!rn.test(t)&&(this.checked||!He.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(nn,"\r\n")}}):{name:e.name,value:n.replace(nn,"\r\n")}}).get()}}),oe.param=function(t,n){var i,r=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(i in t)S(i,t[i],n,o);return r.join("&").replace(tn,"+")},oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var sn,an,un=oe.now(),ln=/\?/,cn=/#.*$/,hn=/([?&])_=[^&]*/,fn=/^(.*?):[ \t]*([^\r\n]*)$/gm,pn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,dn=/^(?:GET|HEAD)$/,gn=/^\/\//,mn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,vn=oe.fn.load,yn={},bn={},xn="*/".concat("*");try{an=z.href}catch(an){an=U.createElement("a"),an.href="",an=an.href}sn=mn.exec(an.toLowerCase())||[],oe.fn.load=function(t,n,i){if("string"!=typeof t&&vn)return vn.apply(this,arguments);var r,o,s,a=this,u=t.indexOf(" ");return u>=0&&(r=t.slice(u),t=t.slice(0,u)),oe.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(o="POST"),a.length>0&&oe.ajax({url:t,type:o,dataType:"html",data:n}).done(function(t){s=arguments,a.html(r?oe("<div>").append(oe.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){a.each(i,s||[t.responseText,e,t])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:an,type:"GET",isLocal:pn.test(sn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?N(N(t,oe.ajaxSettings),e):N(oe.ajaxSettings,t)},ajaxPrefilter:j(yn),ajaxTransport:j(bn),ajax:function(t,n){function i(t,n,i,a){var l,h,y,b,w,k=n;2!==x&&(x=2,u&&clearTimeout(u),r=e,s=a||"",C.readyState=t>0?4:0,l=t>=200&&300>t||304===t,i&&(b=_(f,C,i)),b=A(f,b,C,l),l?(f.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=C.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===f.type?k="nocontent":304===t?k="notmodified":(k=b.state,h=b.data,y=b.error,l=!y)):(y=k,(t||!k)&&(k="error",0>t&&(t=0))),C.status=t,C.statusText=(n||k)+"",l?g.resolveWith(p,[h,k,C]):g.rejectWith(p,[C,k,y]),C.statusCode(v),v=e,c&&d.trigger(l?"ajaxSuccess":"ajaxError",[C,f,l?h:y]),m.fireWith(p,[C,k]),c&&(d.trigger("ajaxComplete",[C,f]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,o,s,a,u,l,c,h,f=oe.ajaxSetup({},n),p=f.context||f,d=f.context&&(p.nodeType||p.jquery)?oe(p):oe.event,g=oe.Deferred(),m=oe.Callbacks("once memory"),v=f.statusCode||{},y={},b={},x=0,w="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!a)for(a={};e=fn.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return x||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>x)for(e in t)v[e]=[v[e],t[e]];else C.always(t[C.status]);return this},abort:function(t){var e=t||w;return r&&r.abort(e),i(0,e),this}};if(g.promise(C).complete=m.add,C.success=C.done,C.error=C.fail,f.url=((t||f.url||an)+"").replace(cn,"").replace(gn,sn[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=oe.trim(f.dataType||"*").toLowerCase().match(ae)||[""],null==f.crossDomain&&(l=mn.exec(f.url.toLowerCase()),f.crossDomain=!(!l||l[1]===sn[1]&&l[2]===sn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(sn[3]||("http:"===sn[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=oe.param(f.data,f.traditional)),P(yn,f,n,C),2===x)return C;c=f.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!dn.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(ln.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=hn.test(o)?o.replace(hn,"$1_="+un++):o+(ln.test(o)?"&":"?")+"_="+un++)),f.ifModified&&(oe.lastModified[o]&&C.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&C.setRequestHeader("If-None-Match",oe.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+xn+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)C.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(f.beforeSend.call(p,C,f)===!1||2===x))return C.abort();w="abort";for(h in{success:1,error:1,complete:1})C[h](f[h]);if(r=P(bn,f,n,C)){C.readyState=1,c&&d.trigger("ajaxSend",[C,f]),f.async&&f.timeout>0&&(u=setTimeout(function(){C.abort("timeout")},f.timeout));try{x=1,r.send(y,i)}catch(C){if(!(2>x))throw C;i(-1,C)}}else i(-1,"No Transport");return C},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,n){return oe.get(t,e,n,"script")}}),oe.each(["get","post"],function(t,n){oe[n]=function(t,i,r,o){return oe.isFunction(i)&&(o=o||r,r=i,i=e),oe.ajax({url:t,type:n,dataType:o,data:i,success:r})}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=oe("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),U.head.appendChild(e[0])},abort:function(){n&&n()}}}});var wn=[],Cn=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=wn.pop()||oe.expando+"_"+un++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(n,i,r){var o,s,a,u=n.jsonp!==!1&&(Cn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Cn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=oe.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Cn,"$1"+o):n.jsonp!==!1&&(n.url+=(ln.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||oe.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},r.always(function(){t[o]=s,n[o]&&(n.jsonpCallback=i.jsonpCallback,wn.push(o)),a&&oe.isFunction(s)&&s(a[0]),a=s=e}),"script"):e}),oe.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var kn=oe.ajaxSettings.xhr(),Tn={0:200,1223:204},$n=0,En={};t.ActiveXObject&&oe(t).on("unload",function(){for(var t in En)En[t]();En=e}),oe.support.cors=!!kn&&"withCredentials"in kn,oe.support.ajax=kn=!!kn,oe.ajaxTransport(function(t){var n;return oe.support.cors||kn&&!t.crossDomain?{send:function(i,r){var o,s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)a.setRequestHeader(o,i[o]);n=function(t){return function(){n&&(delete En[s],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?r(a.status||404,a.statusText):r(Tn[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=En[s=$n++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:e});var Sn,jn,Pn=/^(?:toggle|show|hide)$/,Nn=RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),_n=/queueHooks$/,An=[R],Dn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=Nn.exec(e),o=r&&r[3]||(oe.cssNumber[t]?"":"px"),s=(oe.cssNumber[t]||"px"!==o&&+i)&&Nn.exec(oe.css(n.elem,t)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,oe.style(n.elem,t,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--u)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};oe.Animation=oe.extend(q,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],Dn[n]=Dn[n]||[],Dn[n].unshift(e)},prefilter:function(t,e){e?An.unshift(t):An.push(t)}}),oe.Tween=L,L.prototype={constructor:L,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var t=L.propHooks[this.prop];return t&&t.get?t.get(this):L.propHooks._default.get(this)},run:function(t){var e,n=L.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(F(e,!0),t,i,r)}}),oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(b).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=oe.isEmptyObject(t),o=oe.speed(e,n,i),s=function(){var e=q(this,oe.extend({},t),o);(r||me.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=oe.timers,s=me.get(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&_n.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(i),e=!1,o.splice(n,1));(e||!i)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=me.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=oe.timers,s=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.timers=[],oe.fx=L.prototype.init,oe.fx.tick=function(){var t,n=oe.timers,i=0;for(Sn=oe.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||oe.fx.stop(),Sn=e},oe.fx.timer=function(t){t()&&oe.timers.push(t)&&oe.fx.start()},oe.fx.interval=13,oe.fx.start=function(){jn||(jn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(jn),jn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fx.step={},oe.expr&&oe.expr.filters&&(oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length}),oe.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var n,i,r=this[0],o={top:0,left:0},s=r&&r.ownerDocument;return s?(n=s.documentElement,oe.contains(n,r)?(typeof r.getBoundingClientRect!==W&&(o=r.getBoundingClientRect()),i=M(s),{top:o.top+i.pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}):o):void 0},oe.offset={setOffset:function(t,e,n){var i,r,o,s,a,u,l,c=oe.css(t,"position"),h=oe(t),f={};"static"===c&&(t.style.position="relative"),a=h.offset(),o=oe.css(t,"top"),u=oe.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(u)||0),oe.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(f.top=e.top-a.top+s),null!=e.left&&(f.left=e.left-a.left+r),"using"in e?e.using.call(t,f):h.css(f)
}},oe.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===oe.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(i=t.offset()),i.top+=oe.css(t[0],"borderTopWidth",!0),i.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-oe.css(n,"marginTop",!0),left:e.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||X;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||X})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;oe.fn[n]=function(o){return oe.access(this,function(n,o,s){var a=M(n);return s===e?a?a[i]:n[o]:(a?a.scrollTo(r?t.pageXOffset:s,r?s:t.pageYOffset):n[o]=s,e)},n,o,arguments.length,null)}}),oe.each({Height:"height",Width:"width"},function(t,n){oe.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){oe.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return oe.access(this,function(n,i,r){var o;return oe.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):r===e?oe.css(n,i,a):oe.style(n,i,r,a)},n,s?r:e,s,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=oe:"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=oe)}(window),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,s=i.push,a=i.slice,u=i.concat,l=r.toString,c=r.hasOwnProperty,h=i.forEach,f=i.map,p=i.reduce,d=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,x=Array.isArray,w=Object.keys,C=o.bind,k=function(t){return t instanceof k?t:this instanceof k?(this._wrapped=t,void 0):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.5.2";var T=k.each=k.forEach=function(t,e,i){if(null!=t)if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s=k.keys(t),r=0,o=s.length;o>r;r++)if(e.call(i,t[s[r]],s[r],t)===n)return};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:f&&t.map===f?t.map(e,n):(T(t,function(t,r,o){i.push(e.call(n,t,r,o))}),i)};var $="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=k.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(T(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError($);return n},k.reduceRight=k.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return i&&(e=k.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=k.keys(t);o=s.length}if(T(t,function(a,u,l){u=s?s[--o]:--o,r?n=e.call(i,n,t[u],u,l):(n=t[u],r=!0)}),!r)throw new TypeError($);return n},k.find=k.detect=function(t,e,n){var i;return E(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(T(t,function(t,r,o){e.call(n,t,r,o)&&i.push(t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,i):(T(t,function(t,o,s){return(r=r&&e.call(i,t,o,s))?void 0:n}),!!r)};var E=k.some=k.any=function(t,e,i){e||(e=k.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(T(t,function(t,o,s){return r||(r=e.call(i,t,o,s))?n:void 0}),!!r)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):E(t,function(t){return t===e})},k.invoke=function(t,e){var n=a.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e,n){return k.isEmpty(e)?n?void 0:[]:k[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},k.findWhere=function(t,e){return k.where(t,e,!0)},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return T(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>i.computed&&(i={value:t,computed:s})}),i.value},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return T(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s<i.computed&&(i={value:t,computed:s})}),i.value},k.shuffle=function(t){var e,n=0,i=[];return T(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i},k.sample=function(t,e,n){return arguments.length<2||n?t[k.random(t.length-1)]:k.shuffle(t).slice(0,Math.max(0,e))};var S=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,n){var i=S(e);return k.pluck(k.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var j=function(t){return function(e,n,i){var r={},o=null==n?k.identity:S(n);return T(e,function(n,s){var a=o.call(i,n,s,e);t(r,a,n)}),r}};k.groupBy=j(function(t,e,n){(k.has(t,e)?t[e]:t[e]=[]).push(n)}),k.indexBy=j(function(t,e,n){t[e]=n}),k.countBy=j(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,i){n=null==n?k.identity:S(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},k.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var P=function(t,e,n){return e&&k.every(t,k.isArray)?u.apply(n,t):(T(t,function(t){k.isArray(t)||k.isArguments(t)?e?s.apply(n,t):P(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return P(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var r=n?k.map(t,n,i):t,o=[],s=[];return T(r,function(n,i){(e?i&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),o.push(t[i]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=u.apply(i,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o};var N=function(){};k.bind=function(t,e){var n,i;if(C&&t.bind===C)return C.apply(t,a.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));N.prototype=t.prototype;var r=new N;N.prototype=null;var o=t.apply(r,n.concat(a.call(arguments)));return Object(o)===o?o:r}},k.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},k.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return T(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e,n){var i,r,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:new Date,s=null,o=t.apply(i,r)};return function(){var l=new Date;a||n.leading!==!1||(a=l);var c=e-(l-a);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,a=l,o=t.apply(i,r)):s||n.trailing===!1||(s=setTimeout(u,c)),o}},k.debounce=function(t,e,n){var i,r,o,s,a;return function(){o=this,r=arguments,s=new Date;var u=function(){var l=new Date-s;e>l?i=setTimeout(u,e-l):(i=null,n||(a=t.apply(o,r)))},l=n&&!i;return i||(i=setTimeout(u,e)),l&&(a=t.apply(o,r)),a}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},k.pairs=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},k.invert=function(t){for(var e={},n=k.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return T(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=u.apply(i,a.call(arguments,1));return T(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=u.apply(i,a.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);return e},k.defaults=function(t){return T(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var _=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=l.call(t);if(r!=l.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var u=0,c=!0;if("[object Array]"==r){if(u=t.length,c=u==e.length)for(;u--&&(c=_(t[u],e[u],n,i)););}else{for(var h in t)if(k.has(t,h)&&(u++,!(c=k.has(e,h)&&_(t[h],e[h],n,i))))break;if(c){for(h in e)if(k.has(e,h)&&!u--)break;c=!u}}return n.pop(),i.pop(),c};k.isEqual=function(t,e){return _(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=x||function(t){return"[object Array]"==l.call(t)},k.isObject=function(t){return t===Object(t)},T(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=k.invert(A.escape);var D={escape:new RegExp("["+k.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(A.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(D[t],function(e){return A[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){T(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),L.call(this,n.apply(k,t))}})};var O=0;k.uniqueId=function(t){var e=++O+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||q).source,(n.interpolate||q).source,(n.evaluate||q).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,n,i,r,a){return s+=t.slice(o,a).replace(R,function(t){return"\\"+H[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(o){throw o.source=s,o}if(e)return i(e,k);var a=function(t){return i.call(this,t,k)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},k.chain=function(t){return k(t).chain()};var L=function(t){return this._chain?k(t).chain():t};k.mixin(k),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],L.call(this,n)}}),T(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){{var t,e=this,n=e.Backbone,i=[],r=(i.push,i.slice);i.splice}t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.1.0";var o=e._;o||"undefined"==typeof require||(o=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(t,e,n){if(!u(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var i=this,r=o.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,s,a,l,c,h,f;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:o.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=i=[],e||n)for(h=0,f=s.length;f>h;h++)r=s[h],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(e,n,this),(r||o.isEmpty(t._events))&&delete this._listeningTo[s];return this}},a=/\s+/,u=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(a.test(n)){for(var o=n.split(a),s=0,u=o.length;u>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},c={listenTo:"on",listenToOnce:"once"};o.each(c,function(t,e){s[e]=function(e,n,i){var r=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=o.uniqueId("l"));return r[s]=e,i||"object"!=typeof n||(i=this),e[t](n,i,this),this}}),s.bind=s.on,s.unbind=s.off,o.extend(t,s);var h=t.Model=function(t,e){var n=t||{};e||(e={}),this.cid=o.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=o.defaults({},n,o.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};o.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return o.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return o.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,s,a,u,l,c,h;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;s=n.unset,u=n.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=o.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)e=r[i],o.isEqual(h[i],e)||a.push(i),o.isEqual(c[i],e)?delete this.changed[i]:this.changed[i]=e,s?delete h[i]:h[i]=e;if(!u){a.length&&(this._pending=!0);for(var f=0,p=a.length;p>f;f++)this.trigger("change:"+a[f],this,h[a[f]],n)}if(l)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,o.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,o.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o.isEmpty(this.changed):o.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?o.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)o.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),e.trigger("sync",e,i,t),void 0):!1},H(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,r,s,a=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,n=o.extend({validate:!0},n),i&&!n.wait){if(!this.set(i,n))return!1}else if(!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=o.extend({},a,i)),void 0===n.parse&&(n.parse=!0);var u=this,l=n.success;return n.success=function(t){u.attributes=a;var e=u.parse(t,n);return n.wait&&(e=o.extend(i||{},e)),o.isObject(e)&&!u.set(e,n)?!1:(l&&l(u,t,n),u.trigger("sync",u,t,n),void 0)},H(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),s=this.sync(r,this,n),i&&n.wait&&(this.attributes=a),s},destroy:function(t){t=t?o.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(r){(t.wait||e.isNew())&&i(),n&&n(e,r,t),e.isNew()||e.trigger("sync",e,r,t)},this.isNew())return t.success(),!1;H(this,t);var r=this.sync("delete",this,t);return t.wait||i(),r},url:function(){var t=o.result(this,"urlRoot")||o.result(this.collection,"url")||q();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},o.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=o.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,o.extend(e,{validationError:n})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];o.each(f,function(t){h.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),o[t].apply(o,e)}});var p=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,o.extend({silent:!0},e))},d={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};o.extend(p.prototype,s,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,o.extend({merge:!1},e,g))},remove:function(t,e){var n=!o.isArray(t);t=n?[t]:o.clone(t),e||(e={});var i,r,s,a;for(i=0,r=t.length;r>i;i++)a=t[i]=this.get(t[i]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a));return n?t[0]:t},set:function(t,e){e=o.defaults({},e,d),e.parse&&(t=this.parse(t,e));var n=!o.isArray(t);t=n?t?[t]:[]:o.clone(t);var i,r,s,a,u,l,c,f=e.at,p=this.model,g=this.comparator&&null==f&&e.sort!==!1,m=o.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},x=e.add,w=e.merge,C=e.remove,k=!g&&x&&C?[]:!1;for(i=0,r=t.length;r>i;i++){if(u=t[i],s=u instanceof h?a=u:u[p.prototype.idAttribute],l=this.get(s))C&&(b[l.cid]=!0),w&&(u=u===a?a.attributes:u,e.parse&&(u=l.parse(u,e)),l.set(u,e),g&&!c&&l.hasChanged(m)&&(c=!0)),t[i]=l;else if(x){if(a=t[i]=this._prepareModel(u,e),!a)continue;v.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}k&&k.push(l||a)}if(C){for(i=0,r=this.length;r>i;++i)b[(a=this.models[i]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||k&&k.length)if(g&&(c=!0),this.length+=v.length,null!=f)for(i=0,r=v.length;r>i;i++)this.models.splice(f+i,0,v[i]);else{k&&(this.models.length=0);var T=k||v;for(i=0,r=T.length;r>i;i++)this.models.push(T[i])}if(c&&this.sort({silent:!0}),!e.silent){for(i=0,r=v.length;r>i;i++)(a=v[i]).trigger("add",a,this,e);(c||k&&k.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,o.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,o.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return r.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return o.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return o.invoke(this.models,"get",t)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?o.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(t,e,r){r.wait&&n.add(t,r),i&&i(t,e,r)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t.collection||(t.collection=this),t;e=e?o.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];o.each(m,function(t){p.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),o[t].apply(o,e)}});var v=["groupBy","countBy","sortBy"];o.each(v,function(t){p.prototype[t]=function(e,n){var i=o.isFunction(e)?e:function(t){return t.get(e)};return o[t](this.models,i,n)}});var y=t.View=function(t){this.cid=o.uniqueId("view"),t||(t={}),o.extend(this,o.pick(t,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];o.extend(y.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=o.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(o.isFunction(n)||(n=this[t[e]]),n){var i=e.match(b),r=i[1],s=i[2];n=o.bind(n,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,n):this.$el.on(r,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var e=o.extend({},o.result(this,"attributes"));this.id&&(e.id=o.result(this,"id")),this.className&&(e.class=o.result(this,"className"));var n=t.$("<"+o.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var r=C[e];o.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:r,dataType:"json"};if(i.url||(s.url=o.result(n,"url")||q()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",i.emulateJSON&&(s.data._method=r);var a=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"===s.type&&w&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=i.xhr=t.ajax(o.extend(s,i));return n.trigger("request",n,u,i),u};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,E=/\*\w+/g,S=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(k.prototype,s,{initialize:function(){},route:function(e,n,i){o.isRegExp(e)||(e=this._routeToRegExp(e)),o.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return t.history.route(e,function(o){var s=r._extractParameters(e,o);i&&i.apply(r,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),t.history.trigger("route",r,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var t,e=o.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(S,"\\$&").replace(T,"(?:$1)?").replace($,function(t,e){return e?t:"([^/]+)"}).replace(E,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return o.map(n,function(t){return t?decodeURIComponent(t):null})}});var j=t.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,_=/msie [\w.]+/,A=/\/$/,D=/[?#].*$/;j.started=!1,o.extend(j.prototype,s,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(A,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(P,"")},start:function(e){if(j.started)throw new Error("Backbone.history has already been started");j.started=!0,this.options=o.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=_.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;
var s=this.location,a=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&s.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),j.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),o.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!j.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(D,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),t.history=new j;var O=function(t,e){var n,i=this;n=t&&o.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},o.extend(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&o.extend(n.prototype,t),n.__super__=i.prototype,n};h.extend=p.extend=k.extend=y.extend=j.extend=O;var q=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(this),!function(t){t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,r=t(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),i=t(o),e&&e.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("button"),o="object"==typeof n&&n;r||i.data("button",r=new e(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var n=this.getActiveIndex(),i=this;if(!(e>this.$items.length-1||0>e))return this.sliding?this.$element.one("slid",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,n){var i,r=this.$element.find(".item.active"),o=n||r[e](),s=this.interval,a="next"==e?"left":"right",u="next"==e?"first":"last",l=this;if(this.sliding=!0,s&&this.pause(),o=o.length?o:this.$element.find(".item")[u](),i=t.Event("slide",{relatedTarget:o[0],direction:a}),!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,r.addClass(a),o.addClass(a),this.$element.one(t.support.transition.end,function(){o.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("carousel"),o=t.extend({},t.fn.carousel.defaults,"object"==typeof n&&n),s="string"==typeof n?n:o.slide;r||i.data("carousel",r=new e(this,o)),"number"==typeof n?r.to(n):s?r[s]():o.interval&&r.pause().cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i,r=t(this),o=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=t.extend({},o.data(),r.data());o.carousel(s),(i=r.attr("data-slide-to"))&&o.data("carousel").pause().to(i).cycle(),e.preventDefault()})}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,i,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var r=this,o=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("collapse"),o=t.extend({},t.fn.collapse.defaults,i.data(),"object"==typeof n&&n);r||i.data("collapse",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=t(r).data("collapse")?"toggle":i.data();i[t(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(r).collapse(o)})}(window.jQuery),!function(t){function e(){t(".dropdown-backdrop").remove(),t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&t(i),n&&n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",r=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,o=t(this);if(!o.is(".disabled, :disabled"))return i=n(o),r=i.hasClass("open"),e(),r||("ontouchstart"in document.documentElement&&t('<div class="dropdown-backdrop"/>').insertBefore(t(this)).on("click",e),i.toggleClass("open")),o.focus(),!1},keydown:function(e){var r,o,s,a,u;if(/(38|40|27)/.test(e.keyCode)&&(r=t(this),e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled"))){if(s=n(r),a=s.hasClass("open"),!a||a&&27==e.keyCode)return 27==e.which&&s.find(i).focus(),r.click();o=t("[role=menu] li:not(.divider):visible a",s),o.length&&(u=o.index(o.filter(":focus")),38==e.keyCode&&u>0&&u--,40==e.keyCode&&u<o.length-1&&u++,~u||(u=0),o.eq(u).focus())}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),!function(t){var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]!==t.target&&!e.$element.has(t.target).length&&e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),r=i.data("modal"),o=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new e(this,o)),"string"==typeof n?r[n]():o.show&&r.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(o).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,o,s,a,u;for(this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!0,s=this.options.trigger.split(" "),u=s.length;u--;)a=s[u],"click"==a?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=a&&(r="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var n,i=t.fn[this.type].defaults,r={};return this._options&&t.each(this._options,function(t,e){i[t]!=e&&(r[t]=e)},this),n=t(e.currentTarget)[this.type](r).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var e,n,i,r,o,s,a=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),n=this.getPosition(),i=e[0].offsetWidth,r=e[0].offsetHeight,o){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":s={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":s={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":s={top:n.top+n.height/2-r/2,left:n.left+n.width}}this.applyPlacement(s,o),this.$element.trigger("shown")}},applyPlacement:function(t,e){var n,i,r,o,s=this.tip(),a=s[0].offsetWidth,u=s[0].offsetHeight;s.offset(t).addClass(e).addClass("in"),n=s[0].offsetWidth,i=s[0].offsetHeight,"top"==e&&i!=u&&(t.top=t.top+u-i,o=!0),"bottom"==e||"top"==e?(r=0,t.left<0&&(r=-2*t.left,t.left=0,s.offset(t),n=s[0].offsetWidth,i=s[0].offsetHeight),this.replaceArrow(r-a+n,n,"left")):this.replaceArrow(i-u,i,"top"),o&&s.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("tooltip"),o="object"==typeof n&&n;r||i.data("tooltip",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),!function(t){var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=("function"==typeof n.content?n.content.call(e[0]):n.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("popover"),o="object"==typeof n&&n;r||i.data("popover",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),!function(t){function e(e,n){var i,r=t.proxy(this.process,this),o=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,n),this.$scrollElement=o.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(i=t(e).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,n=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),r=/^#\w/.test(i)&&t(i);return r&&r.length&&[[r.position().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(e>=i)return s!=(t=o.last()[0])&&this.activate(t);for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(o[t])},activate:function(e){var n,i;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("scrollspy"),o="object"==typeof n&&n;r||i.data("scrollspy",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),!function(t){var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,r=this.element,o=r.closest("ul:not(.dropdown-menu)"),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=o.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),r.trigger(i),i.isDefaultPrevented()||(n=t(s),this.activate(r.parent("li"),o),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),s=i&&t.support.transition&&o.hasClass("fade");s?o.one(t.support.transition.end,r):r(),o.removeClass("in")}};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("tab");r||i.data("tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),!function(t){var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):r.push(e):n.push(e);return n.concat(i,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),r=i.data("typeahead"),o="object"==typeof n&&n;r||i.data("typeahead",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),!function(t){var e=function(e,n){this.options=t.extend({},t.fn.affix.defaults,n),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.bottom,a=o.top,u="affix affix-top affix-bottom";"object"!=typeof o&&(s=a=o),"function"==typeof a&&(a=o.top()),"function"==typeof s&&(s=o.bottom()),e=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=s&&r.top+this.$element.height()>=n-s?"bottom":null!=a&&a>=i?"top":!1,this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?r.top-i:null,this.$element.removeClass(u).addClass("affix"+(e?"-"+e:"")))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("affix"),o="object"==typeof n&&n;r||i.data("affix",r=new e(this,o)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),!function(t){if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var e=Backbone.PageableCollection,n=Backbone.PageableCollection=t(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=e,n}}}(function(t,e){function n(e,n){if(!t.isNumber(e)||t.isNaN(e)||!t.isFinite(e)||~~e!==e)throw new TypeError("`"+n+"` must be a finite integer");return e}function i(t){for(var e,n,i,r,o={},s=decodeURIComponent,a=t.split("&"),u=0,l=a.length;l>u;u++){var c=a[u];e=c.split("="),n=e[0],i=e[1]||!0,n=s(n),r=o[n],p(r)?r.push(i):o[n]=r?[r,i]:i}return o}var r=t.extend,o=t.omit,s=t.clone,a=t.each,u=t.pick,l=t.contains,c=t.isEmpty,h=t.pairs,f=t.invert,p=t.isArray,d=t.isFunction,g=t.isObject,m=t.keys,v=t.isUndefined,y=t.result,b=Math.ceil,x=Math.floor,w=Math.max,C=e.Collection.prototype,k=/[\s'"]/g,T=/[<>\s'"]/g,$=e.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(t,n){e.Collection.apply(this,arguments),n=n||{};var i=this.mode=n.mode||this.mode||E.mode,o=r({},E.queryParams,this.queryParams,n.queryParams||{});o.directions=r({},E.queryParams.directions,this.queryParams.directions,o.directions||{}),this.queryParams=o;var a=this.state=r({},E.state,this.state,n.state||{});a.currentPage=null==a.currentPage?a.firstPage:a.currentPage,p(t)||(t=t?[t]:[]),"server"==i||null!=a.totalRecords||c(t)||(a.totalRecords=t.length),this.switchMode(i,r({fetch:!1,resetState:!1,models:t},n));
var u=n.comparator;if(a.sortKey&&!u&&this.setSorting(a.sortKey,a.order,n),"server"!=i){var l=this.fullCollection;u&&n.full&&(delete this.comparator,l.comparator=u),n.full&&l.sort(),t&&!c(t)&&(this.getPage(a.currentPage),t.splice.apply(t,[0,t.length].concat(this.models)))}this._initState=s(this.state)},_makeFullCollection:function(t,n){var i,r,o,s=["url","model","sync","comparator"],a=this.constructor.prototype,u={};for(i=0,r=s.length;r>i;i++)o=s[i],v(a[o])||(u[o]=a[o]);var l=new(e.Collection.extend(u))(t,n);for(i=0,r=s.length;r>i;i++)o=s[i],this[o]!==a[o]&&(l[o]=this[o]);return l},_makeCollectionEventHandler:function(t,e){return function(n,i,o,u){var l=t._handlers;a(m(l),function(n){var i=l[n];t.off(n,i),e.off(n,i)});var c=s(t.state),h=c.firstPage,f=0===h?c.currentPage:c.currentPage-1,p=c.pageSize,d=f*p,g=d+p;if("add"==n){var y,x,w,C,u=u||{};if(o==e)x=e.indexOf(i),x>=d&&g>x&&(C=t,y=w=x-d);else{y=t.indexOf(i),x=d+y,C=e;var w=v(u.at)?x:u.at+d}if(++c.totalRecords,t.state=t._checkState(c),C){C.add(i,r({},u||{},{at:w}));var k=y>=p?i:!v(u.at)&&g>w&&t.length>p?t.at(p):null;if(k){var T=o._events.add||[],$={onAdd:!0};if(T.length){var E=T[T.length-1],S=E.callback;E.callback=function(){try{S.apply(this,arguments),t.remove(k,$)}finally{E.callback=S}}}else t.remove(k,$)}}}if("remove"==n)if(u.onAdd)delete u.onAdd;else{if(--c.totalRecords){var j=c.totalPages=b(c.totalRecords/p);c.lastPage=0===h?j-1:j,c.currentPage>j&&(c.currentPage=c.lastPage)}else c.totalRecords=null,c.totalPages=null;t.state=t._checkState(c);var P,N=u.index;o==t?((P=e.at(g))&&t.push(P),e.remove(i)):N>=d&&g>N&&(t.remove(i),P=e.at(f*(p+N)),P&&t.push(P))}if("reset"==n)if(u=o,o=i,o===t&&null==u.from&&null==u.to){var _=e.models.slice(0,d),A=e.models.slice(d+t.models.length);e.reset(_.concat(t.models).concat(A),u)}else o===e&&((c.totalRecords=e.models.length)||(c.totalRecords=null,c.totalPages=null),"client"==t.mode&&(c.lastPage=c.currentPage=c.firstPage),t.state=t._checkState(c),t.reset(e.models.slice(d,g),r({},u,{parse:!1})));"sort"==n&&(u=o,o=i,o===e&&t.reset(e.models.slice(d,g),r({},u,{parse:!1}))),a(m(l),function(n){var i=l[n];a([t,e],function(t){t.on(n,i);var e=t._events[n]||[];e.unshift(e.pop())})})}},_checkState:function(t){var e=this.mode,i=this.links,r=t.totalRecords,o=t.pageSize,s=t.currentPage,a=t.firstPage,u=t.totalPages;if(null!=r&&null!=o&&null!=s&&null!=a&&("infinite"==e?i:!0)){if(r=n(r,"totalRecords"),o=n(o,"pageSize"),s=n(s,"currentPage"),a=n(a,"firstPage"),1>o)throw new RangeError("`pageSize` must be >= 1");if(u=t.totalPages=b(r/o),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(t.lastPage=0===a?w(0,u-1):u,"infinite"==e){if(!i[s+""])throw new RangeError("No link found for page "+s)}else if(a>s||u>0&&(a?s>u:s>=u))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?">":">=")+" totalPages if "+a+"-based. Got "+s+".")}return t},setPageSize:function(t,e){return t=n(t,"pageSize"),e=e||{},this.state=this._checkState(r({},this.state,{pageSize:t,totalPages:b(this.state.totalRecords/t)})),this.getPage(this.state.currentPage,e)},switchMode:function(e,n){if(!l(["server","client","infinite"],e))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');n=n||{fetch:!0,resetState:!0};var i=this.state=n.resetState?s(this._initState):this._checkState(r({},this.state));this.mode=e;var u,c=this,h=this.fullCollection,f=this._handlers=this._handlers||{};if("server"==e||h)"server"==e&&h&&(a(m(f),function(t){u=f[t],c.off(t,u),h.off(t,u)}),delete this._handlers,this._fullComparator=h.comparator,delete this.fullCollection);else{h=this._makeFullCollection(n.models||[]),h.pageableCollection=this,this.fullCollection=h;var p=this._makeCollectionEventHandler(this,h);a(["add","remove","reset","sort"],function(e){f[e]=u=t.bind(p,{},e),c.on(e,u),h.on(e,u)}),h.comparator=this._fullComparator}if("infinite"==e)for(var d=this.links={},g=i.firstPage,v=b(i.totalRecords/i.pageSize),y=0===g?w(0,v-1):v||g,x=i.firstPage;y>=x;x++)d[x]=this.url;else this.links&&delete this.links;return n.fetch?this.fetch(o(n,"fetch","resetState")):this},hasPrevious:function(){var t=this.state,e=t.currentPage;return"infinite"!=this.mode?e>t.firstPage:!!this.links[e-1]},hasNext:function(){var t=this.state,e=this.state.currentPage;return"infinite"!=this.mode?e<t.lastPage:!!this.links[e+1]},getFirstPage:function(t){return this.getPage("first",t)},getPreviousPage:function(t){return this.getPage("prev",t)},getNextPage:function(t){return this.getPage("next",t)},getLastPage:function(t){return this.getPage("last",t)},getPage:function(t,e){var i=this.mode,s=this.fullCollection;e=e||{fetch:!1};var a=this.state,u=a.firstPage,l=a.currentPage,h=a.lastPage,f=a.pageSize,p=t;switch(t){case"first":p=u;break;case"prev":p=l-1;break;case"next":p=l+1;break;case"last":p=h;break;default:p=n(t,"index")}this.state=this._checkState(r({},a,{currentPage:p})),e.from=l,e.to=p;var d=(0===u?p:p-1)*f,g=s&&s.length?s.models.slice(d,d+f):[];return"client"!=i&&("infinite"!=i||c(g))||e.fetch?("infinite"==i&&(e.url=this.links[p]),this.fetch(o(e,"fetch"))):this.reset(g,o(e,"fetch"))},getPageByOffset:function(t,e){if(0>t)throw new RangeError("`offset must be > 0`");t=n(t);var i=x(t/this.state.pageSize);return 0!==this.state.firstPage&&i++,i>this.state.lastPage&&(i=this.state.lastPage),this.getPage(i,e)},sync:function(t,n,i){var o=this;if("infinite"==o.mode){var s=i.success,a=o.state.currentPage;i.success=function(t,e,n){var u=o.links,l=o.parseLinks(t,r({xhr:n},i));l.first&&(u[o.state.firstPage]=l.first),l.prev&&(u[a-1]=l.prev),l.next&&(u[a+1]=l.next),s&&s(t,e,n)}}return(C.sync||e.sync).call(o,t,n,i)},parseLinks:function(t,e){var n={},r=e.xhr.getResponseHeader("Link");if(r){var o=["first","prev","previous","next","last"];a(r.split(","),function(t){var e=t.split(";"),i=e[0].replace(T,""),r=e.slice(1);a(r,function(t){var e=t.split("="),r=e[0].replace(k,""),s=e[1].replace(k,"");"rel"==r&&l(o,s)&&("previous"==s?n.prev=i:n[s]=i)})});var u,c,h=n.last||"";if(c=(u=h.indexOf("?"))?h.slice(u+1):""){var f=i(c),p=s(this.state),d=this.queryParams,g=p.pageSize,m=1*f[d.totalRecords],v=1*f[d.currentPage],y=f[d.totalPages];m||(v?m=(0===p.firstPage?v+1:v)*g:y&&(m=y*g)),m&&(p.totalRecords=m),this.state=this._checkState(p)}}return delete n.last,n},parse:function(t){var e=this.parseState(t,s(this.queryParams),s(this.state));return e&&(this.state=this._checkState(r({},this.state,e))),this.parseRecords(t)},parseState:function(e,n,i){if(e&&2===e.length&&g(e[0])&&p(e[1])){var r=s(i),u=e[0];return a(h(o(n,"directions")),function(e){var n=e[0],i=e[1],o=u[i];v(o)||t.isNull(o)||(r[n]=u[i])}),u.order&&(r.order=1*f(n.directions)[u.order]),r}},parseRecords:function(t){return t&&2===t.length&&g(t[0])&&p(t[1])?t[1]:t},fetch:function(t){t=t||{};var e=this._checkState(this.state),n=this.mode;"infinite"!=n||t.url||(t.url=this.links[e.currentPage]);var a=t.data||{},l=y(t,"url")||y(this,"url")||"",c=l.indexOf("?");-1!=c&&(r(a,i(l.slice(c+1))),l=l.slice(0,c)),t.url=l,t.data=a;var f,p,g,b,x="client"==this.mode?u(this.queryParams,"sortKey","order"):o(u(this.queryParams,m(E.queryParams)),"directions"),w=h(x),k=s(this);for(f=0;f<w.length;f++)p=w[f],g=p[0],b=p[1],b=d(b)?b.call(k):b,null!=e[g]&&null!=b&&(a[b]=e[g]);e.sortKey&&e.order?a[x.order]=this.queryParams.directions[e.order+""]:e.sortKey||delete a[x.order];var T=h(o(this.queryParams,m(E.queryParams)));for(f=0;f<T.length;f++)p=T[f],b=p[1],b=d(b)?b.call(k):b,a[p[0]]=b;var $=this.fullCollection,S=this.links;if("server"!=n){var j=this,P=t.success;return t.success=function(i,o,s){s=s||{},v(t.silent)?delete s.silent:s.silent=t.silent;var a=i.models,u=e.currentPage;if("client"==n)$.reset(a,s);else if(S[u]){var l=e.pageSize,c=(0===e.firstPage?u:u-1)*l,h=$.models,f=h.slice(0,c),p=h.slice(c+l);h=f.concat(a).concat(p);var d=$.set||$.update;d.call($,h,r({silent:!0},s)),$.trigger("reset",$,s)}else $.add(a,r({at:$.length},s));P&&P(i,o,s)},C.fetch.call(j,r({},t,{silent:!0}))}return C.fetch.call(this,t)},_makeComparator:function(t,e){var n=this.state;return t=t||n.sortKey,e=e||n.order,t&&e?function(n,i){var r,o=n.get(t),s=i.get(t);return 1===e&&(r=o,o=s,s=r),o===s?0:s>o?-1:1}:void 0},setSorting:function(t,e,n){var i=this.state;i.sortKey=t,i.order=e=e||i.order;var o=this.fullCollection,s=!1,a=!1;t||(s=a=!0);var u=this.mode;n=r({side:"client"==u?u:"server",full:!0},n);var l=this._makeComparator(t,e),c=n.full,h=n.side;return"client"==h?c?(o&&(o.comparator=l),s=!0):(this.comparator=l,a=!0):"server"!=h||c||(this.comparator=l),s&&delete this.comparator,a&&o&&delete o.comparator,this}}),E=$.prototype;return $}),define("lib/common");define("lib/backgrid",["lib/common"],function(){"use strict";!function(e,t,i,n){function r(e){return String.fromCharCode(e.charCodeAt(0)-32)+e.slice(1)}function o(e,t,i){var n=t-(e+"").length;n=0>n?0:n;for(var r="",o=0;n>o;o++)r+=i;return r+e}var s=e.Backgrid={VERSION:"0.2.6",Extension:{},requireOptions:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(i.isUndefined(e[r]))throw new TypeError("'"+r+"' is required")}},resolveNameToClass:function(e,t){if(i.isString(e)){var n=i.map(e.split("-"),function(e){return r(e)}).join("")+t,o=s[n]||s.Extension[n];if(i.isUndefined(o))throw new ReferenceError("Class '"+n+"' not found");return o}return e}};i.extend(s,n.Events);var l=s.Command=function(e){i.extend(this,{altKey:!!e.altKey,char:e.char,charCode:e.charCode,ctrlKey:!!e.ctrlKey,key:e.key,keyCode:e.keyCode,locale:e.locale,location:e.location,metaKey:!!e.metaKey,repeat:!!e.repeat,shiftKey:!!e.shiftKey,which:e.which})};i.extend(l.prototype,{moveUp:function(){return 38==this.keyCode},moveDown:function(){return 40===this.keyCode},moveLeft:function(){return this.shiftKey&&9===this.keyCode},moveRight:function(){return!this.shiftKey&&9===this.keyCode},save:function(){return 13===this.keyCode},cancel:function(){return 27===this.keyCode},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});var a=s.CellFormatter=function(){};i.extend(a.prototype,{fromRaw:function(e){return e},toRaw:function(e){return e}});var c=s.NumberFormatter=function(e){if(e=e?i.clone(e):{},i.extend(this,this.defaults,e),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};c.prototype=new a,i.extend(c.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(e){if(i.isNull(e)||i.isUndefined(e))return"";e=e.toFixed(~~this.decimals);var t=e.split("."),n=t[0],r=t[1]?(this.decimalSeparator||".")+t[1]:"";return n.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+r},toRaw:function(e){for(var t="",n=e.trim().split(this.orderSeparator),r=0;r<n.length;r++)t+=n[r];var o=t.split(this.decimalSeparator);t="";for(var r=0;r<o.length;r++)t=t+o[r]+".";"."===t[t.length-1]&&(t=t.slice(0,t.length-1));var s=1*(1*t).toFixed(~~this.decimals);return i.isNumber(s)&&!i.isNaN(s)?s:void 0}});var h=s.DatetimeFormatter=function(e){if(e=e?i.clone(e):{},i.extend(this,this.defaults,e),!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true")};h.prototype=new a,i.extend(h.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(e,t){var n,r=null;if(i.isNumber(e)){var s=new Date(e);n=o(s.getUTCFullYear(),4,0)+"-"+o(s.getUTCMonth()+1,2,0)+"-"+o(s.getUTCDate(),2,0),r=o(s.getUTCHours(),2,0)+":"+o(s.getUTCMinutes(),2,0)+":"+o(s.getUTCSeconds(),2,0)}else{e=e.trim();var l=e.split(this.ISO_SPLITTER_RE)||[];n=this.DATE_RE.test(l[0])?l[0]:"",r=n&&l[1]?l[1]:this.TIME_RE.test(l[0])?l[0]:""}var a=this.DATE_RE.exec(n)||[],c=this.TIME_RE.exec(r)||[];if(t){if(this.includeDate&&i.isUndefined(a[0]))return;if(this.includeTime&&i.isUndefined(c[0]))return;if(!this.includeDate&&n)return;if(!this.includeTime&&r)return}var s=new Date(Date.UTC(1*a[1]||0,1*a[2]-1||0,1*a[3]||0,1*c[1]||null,1*c[2]||null,1*c[3]||null,1*c[5]||null)),h="";return this.includeDate&&(h=o(s.getUTCFullYear(),4,0)+"-"+o(s.getUTCMonth()+1,2,0)+"-"+o(s.getUTCDate(),2,0)),this.includeTime&&(h=h+(this.includeDate?"T":"")+o(s.getUTCHours(),2,0)+":"+o(s.getUTCMinutes(),2,0)+":"+o(s.getUTCSeconds(),2,0),this.includeMilli&&(h=h+"."+o(s.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(h+="Z"),h},fromRaw:function(e){return i.isNull(e)||i.isUndefined(e)?"":this._convert(e)},toRaw:function(e){return this._convert(e,!0)}});var d=s.StringFormatter=function(){};d.prototype=new a,i.extend(d.prototype,{fromRaw:function(e){return i.isUndefined(e)||i.isNull(e)?"":e+""}});var u=s.EmailFormatter=function(){};u.prototype=new a,i.extend(u.prototype,{toRaw:function(e){var t=e.trim().split("@");return 2===t.length&&i.all(t)?e:void 0}});var m=s.SelectFormatter=function(){};m.prototype=new a,i.extend(m.prototype,{fromRaw:function(e){return i.isArray(e)?e:null!=e?[e]:[]}});var p=s.CellEditor=n.View.extend({initialize:function(e){s.requireOptions(e,["formatter","column","model"]),this.formatter=e.formatter,this.column=e.column,this.column instanceof C||(this.column=new C(this.column)),this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(e,t){return(null==t||t.get("name")==this.column.get("name"))&&this.$el.focus(),this}}),f=s.InputCellEditor=p.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(e){p.prototype.initialize.apply(this,arguments),e.placeholder&&this.$el.attr("placeholder",e.placeholder)},render:function(){return this.$el.val(this.formatter.fromRaw(this.model.get(this.column.get("name")))),this},saveOrCancel:function(e){var t=this.formatter,n=this.model,r=this.column,o=new l(e),s="blur"===e.type;if(o.moveUp()||o.moveDown()||o.moveLeft()||o.moveRight()||o.save()||s){e.preventDefault(),e.stopPropagation();var a=this.$el.val(),c=t.toRaw(a);i.isUndefined(c)?n.trigger("backgrid:error",n,r,a):(n.set(r.get("name"),c),n.trigger("backgrid:edited",n,r,o))}else o.cancel()&&(e.stopPropagation(),n.trigger("backgrid:edited",n,r,o))},postRender:function(e,t){if(null==t||t.get("name")==this.column.get("name"))if("right"===this.$el.css("text-align")){var i=this.$el.val();this.$el.focus().val(null).val(i)}else this.$el.focus();return this}}),v=s.Cell=n.View.extend({tagName:"td",formatter:new a,editor:f,events:{click:"enterEditMode"},initialize:function(e){s.requireOptions(e,["model","column"]),this.column=e.column,this.column instanceof C||(this.column=new C(this.column)),this.formatter=s.resolveNameToClass(this.column.get("formatter")||this.formatter,"Formatter"),this.editor=s.resolveNameToClass(this.editor,"CellEditor"),this.listenTo(this.model,"change:"+this.column.get("name"),function(){this.$el.hasClass("editor")||this.render()}),this.listenTo(this.model,"backgrid:error",this.renderError)},render:function(){return this.$el.empty(),this.$el.text(this.formatter.fromRaw(this.model.get(this.column.get("name")))),this.delegateEvents(),this},enterEditMode:function(){var e=this.model,t=this.column;t.get("editable")&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),e.trigger("backgrid:edit",e,t,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),e.trigger("backgrid:editing",e,t,this,this.currentEditor))},renderError:function(e,t){(null==t||t.get("name")==this.column.get("name"))&&this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error"),this.currentEditor.remove(),this.stopListening(this.currentEditor),delete this.currentEditor,this.$el.removeClass("editor"),this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this,arguments),delete this.currentEditor),n.View.prototype.remove.apply(this,arguments)}}),g=s.StringCell=v.extend({className:"string-cell",formatter:new d});s.UriCell=v.extend({className:"uri-cell",render:function(){this.$el.empty();var e=this.formatter.fromRaw(this.model.get(this.column.get("name")));return this.$el.append(t("<a>",{tabIndex:-1,href:e,title:e,target:"_blank"}).text(e)),this.delegateEvents(),this}}),s.EmailCell=g.extend({className:"email-cell",formatter:new u,render:function(){this.$el.empty();var e=this.formatter.fromRaw(this.model.get(this.column.get("name")));return this.$el.append(t("<a>",{tabIndex:-1,href:"mailto:"+e,title:e}).text(e)),this.delegateEvents(),this}});var w=s.NumberCell=v.extend({className:"number-cell",decimals:c.prototype.defaults.decimals,decimalSeparator:c.prototype.defaults.decimalSeparator,orderSeparator:c.prototype.defaults.orderSeparator,formatter:c,initialize:function(){v.prototype.initialize.apply(this,arguments),this.formatter=new this.formatter({decimals:this.decimals,decimalSeparator:this.decimalSeparator,orderSeparator:this.orderSeparator})}});s.IntegerCell=w.extend({className:"integer-cell",decimals:0});var y=s.DatetimeCell=v.extend({className:"datetime-cell",includeDate:h.prototype.defaults.includeDate,includeTime:h.prototype.defaults.includeTime,includeMilli:h.prototype.defaults.includeMilli,formatter:h,initialize:function(){v.prototype.initialize.apply(this,arguments),this.formatter=new this.formatter({includeDate:this.includeDate,includeTime:this.includeTime,includeMilli:this.includeMilli});var e=this.includeDate?"YYYY-MM-DD":"";e+=this.includeDate&&this.includeTime?"T":"",e+=this.includeTime?"HH:mm:ss":"",e+=this.includeTime&&this.includeMilli?".SSS":"",this.editor=this.editor.extend({attributes:i.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:e})})}});s.DateCell=y.extend({className:"date-cell",includeTime:!1}),s.TimeCell=y.extend({className:"time-cell",includeDate:!1});var b=s.BooleanCellEditor=p.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var e=this.formatter.fromRaw(this.model.get(this.column.get("name")));return this.$el.prop("checked",e),this},enterOrExitEditMode:function(e){if(!this.mouseDown){var t=this.model;t.trigger("backgrid:edited",t,this.column,new l(e))}},saveOrCancel:function(e){var t=this.model,i=this.column,n=this.formatter,r=new l(e);if(r.passThru()&&"change"!=e.type)return!0;r.cancel()&&(e.stopPropagation(),t.trigger("backgrid:edited",t,i,r));var o=this.$el;if(r.save()||r.moveLeft()||r.moveRight()||r.moveUp()||r.moveDown()){e.preventDefault(),e.stopPropagation();var s=n.toRaw(o.prop("checked"));t.set(i.get("name"),s),t.trigger("backgrid:edited",t,i,r)}else if("change"==e.type){var s=n.toRaw(o.prop("checked"));t.set(i.get("name"),s),o.focus()}}});s.BooleanCell=v.extend({className:"boolean-cell",editor:b,events:{click:"enterEditMode"},render:function(){return this.$el.empty(),this.$el.append(t("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(this.model.get(this.column.get("name")))})),this.delegateEvents(),this}});var x=s.SelectCellEditor=p.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:i.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %></option>'),setOptionValues:function(e){this.optionValues=e},setMultiple:function(e){this.multiple=e,this.$el.prop("multiple",e)},_renderOptions:function(e,t){for(var i="",n=0;n<e.length;n++)i+=this.template({text:e[n][0],value:e[n][1],selected:t.indexOf(e[n][1])>-1});return i},render:function(){this.$el.empty();var e=i.result(this,"optionValues"),n=this.formatter.fromRaw(this.model.get(this.column.get("name")));if(!i.isArray(e))throw TypeError("optionValues must be an array");for(var r=null,o=null,r=null,s=null,l=null,a=0;a<e.length;a++){var r=e[a];if(i.isArray(r))o=r[0],r=r[1],this.$el.append(this.template({text:o,value:r,selected:n.indexOf(r)>-1}));else{if(!i.isObject(r))throw TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");s=r.name,l=t("<optgroup></optgroup>",{label:s}),l.append(this._renderOptions(r.values,n)),this.$el.append(l)}}return this.delegateEvents(),this},save:function(e){var t=this.model,i=this.column;t.set(i.get("name"),this.formatter.toRaw(this.$el.val())),t.trigger("backgrid:edited",t,i,new l(e))},close:function(e){var t=this.model,i=this.column,n=new l(e);n.cancel()?(e.stopPropagation(),t.trigger("backgrid:edited",t,i,new l(e))):(n.save()||n.moveLeft()||n.moveRight()||n.moveUp()||n.moveDown()||"blur"==e.type)&&(e.preventDefault(),e.stopPropagation(),"blur"==e.type&&1===this.$el.find("option").length&&t.set(i.get("name"),this.formatter.toRaw(this.$el.val())),t.trigger("backgrid:edited",t,i,new l(e)))}});s.SelectCell=v.extend({className:"select-cell",editor:x,multiple:!1,formatter:new m,optionValues:void 0,delimiter:", ",initialize:function(){v.prototype.initialize.apply(this,arguments),s.requireOptions(this,["optionValues"]),this.listenTo(this.model,"backgrid:edit",function(e,t,i,n){t.get("name")==this.column.get("name")&&(n.setOptionValues(this.optionValues),n.setMultiple(this.multiple))})},render:function(){this.$el.empty();var e=this.optionValues,t=this.formatter.fromRaw(this.model.get(this.column.get("name"))),n=[];try{if(!i.isArray(e)||i.isEmpty(e))throw new TypeError;for(var r=0;r<t.length;r++)for(var o=t[r],s=0;s<e.length;s++){var l=e[s];if(i.isArray(l)){var a=l[0],l=l[1];l==o&&n.push(a)}else{if(!i.isObject(l))throw new TypeError;for(var c=l.values,h=0;h<c.length;h++){var d=c[h];d[1]==o&&n.push(d[0])}}}this.$el.append(n.join(this.delimiter))}catch(u){if(u instanceof TypeError)throw TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");throw u}return this.delegateEvents(),this}});var C=s.Column=n.Model.extend({defaults:{name:void 0,label:void 0,sortable:!0,editable:!0,renderable:!0,formatter:void 0,cell:void 0,headerCell:void 0},initialize:function(e){s.requireOptions(e,["cell","name"]),this.has("label")||this.set({label:this.get("name")},{silent:!0});var t=s.resolveNameToClass(this.get("headerCell"),"HeaderCell"),i=s.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:i,headerCell:t},{silent:!0})}}),E=s.Columns=n.Collection.extend({model:C}),T=s.Row=n.View.extend({tagName:"tr",requiredOptions:["columns","model"],initialize:function(e){s.requireOptions(e,this.requiredOptions);var t=this.columns=e.columns;t instanceof n.Collection||(t=this.columns=new E(t));for(var i=this.cells=[],r=0;r<t.length;r++)i.push(this.makeCell(t.at(r),e));this.listenTo(t,"change:renderable",function(e,t){for(var n=0;n<i.length;n++){var r=i[n];r.column.get("name")==e.get("name")&&(t?r.$el.show():r.$el.hide())}}),this.listenTo(t,"add",function(t,n){var r=n.indexOf(t),o=this.makeCell(t,e);i.splice(r,0,o),o.column.get("renderable")||o.$el.hide();var s=this.$el;0===r?s.prepend(o.render().$el):r===n.length-1?s.append(o.render().$el):s.children().eq(r).before(o.render().$el)}),this.listenTo(t,"remove",function(e,t,n){i[n.index].remove(),i.splice(n.index,1)})},makeCell:function(e){return new(e.get("cell"))({column:e,model:this.model})},render:function(){this.$el.empty();for(var e=document.createDocumentFragment(),t=0;t<this.cells.length;t++){var i=this.cells[t];e.appendChild(i.render().el),i.column.get("renderable")||i.$el.hide()}return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.cells.length;e++){var t=this.cells[e];t.remove.apply(t,arguments)}return n.View.prototype.remove.apply(this,arguments)}}),k=s.EmptyRow=n.View.extend({tagName:"tr",emptyText:null,initialize:function(e){s.requireOptions(e,["emptyText","columns"]),this.emptyText=e.emptyText,this.columns=e.columns},render:function(){this.$el.empty();var e=document.createElement("td");return e.setAttribute("colspan",this.columns.length),e.textContent=this.emptyText,this.el.setAttribute("class","empty"),this.el.appendChild(e),this}}),$=s.HeaderCell=n.View.extend({tagName:"th",events:{"click a":"onClick"},_direction:null,initialize:function(e){s.requireOptions(e,["column","collection"]),this.column=e.column,this.column instanceof C||(this.column=new C(this.column)),this.listenTo(this.collection,"backgrid:sort",this._resetCellDirection)},direction:function(e){return arguments.length&&(this._direction&&this.$el.removeClass(this._direction),e&&this.$el.addClass(e),this._direction=e),this._direction},_resetCellDirection:function(e,t,i,n){n==this.collection&&(e!==this.column.get("name")?this.direction(null):this.direction(t))},onClick:function(e){e.preventDefault();var t=this.column.get("name");this.column.get("sortable")&&("ascending"===this.direction()?this.sort(t,"descending",function(e,i){var n=e.get(t),r=i.get(t);return n===r?0:n>r?-1:1}):"descending"===this.direction()?this.sort(t,null):this.sort(t,"ascending",function(e,i){var n=e.get(t),r=i.get(t);return n===r?0:r>n?-1:1}))},sort:function(e,t,i){i=i||this._cidComparator;var r=this.collection;if(n.PageableCollection&&r instanceof n.PageableCollection){var o;o="ascending"===t?-1:"descending"===t?1:null,r.setSorting(o?e:null,o),"client"==r.mode?(r.fullCollection.comparator||(r.fullCollection.comparator=i),r.fullCollection.sort()):r.fetch({reset:!0})}else r.comparator=i,r.sort();this.collection.trigger("backgrid:sort",e,t,i,this.collection)},_cidComparator:function(e,t){var n=e.cid,r=t.cid;if(!i.isUndefined(n)&&!i.isUndefined(r)){if(n=1*n.slice(1),r=1*r.slice(1),r>n)return-1;if(n>r)return 1}return 0},render:function(){this.$el.empty();var e=t("<a>").text(this.column.get("label")).append("<b class='sort-caret'></b>");return this.$el.append(e),this.delegateEvents(),this}});s.HeaderRow=s.Row.extend({requiredOptions:["columns","collection"],initialize:function(){s.Row.prototype.initialize.apply(this,arguments)},makeCell:function(e,t){var i=e.get("headerCell")||t.headerCell||$;return i=new i({column:e,collection:this.collection})}});var R=s.Header=n.View.extend({tagName:"thead",initialize:function(e){s.requireOptions(e,["columns","collection"]),this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new E(this.columns)),this.row=new s.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),n.View.prototype.remove.apply(this,arguments)}}),N=s.Body=n.View.extend({tagName:"tbody",initialize:function(e){s.requireOptions(e,["columns","collection"]),this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new E(this.columns)),this.row=e.row||T,this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this.emptyText=e.emptyText,this._unshiftEmptyRowMayBe();var t=this.collection;this.listenTo(t,"add",this.insertRow),this.listenTo(t,"remove",this.removeRow),this.listenTo(t,"sort",this.refresh),this.listenTo(t,"reset",this.refresh),this.listenTo(t,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){0===this.rows.length&&null!=this.emptyText&&this.rows.unshift(new k({emptyText:this.emptyText,columns:this.columns}))},insertRow:function(e,t,r){if(this.rows[0]instanceof k&&this.rows.pop().remove(),!(t instanceof n.Collection||r))return this.collection.add(e,r=t),void 0;r=i.extend({render:!0},r||{});var o=new this.row({columns:this.columns,model:e}),s=t.indexOf(e);this.rows.splice(s,0,o);var l=this.$el,a=l.children(),c=o.render().$el;r.render&&(s>=a.length?l.append(c):a.eq(s).before(c))},removeRow:function(e,t,n){return n?((i.isUndefined(n.render)||n.render)&&this.rows[n.index].remove(),this.rows.splice(n.index,1),this._unshiftEmptyRowMayBe(),void 0):(this.collection.remove(e,n=t),this._unshiftEmptyRowMayBe(),void 0)},refresh:function(){for(var e=0;e<this.rows.length;e++)this.rows[e].remove();return this.rows=this.collection.map(function(e){var t=new this.row({columns:this.columns,model:e});return t},this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){this.$el.empty();for(var e=document.createDocumentFragment(),t=0;t<this.rows.length;t++){var i=this.rows[t];e.appendChild(i.render().el)}return this.el.appendChild(e),this.delegateEvents(),this},remove:function(){for(var e=0;e<this.rows.length;e++){var t=this.rows[e];t.remove.apply(t,arguments)}return n.View.prototype.remove.apply(this,arguments)},moveToNextCell:function(e,t,i){var n=this.collection.indexOf(e),r=this.columns.indexOf(t);if(i.moveUp()||i.moveDown()||i.moveLeft()||i.moveRight()||i.save()){var o=this.columns.length,s=o*this.collection.length;if(i.moveUp()||i.moveDown()){var l=this.rows[n+(i.moveUp()?-1:1)];l&&l.cells[r].enterEditMode()}else if(i.moveLeft()||i.moveRight())for(var a=i.moveRight(),c=n*o+r+(a?1:-1);c>=0&&s>c;a?c++:c--){var h=~~(c/o),d=c-h*o,u=this.rows[h].cells[d];if(u.column.get("renderable")&&u.column.get("editable")){u.enterEditMode();break}}}this.rows[n].cells[r].exitEditMode()}});s.Footer=n.View.extend({tagName:"tfoot",initialize:function(e){s.requireOptions(e,["columns","collection"]),this.columns=e.columns,this.columns instanceof n.Collection||(this.columns=new s.Columns(this.columns))}}),s.Grid=n.View.extend({tagName:"table",className:"backgrid",header:R,body:N,footer:null,initialize:function(e){s.requireOptions(e,["columns","collection"]),e.columns instanceof n.Collection||(e.columns=new E(e.columns)),this.columns=e.columns;var t=i.omit(e,["el","id","attributes","className","tagName","events"]);this.header=e.header||this.header,this.header=new this.header(t),this.body=e.body||this.body,this.body=new this.body(t),this.footer=e.footer||this.footer,this.footer&&(this.footer=new this.footer(t)),this.listenTo(this.columns,"reset",function(){this.header=new(this.header.remove().constructor)(t),this.body=new(this.body.remove().constructor)(t),this.footer&&(this.footer=new(this.footer.remove().constructor)(t)),this.render()})},insertRow:function(e,t,i){return this.body.insertRow(e,t,i)},removeRow:function(e,t,i){return this.body.removeRow(e,t,i)},insertColumn:function(e,t){return t=t||{render:!0},this.columns.add(e,t),this},removeColumn:function(e,t){return this.columns.remove(e,t),this},render:function(){return this.$el.empty(),this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),n.View.prototype.remove.apply(this,arguments)}})}(window,jQuery,_,Backbone),function(e,t,i,n){n.Extension.Paginator=i.View.extend({className:"backgrid-paginator",windowSize:10,fastForwardHandleLabels:{first:"",prev:"",next:"",last:""},template:t.template('<ul><% _.each(handles, function (handle) { %><li <% if (handle.className) { %>class="<%= handle.className %>"<% } %>><a href="#" <% if (handle.title) {%> title="<%= handle.title %>"<% } %>><%= handle.label %></a></li><% }); %></ul>'),events:{"click a":"changePage"},initialize:function(e){n.requireOptions(e,["collection"]);var t=this.collection,i=t.fullCollection;i?(this.listenTo(i,"add",this.render),this.listenTo(i,"remove",this.render),this.listenTo(i,"reset",this.render)):(this.listenTo(t,"add",this.render),this.listenTo(t,"remove",this.render),this.listenTo(t,"reset",this.render))},changePage:function(t){t.preventDefault();var i=e(t.target).parent();if(!i.hasClass("active")&&!i.hasClass("disabled")){var n=e(t.target).text(),r=this.fastForwardHandleLabels,o=this.collection;if(r)switch(n){case r.first:return o.getFirstPage(),void 0;
case r.prev:return o.getPreviousPage(),void 0;case r.next:return o.getNextPage(),void 0;case r.last:return o.getLastPage(),void 0}var s=o.state,l=+n;o.getPage(0===s.firstPage?l-1:l)}},makeHandles:function(){var e=[],t=this.collection,i=t.state,n=i.firstPage,r=+i.lastPage;r=Math.max(0,n?r-1:r);var o=Math.max(i.currentPage,i.firstPage);o=n?o-1:o;var s=Math.floor(o/this.windowSize)*this.windowSize,l=Math.min(r+1,s+this.windowSize);if("infinite"!==t.mode)for(var a=s;l>a;a++)e.push({label:a+1,title:"No. "+(a+1),className:o===a?"active":void 0});var c=this.fastForwardHandleLabels;return c&&(c.prev&&e.unshift({label:c.prev,className:t.hasPrevious()?void 0:"disabled"}),c.first&&e.unshift({label:c.first,className:t.hasPrevious()?void 0:"disabled"}),c.next&&e.push({label:c.next,className:t.hasNext()?void 0:"disabled"}),c.last&&e.push({label:c.last,className:t.hasNext()?void 0:"disabled"})),e},render:function(){return this.$el.empty(),this.$el.append(this.template({handles:this.makeHandles()})),this.delegateEvents(),this}})}(jQuery,_,Backbone,Backgrid),function(e,t,i,n){var r=n.Extension.ServerSideFilter=i.View.extend({tagName:"form",className:"backgrid-filter form-search",template:t.template('<div class="input-prepend input-append"><span class="add-on"><i class="icon-search"></i></span><input type="text" <% if (placeholder) { %> placeholder="<%- placeholder %>" <% } %> name="<%- name %>" /><span class="add-on"><a class="close" href="#">&times;</a></span></div>'),events:{"click .close":"clear",submit:"search"},name:"q",placeholder:null,initialize:function(e){n.requireOptions(e,["collection"]),i.View.prototype.initialize.apply(this,arguments),this.name=e.name||this.name,this.placeholder=e.placeholder||this.placeholder;var t=this.collection,r=this;i.PageableCollection&&t instanceof i.PageableCollection&&"server"==t.mode&&(t.queryParams[this.name]=function(){return r.$el.find("input[type=text]").val()})},search:function(e){e&&e.preventDefault(),e={},e[this.name]=this.$el.find("input[type=text]").val(),this.collection.fetch({data:e})},clear:function(e){e&&e.preventDefault(),this.$("input[type=text]").val(null),this.collection.fetch()},render:function(){return this.$el.empty().append(this.template({name:this.name,placeholder:this.placeholder,value:this.value})),this.delegateEvents(),this}});n.Extension.ClientSideFilter=r.extend({events:{"click .close":function(e){e.preventDefault(),this.clear()},"change input[type=text]":"search","keyup input[type=text]":"search",submit:function(e){e.preventDefault(),this.search()}},fields:null,wait:149,initialize:function(e){r.prototype.initialize.apply(this,arguments),this.fields=e.fields||this.fields,this.wait=e.wait||this.wait,this._debounceMethods(["search","clear"]);var i=this.collection,n=this.shadowCollection=i.clone();n.url=i.url,n.sync=i.sync,n.parse=i.parse,this.listenTo(i,"add",function(e,t,i){n.add(e,i)}),this.listenTo(i,"remove",function(e,t,i){n.remove(e,i)}),this.listenTo(i,"sort reset",function(e,i){i=t.extend({reindex:!0},i||{}),i.reindex&&n.reset(e.models)})},_debounceMethods:function(e){t.isString(e)&&(e=[e]),this.undelegateEvents();for(var i=0,n=e.length;n>i;i++){var r=e[i];this[r]=t.debounce(this[r],this.wait)}this.delegateEvents()},makeMatcher:function(e){var t=RegExp(e.trim().split(/\W/).join("|"),"i");return function(e){for(var i=this.fields||e.keys(),n=0,r=i.length;r>n;n++)if(t.test(e.get(i[n])+""))return!0;return!1}},search:function(){var e=t.bind(this.makeMatcher(this.$("input[type=text]").val()),this);this.collection.reset(this.shadowCollection.filter(e),{reindex:!1})},clear:function(){this.$("input[type=text]").val(null),this.collection.reset(this.shadowCollection.models,{reindex:!1})}})}(jQuery,_,Backbone,Backgrid),function(e,t,i,n,r){var o=r.Extension.SelectRowCell=n.View.extend({className:"select-row-cell",tagName:"td",events:{"keydown :checkbox":"onKeydown","change :checkbox":"onChange","click :checkbox":"enterEditMode"},initialize:function(e){r.requireOptions(e,["model","column"]),this.column=e.column,this.column instanceof r.Column||(this.column=new r.Column(this.column)),this.listenTo(this.model,"backgrid:select",function(e,t){this.$el.find(":checkbox").prop("checked",t).change()})},enterEditMode:function(){this.$el.find(":checkbox").focus()},exitEditMode:function(){this.$el.find(":checkbox").blur()},onKeydown:function(e){var t=new r.Command(e);return t.passThru()?!0:(t.cancel()?(e.stopPropagation(),this.$el.find(":checkbox").blur()):(t.save()||t.moveLeft()||t.moveRight()||t.moveUp()||t.moveDown())&&(e.preventDefault(),e.stopPropagation(),this.model.trigger("backgrid:edited",this.model,this.column,t)),void 0)},onChange:function(e){this.model.trigger("backgrid:selected",this.model,t(e.target).prop("checked"))},render:function(){return this.$el.empty().append('<input tabindex="-1" type="checkbox" />'),this.delegateEvents(),this}}),s=r.Extension.SelectAllHeaderCell=o.extend({className:"select-all-header-cell",tagName:"th",initialize:function(e){r.requireOptions(e,["column","collection"]),this.column=e.column,this.column instanceof r.Column||(this.column=new r.Column(this.column));var t=this.collection,i=this.selectedModels={};this.listenTo(t,"backgrid:selected",function(e,t){t?i[e.id||e.cid]=e:(delete i[e.id||e.cid],this.$el.find(":checkbox").prop("checked",!1))}),this.listenTo(t,"remove",function(e){delete i[e.cid]}),this.listenTo(t,"backgrid:refresh",function(){this.$el.find(":checkbox").prop("checked",!1);for(var e=0;e<t.length;e++){var n=t.at(e);i[n.id||n.cid]&&n.trigger("backgrid:select",n,!0)}})},onChange:function(e){var i=t(e.target).prop("checked"),n=this.collection;n.each(function(e){e.trigger("backgrid:select",e,i)})}});r.Grid.prototype.getSelectedModels=function(){for(var e,t=this.header.row.cells,i=0,n=t.length;n>i;i++){var r=t[i];if(r instanceof s){e=r;break}}var o=[];if(e)for(var l in e.selectedModels)o.push(this.collection.get(l));return o}}(window,jQuery,_,Backbone,Backgrid)});define("lib/backbone.localstorage",["lib/common"],function(){function s4(){return((1+Math.random())*65536|0).toString(16).substring(1)}function oid(){return s4()+s4()+s4()+s4()+s4()+s4()}Backbone.LocalStorage=window.Store=function(name){if(!this.localStorage){throw"Backbone.localStorage: Environment does not support localStorage."}this.name=name;var store=this.localStorage().getItem(this.name);this.records=store&&store.split(",")||[]};var separator="/";_.extend(Backbone.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(model){if(!model.id){model.id=oid();model.set(model.idAttribute,model.id)}this.localStorage().setItem(this.name+separator+model.id,JSON.stringify(model.toJSON()));this.records.push(model.id.toString());this.save();return this.find(model)},update:function(model){this.localStorage().setItem(this.name+separator+model.id,JSON.stringify(model.toJSON()));if(!_.include(this.records,model.id.toString()))this.records.push(model.id.toString());this.save();return this.find(model)},find:function(model){return this.jsonData(this.localStorage().getItem(this.name+separator+model.id))},findAll:function(){return(_.chain||_)(this.records).map(function(id){return this.jsonData(this.localStorage().getItem(this.name+separator+id))},this).compact().value()},destroy:function(model){if(model.isNew())return false;this.localStorage().removeItem(this.name+separator+model.id);this.records=_.reject(this.records,function(id){return id===model.id.toString()});this.save();return model},localStorage:function(){return localStorage},jsonData:function(data){return data&&JSON.parse(data)},_clear:function(){var local=this.localStorage(),itemRe=new RegExp("^"+this.name+separator);local.removeItem(this.name);(_.chain||_)(local).keys().filter(function(k){return itemRe.test(k)}).each(function(k){local.removeItem(k)})},_storageSize:function(){return this.localStorage().length}});var stores={};Backbone.LocalStorage.sync=window.Store.sync=Backbone.localSync=function(method,model,options){var key;var url=typeof model.url=="function"?model.url():model.url||"";if(model instanceof Backbone.Model){key=model.urlRoot||url.replace(model.id,"");if(key.slice(-1)==="/")key=key.slice(0,-1)}else if(model instanceof Backbone.Collection){key=url}var store=stores[key];if(store==null)store=stores[key]=new Backbone.LocalStorage(key);var resp,errorMessage,syncDfd=Backbone.$.Deferred&&Backbone.$.Deferred();try{console.log("Sync Req:",method,url,model.toJSON());switch(method){case"read":resp=model.id!=undefined?store.find(model):store.findAll();break;case"create":resp=store.create(model);break;case"update":resp=store.update(model);break;case"delete":resp=store.destroy(model);break}}catch(error){if(error.code===DOMException.QUOTA_EXCEEDED_ERR&&store._storageSize()===0)errorMessage="Private browsing is unsupported";else errorMessage=error.message}if(resp){if(options&&options.success){options.success(resp)}console.log("Sync Resp:",method,url);console[model.length?"table":"dir"](model.toJSON());if(syncDfd){syncDfd.resolve(resp)}}else{errorMessage=errorMessage?errorMessage:"Record Not Found";console.error("Error:",errorMessage);if(options&&options.error)options.error(errorMessage);if(syncDfd)syncDfd.reject(errorMessage)}if(options&&options.complete)options.complete(resp);return syncDfd&&syncDfd.promise()};Backbone.ajaxSync=Backbone.sync;Backbone.sync=Backbone.LocalStorage.sync;return Backbone.LocalStorage});if(!Function.prototype.bind){Function.prototype.bind=function(oThis){"use strict";if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,FNOP=function(){},fBound=function(){return fToBind.apply(this instanceof FNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};FNOP.prototype=this.prototype;fBound.prototype=new FNOP;return fBound}}(function(){"use strict";var ObjectProto=Object.prototype,defineGetter=ObjectProto.__defineGetter__,defineSetter=ObjectProto.__defineSetter__,lookupGetter=ObjectProto.__lookupGetter__,lookupSetter=ObjectProto.__lookupSetter__,hasOwnProp=ObjectProto.hasOwnProperty;if(defineGetter&&defineSetter&&lookupGetter&&lookupSetter){if(!Object.defineProperty){Object.defineProperty=function(obj,prop,descriptor){if(arguments.length<3){throw new TypeError("Arguments not optional")}prop+="";if(hasOwnProp.call(descriptor,"value")){if(!lookupGetter.call(obj,prop)&&!lookupSetter.call(obj,prop)){obj[prop]=descriptor.value}if(hasOwnProp.call(descriptor,"get")||hasOwnProp.call(descriptor,"set")){throw new TypeError("Cannot specify an accessor and a value")}}if(!(descriptor.writable&&descriptor.enumerable&&descriptor.configurable)){throw new TypeError("This implementation of Object.defineProperty does not support"+" false for configurable, enumerable, or writable.")}if(descriptor.get){defineGetter.call(obj,prop,descriptor.get)}if(descriptor.set){defineSetter.call(obj,prop,descriptor.set)}return obj}}if(!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(obj,prop){if(arguments.length<2){throw new TypeError("Arguments not optional.")}prop+="";var descriptor={configurable:true,enumerable:true,writable:true},getter=lookupGetter.call(obj,prop),setter=lookupSetter.call(obj,prop);if(!hasOwnProp.call(obj,prop)){return descriptor}if(!getter&&!setter){descriptor.value=obj[prop];return descriptor}delete descriptor.writable;descriptor.get=descriptor.set=undefined;if(getter){descriptor.get=getter}if(setter){descriptor.set=setter}return descriptor}}if(!Object.defineProperties){Object.defineProperties=function(obj,props){var prop;for(prop in props){if(hasOwnProp.call(props,prop)){Object.defineProperty(obj,prop,props[prop])}}}}}})();if(!document.documentElement.dataset&&(!Object.getOwnPropertyDescriptor(Element.prototype,"dataset")||!Object.getOwnPropertyDescriptor(Element.prototype,"dataset").get)){var propDescriptor={enumerable:true,get:function(){"use strict";var i,that=this,HTML5_DOMStringMap,attrVal,attrName,propName,attribute,attributes=this.attributes,attsLength=attributes.length,toUpperCase=function(n0){return n0.charAt(1).toUpperCase()},getter=function(){return this},setter=function(attrName,value){return typeof value!=="undefined"?this.setAttribute(attrName,value):this.removeAttribute(attrName)};try{({}).__defineGetter__("test",function(){});HTML5_DOMStringMap={}}catch(e1){HTML5_DOMStringMap=document.createElement("div")}for(i=0;i<attsLength;i++){attribute=attributes[i];if(attribute&&attribute.name&&/^data-\w[\w\-]*$/.test(attribute.name)){attrVal=attribute.value;attrName=attribute.name;propName=attrName.substr(5).replace(/-./g,toUpperCase);try{Object.defineProperty(HTML5_DOMStringMap,propName,{enumerable:this.enumerable,get:getter.bind(attrVal||""),set:setter.bind(that,attrName)})}catch(e2){HTML5_DOMStringMap[propName]=attrVal}}}return HTML5_DOMStringMap}};try{Object.defineProperty(Element.prototype,"dataset",propDescriptor)}catch(e){propDescriptor.enumerable=false;Object.defineProperty(Element.prototype,"dataset",propDescriptor)}}define("lib/html5-dataset");(function(){"use strict";var t=[].slice,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},i=function(t,e){return function(){return t.apply(e,arguments)}};define("utils",["lib/html5-dataset"],function(){var e,n,i,r,o,s,l,a,u,c;return i=function(t,e){return null==e&&(e=document),e.querySelector(t)},r=function(t,e){return null==e&&(e=document),[].slice.call(e.querySelectorAll(t))},c=function(t){return t.innerHTML.trim().replace(/\s+/g," ").replace(/> </g,">\n<")},o=function(t,e){var n;if(n=i(t),!n)throw new Error("cannot load template from "+t);return n.parentNode.removeChild(n),e?n:c(n)},s=function(t,e){var n,i,s,l,a,u;if(n={},l=e?r(t):r(".tpl[name]",o(t,!0)),!l.length)throw new Error("unable to find tpl elements or empty in "+t);for(a=0,u=l.length;u>a;a++){if(s=l[a],i=s.getAttribute("name"),!i)throw new Error('to get a tpl dict, tpl element must have a "name" attribute');n[i]=c(s)}return n},n=function(t,e){return t.replace(/{{\s*\w+\s*}}/g,function(t){var n;return t=t.match(/^{{\s*(\w+)\s*}}$/)[1],(null!=(n=e[t])?n.toString():void 0)||("function"==typeof e.escape?e.escape(t):void 0)||""})},null==(l=Date.prototype).now&&(l.now=function(){return+new Date}),null==(a=String.prototype).capitalize&&(a.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()}),null==(u=Element.prototype).scrollIntoViewIfNeeded&&(u.scrollIntoViewIfNeeded=Element.prototype.scrollIntoView),Function.prototype.acts_as=function(){var e,n,i,r,o,s,l;for(e=1<=arguments.length?t.call(arguments,0):[],o=0,s=e.length;s>o;o++){n=e[o],this.prototype["__is"+n]=!0,l=n.prototype;for(i in l)r=l[i],this.prototype[i]=r}return this},e=function(){var t,e,n,i,r,o;return t=30,i=/(?:(\d+)w(?:eek)?s?)?(?:(\d+)d(?:ay)?s?)?(?:(\d+)h(?:our)?s?)?(?:(\d+)m(?:in(?:use?)?s?)?)?(?:(\d+)s(?:ec(?:ond)?)?s?)?(?:(\d+)ms)?/i,n=[6048e5,864e5,36e5,6e4,1e3,1],e=n[1],o=[["week","s"],["day","s"],["hour","s"],["minus","es"],["second","s"],"ms"],r=function(t,i){var r,s,l,a,u,c,h,d;for(c=[],s=h=0,d=n.length;d>h;s=++h)l=n[s],u=o[s],u&&(a=t%l,r=(t-a)/l,0===s&&5>r&&(a-a%e)%7!==0?r=0:t=a,r&&(Array.isArray(u)?i?c.push(""+r+u[0].charAt(0)):(u=1===r?u[0]:u[0]+u[1],c.push(""+r+" "+u)):c.push(i?""+r+u:""+r+" "+u)));return c.join(" ")},{parse:function(t){var e,r,o,s,l,a;if(t=t.trim().replace(/\s+|\band\b/gi,"")){if(/^\d+$/.test(t))return parseInt(t);for(e=0,o=t.match(i).slice(1),r=l=0,a=o.length;a>l;r=++l)s=o[r],s&&(e+=s*n[r]);return e}return 0},stringify:function(e,n){var i;return e>=0?(i=r(e,n),null==n&&i.length>t?r(e,!0):i):(e&&console.error("delay should be number >= 0 but it is "+e,e),"")}}}(),{find:i,findAll:r,tpl:o,tplAll:s,fill:n,DurationConvertor:e}}),define("models",["module","lib/common"],function(e){var i,r,o,s,l,a,u,c,h,d,p,f,m,g,y,v,w,b,k,x,C,E,$,N,L,T,S,I,R,z;return x=e.config().BASE_URL||"/api","/"===x.slice(-1)&&(x=x.slice(0,-1)),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._expires=1e3,e.oid=function(){var t;return t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return t()+t()+t()+t()+t()+t()}}(),e.prototype.syncValidation=function(){},e.prototype.sync=function(t,n,i){return null==i&&(i={}),this.syncValidation(t,n,i),e.__super__.sync.call(this,t,n,i)},e.prototype.load=function(t,e){var n,i;return n=(null!=e?e:{}).expires,null==n&&(n=this._expires),!this.length||!this._last_load||1>n||Date.now()-this._last_load>n?(i=this._loading_cb_queue,null!=i?"function"==typeof t&&i.push(t):(i=this._loading_cb_queue="function"==typeof t?[t]:[],this.fetch({reset:!0,success:function(t){return function(e,n,r){var o,s,l;for(t._loading_cb_queue=null,t._last_load=Date.now(),t.trigger("loaded",e),s=0,l=i.length;l>s;s++)(o=i[s])(e,"loaded",n,r)}}(this),error:function(t){return function(e,n,r){var o,s,l;for(t._loading_cb_queue=null,s=0,l=i.length;l>s;s++)(o=i[s])(t,"error",n,r)}}(this)}))):"function"==typeof t&&t(this,"skipped"),this},e.prototype.status=function(t){var e;return e=this.get("status")||"",(null!=t?t.lowercase:void 0)?e.toLowerCase():e.toUpperCase()},e.prototype.type=function(t){var e;return e=this.get("type")||"",(null!=t?t.lowercase:void 0)?e.toLowerCase():e.toUpperCase()},e.prototype.save=function(t,n){var i;return null==t&&(t={}),i=new Date,this.has("created_at")||(t.created_at=i),t.updated_at=i,e.__super__.save.call(this,t,n)},e}(Backbone.Model),o=Backbone.Collection,o.prototype._expires=a.prototype._expires,o.prototype.load=a.prototype.load,E=function(t){function e(t,n){(null!=n?n.url:void 0)&&(this.url=n.url),this.on("add remove",function(){return this._last_load=Date.now()-this._expires+100}),e.__super__.constructor.call(this,t,n)}return n(e,t),e.prototype.syncValidation=a.prototype.syncValidation,e.prototype.sync=function(t,n,i){return null==i&&(i={}),this.syncValidation(t,n,i),e.__super__.sync.call(this,t,n,i)},e}(o),p=function(e){function i(){var e,n,r,o;n=1<=arguments.length?t.call(arguments,0):[],null==this.state&&(this.state={}),o=this.defaultState;for(e in o)r=o[e],this.state[e]=r;this.on("add remove",function(){return this._last_load=Date.now()-this._expires+100}),i.__super__.constructor.apply(this,n)}return n(i,e),i.prototype.mode="client",i.prototype.defaultState={pageSize:255},i.prototype.syncValidation=a.prototype.syncValidation,i.prototype.sync=function(t,e,n){return null==n&&(n={}),this.syncValidation(t,e,n),i.__super__.sync.call(this,t,e,n)},i}(Backbone.PageableCollection),$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.defaults={status:"IDLE"},e.prototype.status=function(t,e){var n,i,r,o;if(null==e&&(e={}),null!=(null!=t?t.lowercase:void 0)&&(e=t,t=null),n="function"==typeof e?e:e.callback,i=null!=n||(null!=(o=e.remote)?o:null!=t)){if(r=("function"==typeof this.url?this.url():void 0)||this.url,!r)throw new Error("cannot get status of a entity remotely without url");"/"!==r.slice(-1)&&(r+="/"),r+="status"}if(null==t)return t=(this.get("status")||"").toUpperCase(),i&&this.fetch({reset:!0,success:function(t){return function(){"function"==typeof n&&n(t.status(e))}}(this)}),e.lowercase?t.toLowerCase():t;if(t=t.toUpperCase(),i){if(!/^(?:FINISHED|STARTED|STOPPED|PAUSED)$/.test(t))throw new Error("this status cannot be set remotely",t);console.log("update status",t,r),this.save({status:t},{success:function(){return"function"==typeof n?n(t):void 0},error:function(){return"function"==typeof n?n(null):void 0}})}else this.set("status",t);return this},e}(a),N=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.urlRoot=x+"/tenants",e}(a),L=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.idAttribute="email",e.prototype.urlRoot=x+"/users",e.prototype.name=function(){return this.has("name")?this.get("name"):this.has("first_name")&&this.has("last_name")?""+this.get("first_name")+" "+this.get("last_name"):this.get("first_name")||this.get("last_name")||null},e}(a),b=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.defaults={type:"PUBLISHER"},e}(L),k=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.publishers=new e,e.prototype.model=b,e.prototype.url=b.prototype.urlRoot,e}(p),T=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this._createNodeRef=this._createNodeRef.bind(this),this._createLinkRef=this._createLinkRef.bind(this),this._wire()}return n(e,t),e.prototype._name="workflow",e.prototype.urlRoot=x+"/workflows",e.prototype._wire=function(){var t,e,n,i,r,o,s,l,a;t=this.attributes,o=("function"==typeof this.url?this.url():void 0)||this.url||"",n=Array.isArray(t.nodes)?t.nodes:[],n=this.nodes=new m(n,{url:o+"/nodes"}),n._loaded=n.length>0,e=Array.isArray(t.links)?t.links:[],e=this.links=new d(e,{url:o+"/links"}),e._loaded=e.length>0,s=this._deleted=[],n.forEach(this._createNodeRef),this.listenTo(n,{add:this._createNodeRef,remove:function(t){return function(e){t._removeNodeRef(e),e.isNew()||s.push(e)}}(this)}),this.listenTo(n,"add remove",function(t){return function(){var e;return e=[],n.forEach(function(t){return(null!=t?t.isNew():void 0)?void 0:e.push(t.id)}),t.set("node_ids",e)}}(this)),e.forEach(this._createLinkRef),this.listenTo(e,{add:this._createLinkRef,remove:function(t){return function(e){t._removeLinkRef(e),e.isNew()||s.push(e)}}(this)}),this.listenTo(e,"add remove",function(t){return function(){var n;return n=[],e.forEach(function(t){return(null!=t?t.isNew():void 0)?void 0:n.push(t.id)}),t.set("link_ids",n)}}(this)),n.length&&(i=null!=(l=null!=(a=t.start_node)?a.id:void 0)?l:t.start_node_id,null==i?this.startNode=null:(this.startNode=n["number"==typeof i?"at":"get"](i))||console.error("cannot find node specified by start_node_id",i,this.toJSON()),!this.startNode&&n.length&&(r=n.filter(function(t){return!t.inLinks.length}),1===r.length?(console.warn("auto detecting start node",t),this.startNode=r[0]):(console.error("cannot find or more than one start node detected",t),this.startNode=null))),this._sorted=null,this.set({})},e.prototype.fetch=function(t){var n,i;return null==t&&(t={}),i=null!=(n=t.success)?n.bind(this):void 0,t.success=function(t,e,n){return t._wire(),t.nodes._loaded=t.links._loaded=!0,t.trigger("loaded",t),"function"==typeof i?i(t,e,n):void 0},e.__super__.fetch.call(this,t)},e.prototype.loaded=function(){var t,e;return Boolean((null!=(t=this.nodes)?t._loaded:void 0)&&(null!=(e=this.links)?e._loaded:void 0))},e.prototype.sort=function(t){var e,n,i,r,o,s,l,a,u;if(null==t&&(t={}),null==this.startNode)console.error("cannot sort without start node");else if(t.force||!this._sorted){for(e={},s=0,r=0,n=[this.startNode];o=n.shift();)if(!e.hasOwnProperty(o.cid))for(e[o.cid]=o,o.idx=s++,u=o.outLinks,l=0,a=u.length;a>l;l++)i=u[l],i.idx=r++,n.push(i.nextNode);this.nodes.comparator=this.links.comparator=function(t){return t.idx},this.nodes.sort(),this.links.sort(),this.nodes.comparator=this.links.comparator=function(t){return function(e){return null==e.idx&&(t._sorted=null,t.nodes.comparator=t.links.comparator=null),e.idx}}(this),this._sorted=s===this.nodes.length&&r===this.links.length}return this},e.prototype.validate=function(t,e){var n,i,r,o,s;if(null!=e?e.traverse:void 0)try{if(!this.loaded())throw new Error("cannot validate a not loaded workflow");if(this.nodes.length){if(s=this.startNode,o=this.nodes,!o.length||null==s)throw new Error("no start node");if(i=this.links,r={},o.forEach(function(t,e){var n;if(!t.inLinks.length&&t!==s)throw new Error("find a node without in links and it is not the start node "+(null!=(n=t.id)?n:e))}),i.forEach(function(t,e){var n;if(n=""+t.prevNode.cid+"-"+t.nextNode.cid,r.hasOwnProperty(n))throw new Error("duplicated link "+n+" "+(t.id||e))}),!this.sort({force:!0})._sorted)throw new Error("after traversed workflow and find nodes or links not visited")}}catch(_error){return n=_error,console.error("validate workflow failed:",n.message,this),n}},e.prototype.copy=function(t,n){var i,r,o,s,l,a,u,c;if(null==n&&(n={}),!(t instanceof e))throw new Error("must be copy from a workflow");if(!t.isValid({traverse:n.traverse!==!1}))throw new Error("cannot copy a invalid workflow");return s=[],r=[],o={},l={silent:!0},u=function(t){null!=t&&(delete t.id,delete t.status,delete t.workflow_id,delete t.node_id,delete t.action_id)},t.nodes.forEach(function(t){var e;e=t.clone().unset("id",l).unset("workflow_id",l).set({template_id:t.id,status:"IDLE"}),t.has("actions")&&e.set("actions",t.get("actions").map(function(t){return u(t),u(t.content),u(t.event),u(t.tracking),t})),s[t.idx]=e,e.idx=t.idx,o[t.id]=e}),t.links.forEach(function(t){var e,n,i;i=o[t.get("prev_node_id")],n=o[t.get("next_node_id")],e=t.clone().unset("id",l).unset("workflow_id",l).set({template_id:t.id,prev_node_id:i.idx,next_node_id:n.idx,status:"IDLE"}),e.prevNode=i,e.nextNode=n,r[t.idx]=e,e.idx=t.idx}),i=t.attributes,a=null!=i.start_node_id?null!=(c=o[i.start_node_id])?c.idx:void 0:null,this.clear(l),this.set({name:i.name,desc:i.desc,key:i.key,start_node_id:a,template_id:t.id,nodes:s,links:r,status:"IDLE"}),this._wire(),this},e.prototype._save=a.prototype.save,e.prototype.save=function(t,n){var i,r,o,l,u;return null==t&&(t={}),null==n&&(n={}),this.isNew()&&(o=t.id=a.oid()),r=null!=(u=t.tenant_id)?u:this.get("tenant_id"),i=[],l=function(t,e){var n,l,u,c,h,d,p,f,_,m,g,y,v,w;if(u=t.attributes,null==u.id&&(u.id=e.toString()),null!=r&&null==u.tenant_id&&(u.tenant_id=r),null!=(y=u.actions)?y.length:void 0)for(v=u.actions,e=f=0,m=v.length;m>f;e=++f){for(n=v[e],l=null!=n.id?n.id:n.id=e.toString(),null!=r&&null==u.tenant_id&&(u.tenant_id=r),null!=n.tracking&&(n.tracking.is_tracking=!0,(p=n.tracking).name||(p.name=n.name+" (Tracking)")),w=["content","event","tracking"],_=0,g=w.length;g>_;_++)h=w[_],d=n[h],null!=d&&(null==d.id&&(d.id=a.oid()),d.name||(d.name=n.name),null==d.action_id&&(d.action_id=l),null==d.node_id&&(d.node_id=u.id),null==d.workflow_id&&(d.workflow_id=o),null!=r&&null==d.tenant_id&&(d.tenant_id=r));c=n.content,null!=c&&(i.push(c),n.content_id=c.id,delete n.content,new s(c).save())}return u},null!=this.nodes&&(t.nodes=this.nodes.map(l)),null!=this.links&&(t.links=this.links.map(l)),console.log("save local",this._name,t),e.__super__.save.call(this,t,n)},e.prototype.destroy=function(t){return this.nodes.forEach(function(t){var e,n,i,r,o,l,a;if(n=t.attributes.actions,null!=n?n.length:void 0)for(r=0,o=n.length;o>r;r++)e=n[r],i=null!=(l=e.content_id)?l:null!=(a=e.content)?a.id:void 0,null!=i&&new s({id:i}).destroy()}),e.__super__.destroy.call(this,t)},e.prototype.find=function(t){var e,n,i,r,o;return r=t.nodeId,i=t.linkId,e=t.actionId,n=t.callback,o=function(t){var o,s,l;return null!=i?s=t.links.get(i):null!=r?(l=t.nodes.get(r),l&&e&&(o=l.actions().get(e))):null!=e&&console.error("only action id without node id is not allowed",r,e),"function"==typeof n?n({node:l,link:s,action:o}):void 0},this.loaded()?o(this):this.fetch({reset:!0,success:o}),this},e.prototype.createNode=function(t,e){return null==t.workflow_id&&(t.workflow_id=this.id),this.nodes.create(t,{wait:!0,success:e}),this},e.prototype._createNodeRef=function(t){if(!(t instanceof f))throw new Error("it must be a Node object");this.id&&!t.has("workflow_id")&&t.set("workflow_id",this.id),t.workflow=this,t.inLinks=[],t.outLinks=[],t.actions().forEach(function(e){e.workflow=t.workflow,e.node=t})},e.prototype._removeNodeRef=function(t){t.inLinks.concat(t.outLinks).forEach(function(t){return t.destroy()})},e.prototype.createLink=function(t,e){return null==t.workflow_id&&(t.workflow_id=this.id),this.links.create(t,{wait:!0,success:e}),this},e.prototype._createLinkRef=function(t){var e,n;if(!(t instanceof h))throw new Error("it must be a Link object");if(this.id&&!t.has("workflow_id")&&t.set("workflow_id",this.id),t.workflow=this,n=t.get("prev_node_id"),e=t.get("next_node_id"),null!=n&&null!=e){if(t.prevNode=this.nodes["number"==typeof n?"at":"get"](n),!t.prevNode)throw new Error("cannot find prev node with id "+n+" for link "+t.id);if(t.nextNode=this.nodes["number"==typeof e?"at":"get"](e),!t.nextNode)throw new Error("cannot find next node with id "+n+" for link "+t.id)}else if(null==t.prevNode||null==t.nextNode)throw new Error("link "+(t.key||t.id)+" is broken, prev/next node missing");t.prevNode.outLinks.push(t),t.nextNode.inLinks.push(t)},e.prototype._removeLinkRef=function(t){var e,n,i;i=t.prevNode.outLinks,e=i.indexOf(t),i.splice(e,1),n=t.nextNode.inLinks,e=n.indexOf(t),n.splice(e,1)},e.prototype.hasLink=function(t,e){var n,i,r,o;for("string"==typeof t&&(t=this.nodes.get(t)),"string"==typeof e&&(e=this.nodes.get(e)),o=t.outLinks,i=0,r=o.length;r>i;i++)if(n=o[i],n.nextNode===e)return!0;return!1},e}($),R=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.workflows=new e,e.find=function(t){var e;return e=this.workflows,e.length?e.find(t):e.load(function(e){return e.find(t)}),e},e.prototype.model=T,e.prototype.url=T.prototype.urlRoot,e.prototype._expires=6e5,e.prototype.find=function(t){var e,n,i,r,o,s,l,a;if(l=t.workflowId,o=t.nodeId,r=t.linkId,e=t.actionId,n=t.callback,i=t.fetch,null==l)throw new Error("workflowId is required");if("function"!=typeof n)throw new Error("async callback is required");return a=function(t){return null!=o||null!=r||null!=e?t.find({nodeId:o,linkId:r,actionId:e,callback:function(e){return e.workflow=t,n(e)}}):i&&!t.loaded()?t.fetch({success:function(t){return n({workflow:t})},error:function(){return n({})}}):n({workflow:t})},(s=this.fullCollection.get(l))?a(s):i===!0?new this.model({id:l}).fetch({success:a,error:function(){return n({})}}):n({}),this},e}(p),v=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._name="project",e.prototype.urlRoot=x+"/projects",e.prototype.defaults={is_project:!0},e}(T),w=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.projects=new e,e.find=function(t){var e;return e=this.projects,e.length?e.find(t):e.load(function(e){return e.find(t)}),e},e.prototype.model=v,e.prototype.url=v.prototype.urlRoot,e.prototype._expires=6e4,e}(R),z=function(t){var e,n;if(!t.workflowId||"function"!=typeof t.callback)throw new Error("workflowId and callback must be given");e=t.callback,n=!1,t.callback=function(t){e&&(t.workflow||Object.keys(t).length?(e(t),e=null):n&&e(t),n=!0)},w.find(t),R.find(t)},I=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.setChangeFlag=this.setChangeFlag.bind(this),this.resetChangeFlag()}return n(e,t),e.prototype.resetChangeFlag=function(){return this.setChangeFlag(!1)},e.prototype.setChangeFlag=function(t){return null!=t?(this._changed=Boolean(t),this.off("change",this.setChangeFlag),t||(this.set({}),this.on("change",this.setChangeFlag))):this._changed||!this.hasChanged()||this.isNew()||(this._changed=!0,this.off("change",this.setChangeFlag)),this},e.prototype.destroy=function(t){return e.__super__.destroy.call(this,t),this.destroy=function(){return this},this},e.prototype.save=function(t,n){return null==t&&(t={}),null==n&&(n={}),this.workflow?(this.set(t,n),this.workflow.save()):e.__super__.save.call(this,t,n)},e}($),f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._name="node",e.prototype.urlRoot=x+"/nodes",e.prototype.name=function(){return this.get("name")},e.prototype.actions=function(){var t,e,n,i,o;for(e=null!=this._actions?this._actions:this._actions=new r(this.get("actions")),o=e.models,n=0,i=o.length;i>n;n++)t=o[n],t.node=this;return e},e}(I),S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)
}return n(e,t),e.prototype.create=function(t,e){return null==t&&(t={}),null==t.id&&(t.id=a.oid()),this.set(t,e)},e}(E),m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.model=f,e.prototype.url=f.prototype.urlRoot,e}(S),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._name="link",e.prototype.urlRoot=x+"/links",e.prototype.name=function(){return this.get("name")||this.get("desc")||this.get("key")},e}(I),d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.model=h,e.prototype.url=h.prototype.urlRoot,e}(S),i=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this._wire(),this.on("reset sync",this._wire.bind(this))}return n(e,t),e.prototype._wire=function(){var t,e,n,i,r;for(this.has("content")?(this.content=new s(this.get("content")),this.content.action=this):this.content=null,r=["event","tracking"],n=0,i=r.length;i>n;n++)e=r[n],this.has(e)?(t=this[e]=new u(this.get(e)),t.action=this):this[e]=null;return this},e.prototype.name=function(){var t;return this.get("name")||(null!=(t=this.get("type"))?t.replace(/_/," ").capitalize():void 0)||"(No Name)"},e.prototype.urlRoot=x+"/actions",e}($),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.actions=function(){var t,n;return t=new e,n=_.debounce(function(e){var n,i;return n=[],i={},e.fullCollection.forEach(function(t){t.loaded()&&t.nodes.forEach(function(t){t.actions().forEach(function(e){var r,o;r=null!=(o=t.id+"-"+e.id)?o:e.cid,null==i[r]?n.push(i[r]=e):i[r].cid!==e.cid&&console.warn("action id duplicate (ignore)",i[r],e)})})}),t.reset(n),t.trigger("loaded",t)},10),t.listenTo(w.projects,"loaded",function(t){null!=t.fullCollection&&n(t)}),t.load=function(e,i){return w.projects.load(function(i,r){0===t.length?(t.once("loaded",e),n(i)):e(t,r)},i),t},t}(),e.prototype.model=i,e.prototype.url=i.prototype.urlRoot,e}(E),g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.urlRoot=x+"/notifications",e.prototype.get=function(t){var n;return n=e.__super__.get.call(this,t),"desc"===t&&this.has("date")?n.replace("{{date}}",new Date(this.get("date")).toLocaleString()):n},e}(a),y=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.notifications=new e,e.prototype.model=g,e.prototype.url=g.prototype.urlRoot,e}(p),u=function(t){function e(t,n){e.__super__.constructor.call(this,this._proc(t),n)}return n(e,t),e.prototype.urlRoot=x+"/events",e.prototype.pause=function(t){return this._proc(t)},e.prototype._proc=function(t){var e,n,i,r,o,s;for(null==t&&(t=this.attributes),null!=t.duration&&(n=Number(t.duration),t.duration=n?n:0),s=["starts","ends"],r=0,o=s.length;o>r;r++)i=s[r],null!=t[i]&&(e=new Date(t[i]),isNaN(e.getTime())?(console.error("invalid date",t[i]),delete t[i]):t[i]=e);return t.status=null!=t.ends&&Date.now()>t.ends.getTime()?"FINISHED":null!=t.starts&&Date.now()>t.starts.getTime()?"STARTED":"IDLE",t},e.prototype.isEmpty=function(){var t;return t=this.attributes,Boolean(t.duration||t.starts||t.ends)},e.prototype.save=function(t,e){var n,i;if(null==t&&(t={}),null==e&&(e={}),n=this.action,null!=(null!=n?n.node:void 0))return console.warn(this.attributes,t,e),this.set(t,e),console.warn(this.attributes),i=this.get("is_tracking")?"tracking":"event",n.set(i,this.toJSON()),n.node.save();throw new Exception("this event is not wired to action")},e}(a),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.model=u,e}(p),s=function(t){function e(t,n){e.__super__.constructor.call(this,this._proc(t),n)}return n(e,t),e.prototype.urlRoot=x+"/contents",e.prototype.pause=function(t){return this._proc(t)},e.prototype._proc=function(t){var e,n,i;return null==t&&(t=this.attributes),e=t.posted_at||(null!=(n=t.records)?n.length:void 0)||(null!=(i=t.submissions)?i.length:void 0),t.status=e?"POSTED":"IDLE",t},e.prototype.posted=function(){return this.attributes.posted_at},e.prototype.hasReport=function(){var t,e;return Boolean((null!=(t=this.get("records"))?t.length:void 0)||(null!=(e=this.get("submissions"))?e.length:void 0))},e}(a),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.model=s,e.prototype.url=s.prototype.urlRoot,e}(p),C=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.idAttribute="service",e.prototype.urlRoot=x+"/services",e.prototype.connected=function(){return/^CONNECTED$/i.test(this.get("status"))},e}(a),{ROOT:x,Entity:a,Collection:o,ManagerCollection:p,Tenant:N,User:L,Publishers:k,Publisher:b,Workflows:R,Workflow:T,Nodes:m,Node:f,Links:d,Link:h,Actions:r,Action:i,Projects:w,Project:v,Notifications:y,Notification:g,Event:u,Events:c,Content:s,Contents:l,Service:C,findProjectOrWorkflow:z}}),define("base",["utils","models","lib/common"],function(e,i){var r,o,s,l,a,u,c,h,d,p,f,_,m,g,y,v,w,b,k,x;return w=e.find,b=e.findAll,k=e.tpl,x=e.tplAll,v=e.fill,s=e.DurationConvertor,o=i.Collection,m=i.Tenant,g=i.User,f=i.ROOT,_={started:"label-success",tracked:"label-success",paused:"label-warning",stopped:"label-inverse",finished:"label-info",error:"label-important"},y=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.initialize=function(t){var e;return(null!=(e=this.el)?e.tagName:void 0)&&(this.el.view=this,this.$parent=this.$el.parent(),this.$el.data("view",this)),(null!=t?t.parent:void 0)&&(this.parent=t.parent,this.parentEl=this.parent.el),this.render=this.render.bind(this),this._super_render=this._super_render.bind(this),this},i.prototype.delayedTrigger=function(){var e,n,i,r;return i=arguments[0],n=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],null==n&&(n=10),r="_"+i+"_timtout",this[r]&&clearTimeout(this[r]),this[r]=setTimeout(function(n){return function(){return n[r]=null,n.trigger.apply(n,[i].concat(t.call(e)))}}(this),n),this},i.prototype.render=function(){return this._super_render()},i.prototype._super_render=function(){return this.rendered=!0,this.el.view=this,this.$el.data("view",this),this},i.prototype.remove=function(){return this.trigger("remove",this),i.__super__.remove.apply(this,arguments)},i}(Backbone.View),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(y),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){var n;return e.__super__.initialize.call(this,t),this.navEl=t.navEl||(null!=(n=w('#navbar a[href="#'+this.id+'"]'))?n.parentElement:void 0),this},e.prototype.switchTo=function(t){var e,n,i;return"string"==typeof t&&(t=this[t]),t&&t instanceof h?(t.$parent.append(t.$el),t.rendered||(t.render(),t.rendered=!0),t.el.classList.contains("active")||(console.log("switch inner-frame",null!=(i=t.el)?i.id:void 0),e=w(".inner-frame.active[name]",this.el),e&&(e.classList.remove("active"),n=$.data(e,"view"),null!=n&&n.trigger("deactivate"),n.$el.detach()),t.el.classList.add("active"),t.trigger("activate"))):console.warn("inner frame cannot find"),this},e}(y),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="box",e.prototype.events={"click .btn-close":"remove","click .btn-minimize":"minimize"},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t)},e.prototype.render=function(){return this.btn_min=w(".btn-minimize",this.el),this.btn_close=w(".btn-close",this.el),this.contentEl=w(".box-content",this.el),e.__super__.render.apply(this,arguments)},e.prototype.minimize=function(){var t,e;return t=this.btn_min||w(".btn-minimize",this.el),e=this.contentEl||w(".box-content",this.el),t.classList.contains("icon-up-open")?(e.classList.add("minimized"),t.classList.remove("icon-up-open"),t.classList.add("icon-down-open")):(e.classList.remove("minimized"),t.classList.remove("icon-down-open"),t.classList.add("icon-up-open")),this},e}(y),d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){var n;return e.__super__.initialize.call(this,t),this.$el.modal({show:!1,backdrop:"static"}),n=w("[autofocus]",this.el),this.$el.on({hide:function(t){return function(e){e.target===t.el&&t.trigger("hide",t)}}(this),hidden:function(t){return function(e){e.target===t.el&&!1!==t.trigger("hidden",t)&&(t.callback(),t.goBackOnHidden&&location.hash.slice(1)!==t.goBackOnHidden&&t.goBack(),t.reset(),e.target===t.el&&t.$el.detach())}}(this),show:function(t){return function(e){e.target===t.el&&(e.target===t.el&&t.$parent.append(t.$el),t.trigger("show",t))}}(this),shown:function(t){return function(e){e.target===t.el&&(null!=n&&n.focus(),t.trigger("shown",t))}}(this)}),this.listenTo(this.router,"route",function(t){return function(){return t._hash&&t._hash!==location.hash.slice(0,t._hash.length)?t.cancel():void 0}}(this)),this.$el.detach(),this},e.prototype.goBack=function(){return this._hash===location.hash&&this.router.back({fallback:this.goBackOnHidden}),this},e.prototype.popup=function(t,e){return this.rendered||this.render(),t===this.data?"function"==typeof e&&e("ignored"):(this.reset(),this.data=t,this._callback=e,this._hash=location.hash,this.show(!0)),this},e.prototype.callback=function(t){return null==t&&(t="cancel"),null!=this._callback?(this.trigger(t,this.data,this),"function"==typeof this._callback&&this._callback(t,this.data,this),this._action=t,this._callback=null,this):void 0},e.prototype.reset=function(){return this.data=null,this._action=null,this._callback=null,this._hash=null,this.trigger("reset",this),this},e.prototype.cancel=function(){return this._callback&&this.callback(),this.hide(!0)},e.prototype.show=function(t){return null==t&&(t=!0),this.$el.modal(t?"show":"hide"),this.shown=t,this},e.prototype.hide=function(t){return null==t&&(t=!0),this.show(!t)},e}(y),u=function(){function t(){}return t.prototype.initForm=function(){var t,e,n,i,r,o,s,l;if(this.form=w("form",this.el),!this.form)throw new Error("FormViewMixin require a form element in "+(this.el.id||this.el.outerHTML));return this.form.onsubmit=function(t){return function(e){var n;return e.preventDefault(),t.validate(t.form)&&("function"==typeof(n=t.form)._callback&&n._callback(t.form),t.form._callback=null,t.trigger("submit",t.form,t.data)),!1}}(this),i=w('[type="submit"]',this.form),null==i&&(i=document.createElement("input"),i.type="submit",i.style.display="none",this.form.appendChild(i)),this._submit_btn=i,s=null!=(o=this.save)?"function"==typeof o.bind?o.bind(this):void 0:void 0,l=function(t){return function(e){return e.stopImmediatePropagation(),s?t.submit(s):i.click(),!1}}(this),t=$(this.form).on("keypress","input",function(t){return 13===t.which?l(t):void 0}),t.on("keydown","textarea",function(t){return 13===t.which&&(t.ctrlKey||t.metaKey)?l(t):void 0}),this.form.key&&(r=this.form.name||this.form.title)&&(n=!1,e="",$(r).on("input",function(t){return function(){return e=r.value.trim().replace(/\W+/g,"_").slice(0,33).toLowerCase(),n||(n=!t.form.key.value),n&&(t.form.key.value=e),!0}}(this)),$(this.form.key).on({input:function(t){return function(){return n=t.form.key.value===e}}(this),change:function(t){return function(){return t.form.key.value=t.form.key.value.toLowerCase()}}(this)})),this},t.prototype.validate=function(t){var e,n,i,r,o,s,l;for(s=$(t).find("[required]:visible:enabled"),n=0,r=s.length;r>n;n++)if(e=s[n],!e.value.trim())return e.focus(),alert("This field is required!"),!1;try{for(l=b(":invalid",t),i=0,o=l.length;o>i;i++)return e=l[i],e.focus(),alert("This field is invalid!"),!1}catch(_error){}return!0},t.prototype.submit=function(t){return"function"==typeof t&&(this.form._callback=t),this._submit_btn.click(),this},t.prototype.fill=function(t){var e,n,i,r,o,s,l,a;if(this._attributes={},null!=t)for(i in t){if(o=t[i],n=this.form[i],"radio"===(null!=n?"function"==typeof n.item?null!=(a=n.item(0))?a.type:void 0:void 0:void 0))for(n=[].slice.call(n),s=0,l=n.length;l>s;s++)r=n[s],e="radio"===r.type&&r.value===o,r.checked!==e&&(r.checked=e,e&&$(r).change());else(null!=n?n.name:void 0)===i&&null!=n.value&&("checkbox"===n.type?(n.checked=o,$(n).change()):$(n).val(o).change());this._attributes[i]=o}return this.trigger("fill",this._attributes,t),this},t.prototype.read=function(){var t,e,n,i,r,o,s;if(null==this._attributes)return null;for(t={},s=this.form.elements,r=0,o=s.length;o>r;r++)if(e=s[r],n=e.name,n&&!e.disabled&&!$(e).is(":hidden"))switch(e.type){case"radio":e.checked&&(t[n]=e.value);break;case"checkbox":t[n]=e.checked;break;default:(e.value||null!=this._attributes[n])&&(i=e.value,t[n]="string"==typeof i?i.trim():i)}return this.trigger("read",t,this._attributes),t},t}(),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.acts_as(u),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.initForm()},e.prototype.reset=function(){return this.form.reset(),this},e}(y),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.acts_as(u),e.prototype.initialize=function(t){var n;return e.__super__.initialize.call(this,t),this.initForm(),this.btnSave=w("button.btn-save",this.el),null!=(n=this.btnSave)&&(n.onclick=function(t){return function(){return t.submit(t.save.bind(t))}}(this)),this},e.prototype.reset=function(){return e.__super__.reset.apply(this,arguments),this.form.reset(),this},e}(d),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.urlRoot="",e.prototype.seperator=":",e.prototype.headerTitle="",e.prototype.defaultItem="all",e.prototype.itemClassName="",e.prototype.targetClassName="",e.prototype.emptyItem="new",e.prototype.allowEmpty=!1,e.prototype._reload_timeout=6e4,e.prototype.initialize=function(t){var n,i,r,s;if(e.__super__.initialize.call(this,t),this.collection=t.collection||this.collection,!(this.collection instanceof o))throw new Error("collection must be given");return this.seperator=null!=(n=t.seperator)?n:this.seperator,this.urlRoot=null!=(i=t.urlRoot)?i:this.urlRoot,this.headerTitle=t.headerTitle||this.headerTitle,this.defaultItem=null!=(r=t.defaultItem)?r:this.defaultItem,this.itemClassName=t.itemClassName||this.itemClassName,this.targetClassName=t.targetClassName||this.targetClassName,this.allowEmpty=t.allowEmpty||this.allowEmpty,this.emptyItem=null!=(s=t.emptyItem)?s:this.emptyItem,this.listenTo(this.collection,"reset add remove",this.render),null==this.events&&(this.events={}),this.events["click .btn-refresh"]=function(t){return function(){return t.fetch(!0)}}(this),t.auto?this.fetch(!1):void 0},e.prototype.fetch=function(t){var e,n;return null==t&&(t={}),e=this.collection,n=Date.now(),"boolean"==typeof t&&(t={force:t}),t.force||!e._last_load||n-e._last_load>this._reload_timeout?(console.log("fetch for list",this.headerTitle),null==t.reset&&(t.reset=!0),e.fetch(t),e._last_load=Date.now(),!0):(this.render(),!1)},e.prototype.render=function(){return this._clear(),this._render(),this.trigger("updated",this),e.__super__.render.apply(this,arguments)},e.prototype._clear=function(){this.el.innerHTML="",this.el.appendChild(this._renderHeader(null)),this.defaultItem&&this.el.appendChild(this._renderItem(this.defaultItem)),this.allowEmpty&&this.emptyItem&&this.defaultItem!==this.emptyItem&&this.el.appendChild(this._renderItem(this.emptyItem))},e.prototype._render=function(t){var e,n;null==t&&(t=this.collection),t.fullCollection&&(t=t.fullCollection),e=document.createDocumentFragment(),n=this._renderItem.bind(this),t.forEach(function(t){return e.appendChild(n(t))}),this.el.appendChild(e),this.trigger("updated",this)},e.prototype._renderHeader=function(t){var e,n;return null==t&&(t=this.headerTitle),n=document.createElement("li"),n.className="nav-header",n.textContent=t,t===this.headerTitle&&(e=document.createElement("button"),e.type="button",e.className="btn-refresh icon-refresh",n.insertBefore(e,n.firstChild)),n},e.prototype._renderItem=function(t){var e,n,i,r;if(null==t&&(t=this.defaultItem),n=document.createElement("li"),this.itemClassName&&(n.className=this.itemClassName),e=document.createElement("a"),this.targetClassName&&(e.className=this.targetClassName),r=this.seperator,i=this.urlRoot,null!=t.id)e.href="#"+i+r+t.id,e.textContent=t.get("title")||t.get("name"),e.dataset.id=t.id,$(e).data("model",t);else if(t.href)e.href=t.href,e.textContent=t.title;else if("all"===t)e.href="#"+i+r+"all",e.textContent="All";else{if("new"!==t&&"empty"!==t)throw console.dir(t),new Error("unsupported item for list");e.href="#"+i+r+this.emptyItem,e.textContent="Empty"}return t===this.defaultItem&&(n.className+=" active"),n.appendChild(e),n},e}(y),{find:w,findAll:b,tpl:k,tplAll:x,fill:v,View:y,BoxView:r,FrameView:c,InnerFrameView:h,NavListView:p,ModalDialogView:d,FormDialogView:l,FormViewMixin:u,FormView:a,Tenant:m,User:g,DurationConvertor:s,ROOT:f,STATUS_CLS:_}}),define("console",["base"],function(t){var e,i,r,o,s,l,a,u,c,h,d;return h=t.find,d=t.findAll,c=t.View,r=t.FrameView,o=t.ModalDialogView,a=t.Tenant,u=t.User,e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.el="#main",e.prototype.user=sessionStorage.user,e.prototype.events={"touchstart #navbar .dropdown > a":function(t){var e;return e=$(t.currentTarget).parent(),e.hasClass("hover")?(setTimeout(function(){return e.removeClass("hover")},500),!0):(t.preventDefault(),t.stopPropagation(),this.$dropdowns.not(e).removeClass("hover"),e.addClass("hover"),this.$el.one("touchstart",function(t){return e.has(t.target).length?void 0:e.removeClass("hover")}),!1)},"mouseenter #navbar ul.nav > li":function(t){return t.currentTarget.classList.add("hover")},"mouseleave #navbar ul.nav > li":function(t){return t.currentTarget.classList.remove("hover")},"click #navbar .dropdown-menu li":function(t){return $(t.currentTarget).parents(".dropdown").removeClass("hover")},"click #navbar .dropdown > a":function(t){var e,n;return e=$(t.currentTarget).parent(),e.hasClass("hover")&&(n=setTimeout(function(){return n=null,e.removeClass("hover")},500),$(t.currentTarget).one("mouseleave",function(){return n?n=clearTimeout(n):void 0})),!0}},e.get=function(){return null==this.instance&&(this.instance=new this),this.instance},e.prototype.initialize=function(t){var n,i;n=null;try{this.user&&(n=new u(JSON.parse(this.user)),n.has("email")||(n=null))}catch(_error){}return console.log("load from session",n),this.user=n,this.avatarEl=h("img#avatar"),this.usernameEl=h("#username"),null==(i=this.avatarEl.dataset).src&&(i.src=this.avatarEl.src),this.avatarEl.onerror=function(){return this.src=this.dataset.src},this.frames={el:h("#frames",this.el)},d("#frames > .frame",this.el).forEach(function(t){return function(e){return $(e).detach(),t.frames[e.id]={id:e.id,el:e,parent:t}}}(this)),this.navContainer=h("#navbar",this.el),this.framesContainer=h("#frames",this.el),this._fixStyle=this._fixStyle.bind(this),$(window).on("resize",this._fixStyle),this.$frames=$("#navbar [data-frame]"),this.$dropdowns=$(this.navContainer).find(".dropdown"),this.$el.tooltip({selector:"[title]"}),e.__super__.initialize.call(this,t)},e.prototype._fixStyle=function(){var t;return t=this.navContainer.clientHeight||41,this.framesContainer.style.top=t+"px"},e.prototype.remove=function(){return $(window).off("resize",this._fixStyle),e.__super__.remove.apply(this,arguments)},e.prototype.showFrame=function(t,e,n){var i,o,s,l,a,u;return t=this.frames[t],o=$(this.frames.el),null!=t?(t.el.classList.contains("active")||(l=h(".frame.active",this.el),l&&(l.classList.remove("active"),a=$.data(l,"view"),a&&setTimeout(function(){return a.trigger("deactivate"),a.$el.detach()},10)),null!=(u=h("#navbar li.active"))&&u.classList.remove("active"),o.append(t.el),t.el.classList.add("active"),$(window).resize()),t instanceof r?(t.trigger("activate"),"function"==typeof t.open&&t.open(e,n)):(console.log("load module:",t.id),require([t.id],function(i){return function(r){return t=i.frames[t.id]=new r(t),t.render(),t.trigger("activate"),"function"==typeof t.open?t.open(e,n):void 0}}(this))),i=this.$frames.filter("[data-frame='"+t.id+"']").addClass("active"),s=i.find("[data-inner-frame='"+e+"']").addClass("active"),this.$frames.not(i).removeClass("active"),this.$frames.find(".active[data-inner-frame]").not(s).removeClass("active"),this):void 0},e.prototype.signout=function(){return sessionStorage.clear(),this.user=u.current=null,this.router.clear(),this.hide(),this.trigger("signout"),location.hash="signin",location.reload(),this},e.prototype.signin=function(t,e){var n;return this.user=u.current=t,e?(n=t.toJSON(),delete n.password,sessionStorage.user=JSON.stringify(n),console.log("logged in",n)):delete sessionStorage.user,this.avatarEl.src="https://secure.gravatar.com/avatar/"+t.get("email_md5")+"?s=20&d=mm",$(this.usernameEl).text(t.name()),this.show()},e.prototype.show=function(){return this._hide_ts&&(this._hide_ts=clearTimeout(this._hide_ts)),this.$parent.append(this.$el),this.el.style.visibility="visible",this.el.classList.add("active"),this.el.style.opacity=1,this},e.prototype.hide=function(){return this.el.classList.remove("active"),this._hide_ts=setTimeout(function(t){return function(){return t._hide_ts=null,t.el.style.visibility="hidden",t.$el.detach()}}(this),l.prototype.delay),this},e}(c),l=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.el="#signin",i.get=function(){return null==this.instance&&(this.instance=new this),this.instance},i.prototype.events={"submit form":"submit"},i.prototype.delay=500,i.prototype.initialize=function(t){var n,r,o,s;return i.__super__.initialize.call(this,t),this.form=h("form",this.el),r=(s=this.form.remember).checked||(s.checked="true"===localStorage.marxo_sign_in_remember),r&&localStorage.marxo_sign_in_email&&(this.form.email.value=localStorage.marxo_sign_in_email),n=e.get(),n.user instanceof u?(o=n.user,n.user={},this.hide(),this._validateUser(o)):this._fail(),this},i.prototype.submit=function(t){var e,n;return t.preventDefault(),e=this.form.email.value.trim(),n=this.form.password.value.trim(),e?/.+@.+\..+/.test(e)?n?this._signIn(e,n):(this.form.password.focus(),alert("Password is required!")):(this.form.email.select(),alert("The Email is invalid!")):(this.form.email.focus(),alert("Please fill out the Email!")),!1},i.prototype._fail=function(t){e.get().user=u.current=null,sessionStorage.clear(),"#signin"!==location.hash&&this.router.navigate("signin",{replace:!0}),this.show(),this._disable(!1),t&&alert(t)},i.prototype._disable=function(t){return $(this.form.elements).prop("disabled",t)},i.prototype._signIn=function(t,e){this._disable(!0),require(["crypto"],function(n){return function(i){var r,o,s,l;o=i.hashPassword,s=i.md5Email,t=t.toLowerCase(),r=o(t,e),l=new u({email:t,credential:"Basic "+btoa(""+t+":"+r),email_md5:s(t)}),console.log("login with",t,r),n._validateUser(l),setTimeout(function(){return null!=u.current?$("#demo").modal("show"):void 0},500)}}(this))},i.prototype._validateUser=function(t){var e,n,i;n=t.get("email"),e=t.get("credential"),i=t.get("email_md5"),n&&e&&i?new u({id:"me",email:n}).fetch({headers:{Authorization:e},reset:!0,success:function(t){return function(r){r.has("password")&&r.get("password")!==atob(e.slice(6)).slice(n.length+1)?t._fail("(TEST ONLY) Password not correct"):r.has("tenant_id")&&n===r.get("email")?(r.set("email_md5",i),r.set("credential",e),t.signedIn(r)):(t._fail("User not exist or email and password are not matched."),t.form.password.select())}}(this),error:function(t){return function(e,n){console.error("sign-in failed",n),t._fail("Sign in failed.\nUser not exist or email and password are not matched.")}}(this)}):(console.warn("saved user is not valid",n,e,i),this._fail())},i.prototype.signedIn=function(t){var n;return this.trigger("success",t),this.hide(),n=localStorage.marxo_sign_in_remember=this.form.remember.checked,localStorage.marxo_sign_in_email=n?this.form.email.value:"",e.get().signin(t,n),/signin/i.test(location.hash)&&this.router.back({fallback:"home"}),this},i.prototype.show=function(){return this._hide_ts&&(this._hide_ts=clearTimeout(this._hide_ts)),this.el.classList.contains("active")||(this.el.style.opacity=0,this.el.style.display="block",this._disable(!1),this.$parent.append(this.$el),setTimeout(function(t){return function(){return t.el.classList.add("active"),t.el.style.opacity=1}}(this),1)),this},i.prototype.hide=function(){return this.el.classList.remove("active"),this.el.style.opacity=0,this._hide_ts=setTimeout(function(t){return function(){return t.form.password.value="",t._disable(!1),t.el.style.display="none",t.$el.detach()}}(this),this.delay),this},i}(c),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.el="#demo",e.prototype.goBackOnHidden="home",e}(o),s=function(t){function r(t){var e,n,i,o,s,l,a,u,c,p,f,_,m;for(r.__super__.constructor.call(this,t),this.route("","home",function(t){return function(){return t.navigate("home",{replace:!0}),t.show("home")}}(this)),this.route("signin","signin",function(){}),this.frames={},_=d("[data-frame]",h("#navbar")),s=function(t){return function(e){return t.route(e+"(/:name)(/)",e,function(n){return t.show(e,n)})}}(this),a=0,p=_.length;p>a;a++){for(n=_[a],e=n.dataset.frame,l=this.frames[e]={_name:e},m=d("[data-inner-frame]",n),c=0,f=m.length;f>c;c++)o=m[c],i=o.dataset.innerFrame,u=l[i]={_name:i},o.dataset.default&&(l._cur=u);s(e)}this.on("route",function(t){return function(){return t._last=t._cur,t._cur=Backbone.history.fragment}}(this))}return n(r,t),r.get=function(){return null==this.instance&&(this.instance=new this),this.instance},r.prototype.routes={"workflow/:id(/link/:link)(/node/:node)(/action/:action)":function(t,e,n,i){return this.show("workflow",t,{link:e,node:n,action:i})},"project/:id(/link/:link)(/node/:node)(/action/:action)(/:edit)":function(t,e,n,i,r){return this.show("project",t,{link:e,node:n,action:i,edit:"edit"===r})},"content/:id(/:action)":function(t,e){return this.show("content",t,e)},"config/:name(/:sub)":function(t,e){return this.show("config",t,e)},"event/calendar(/:id)":function(t){return this.show("event","calendar",t)},demo:function(){return(null!=this._demo?this._demo:this._demo=new i).popup({})},signout:"signout"},r.prototype.back=function(t){var e;return null==t&&(t={}),null==t.trigger&&(t.trigger=!0),null==t.replace&&(t.replace=!1),t.real?(e=location.hash,history.go(-1),"string"==typeof t.fallback&&setTimeout(function(){return location.hash===e?this.navigate(t.fallback,t):void 0},100)):this._last?this.navigate(this._last,t):"string"==typeof t.fallback?this.navigate(t.fallback,t):console.log("failed to go back for no last record"),this},r.prototype.clear=function(){return this._last=this._cur=null,this},r.prototype.show=function(t,n,i){var r,o,s,l,a;return null==e.get().user?this.navigate("signin",{replace:!0}):(console.log("route",t,n||"",i||""),s=this.frames[t],null==s._cur||n||(n=null!=(l=s._cur)?l._name:void 0,n&&this.navigate("#"+t+"/"+n,{replace:!0})),/^new$|^signout$/.test(n)||(o=s[n],null==o&&n&&!/^content$/.test(t)&&(o={_name:n}),s._cur=o,this.frames._cur=s),null!=(a=e.get())&&a.showFrame(t,n,i),r=this[t],null!=r&&r.call(this,n)),this},r.prototype.signout=function(){return console.log("sign out"),e.get().signout(),this.navigate("signin",{replace:!0}),this},r}(Backbone.Router),c.prototype.router=s.get(),{findAll:d,ConsoleView:e,SignInView:l,Router:s}}),define("manager",["base","models","lib/backgrid"],function(t,i){var r,o,s,l,a,u,c,h,d,p,f,m,g,y,v,w;return g=t.find,y=t.findAll,w=t.tpl,r=t.InnerFrameView,c=t.NavListView,p=t.STATUS_CLS,o=i.ManagerCollection,d=i.Projects,m=i.Workflows,v=i.findProjectOrWorkflow,f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return this.formatter={model:this.model,fromRaw:function(){return this.model._seq||""},toRaw:function(){return this.model.id}},e.__super__.initialize.call(this,t)},e}(Backgrid.StringCell),Backgrid.LinkCell=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.urlRoot=this.column.get("urlRoot")||this.urlRoot,this.urlRoot&&"/"!==this.urlRoot.slice(-1)?this.urlRoot+="/":void 0},e.prototype.render=function(){var t,e,n,i,r,o,s;return this.$el.empty(),t=this.column.get("name"),n=this.column.get("placement"),i=this.model.get(t),e=this.model.id,o=this.column.get("tooltip")||this.column.get("name")||"title",r=this.model.get(o)||this.model.get("name"),s=this.urlRoot?"#"+this.urlRoot+e:null,this.$el.addClass(t+"-link-cell").append($("<a>",{tabIndex:-1,href:s}).text(i)),this.$el.attr({title:r,"data-placement":n,"data-container":"body"}),this.delegateEvents(),this},e}(Backgrid.UriCell),Backgrid.TooltipCell=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="tooltip-cell",e.prototype.render=function(){var t,n,i;return e.__super__.render.apply(this,arguments),n=this.column.get("placement"),t=this.column.get("tooltip")||this.column.get("name")||"title",i=this.model.get(t),this.$el.attr({title:i,"data-placement":n,"data-container":"body"}),this},e}(Backgrid.StringCell),Backgrid.ReadonlyDatetimeCell=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="datetime-cell",e.prototype.formatter=null,e.prototype.initialize=function(t){return null==this.formatter&&(this.formatter={fromRaw:function(t){var e;if(t){if(t instanceof Date)return t.toLocaleString();e=null;try{e=new Date(t),isNaN(e.getTime())&&(e=null)}catch(_error){}return null==e&&console.error("unsupported datetime",t),e?e.toLocaleString():""}return""},toRaw:function(){}}),e.__super__.initialize.call(this,t)},e}(Backgrid.StringCell),Backgrid.ActionsCell=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="action-cell",e.prototype._tpl={},e.prototype.tpl=function(t){var e;return t?null!=(e=this._tpl)[t]?e[t]:e[t]=w("#t_"+t+"_action_cell"):""},e.prototype.render=function(){var t;return t=this.tpl(this.column.get("name")||this.name),this.el.innerHTML=t.replace(/\{\{id\}\}/g,this.model.id),this.el.dataset.model=this.model.id,this.$el.data("model",this.model),this.$el.find(".btn[title]").attr({"data-container":"body"}),this.delegateEvents(),this},e.prototype._find=function(t,e){return g(""+(e||"")+"[name='"+t+"']",this.el)},e.prototype._hide=function(t,e){var n;return n="string"!=typeof t?t:this._find(t,e),null!=n&&(n.style.display="none"),n},e}(Backgrid.Cell),Backgrid.WorkflowCell=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.render=function(){var t;return this.$el.empty(),t=this.model.get("workflow_id"),t?v({workflowId:t,callback:function(e){return function(n){var i,r,o,s,l;return l=n.workflow,l?(o=l.get("name"),(r=l.get("is_project"))?(s=l.status(),i="label pull-right "+(p[s.toLowerCase()]||""),e.$el.append($("<span>",{class:i}).text(s))):o+=" (Workflow)",e.$el.addClass("workflow-link-cell").attr({title:o,"data-container":"body"}).append($("<a>",{class:r?"":"muted",tabIndex:-1,href:"#"+l._name+"/"+t}).text(o))):(console.warn("workflow/project not found",t),e.$el.text("(Unknown)")),e.delegateEvents()}}(this)}):console.warn("workflow cell cannot get worklfow id",this.model),this},e}(Backgrid.UriCell),Backgrid.NodeActionCell=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.render=function(){var t;return this.$el.empty(),t=this.model.get("workflow_id"),t?v({workflowId:t,nodeId:this.model.get("node_id"),actionId:this.model.get("action_id"),callback:function(t){return function(e){var n,i,r,o,s,l,a,u;
return u=e.workflow,o=e.node,n=e.action,u&&o&&n?(s=n.status(),"IDLE"!==s&&(i="label pull-right "+(p[s.toLowerCase()]||""),t.$el.append($("<span>",{class:i}).text(s))),a="#"+u._name+"/"+u.id+"/node/"+o.id+"/action/"+n.id,l=""+o.get("name")+": "+n.name(),r="<span class='node-title'>"+o.escape("name")+"</span>: "+_.escape(n.name()),t.$el.addClass("action-link-cell").attr({title:l,"data-container":"body"}).append($("<a>",{tabIndex:-1,href:a}).html(r)),t.delegateEvents()):console.warn("failed to get node action",t.model.attributes)}}(this)}):console.warn("node action cell cannot get worklfow id",this.model),this},e}(Backgrid.UriCell),Backgrid.LabelCell=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="label-cell",e.prototype.formatter={fromRaw:function(t){return null!=t?t.toLowerCase():""},toRaw:function(t){return t.toUpperCase()}},e.prototype.render=function(){var t,e,n,i,r;return this.$el.empty(),i=this.model.get(this.column.get("name")),e=this.formatter.fromRaw(i),(r=i||e)&&(null!=r.toLowerCase&&(r=r.toLowerCase()),n="label capitalized ","none"!==r&&this.column.has("cls")?(t=this.column.get("cls"),"string"!=typeof t&&(t=t[r]||t[e]||""),n+=t):n+="label-"+r,this.$el.append($("<span>",{class:n}).text(e))),this.delegateEvents(),this},e}(Backgrid.StringCell),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="pagination",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.listenTo(this.collection,"reset",this.render)},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.collection.state.totalPages<2?this.$el.hide():this.$el.show(),this},e}(Backgrid.Extension.Paginator),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"click .close":function(t){return t.preventDefault(),this.clear(),!1},"keydown input[type=text]":function(t){return 27===t.which?(t.preventDefault(),this.clear(),!1):void 0},"input input[type=text]":"search",submit:function(t){return t.preventDefault(),this.search(),!1}},e.prototype.initialize=function(t){var n;e.__super__.initialize.call(this,t),this._shared_matchers=null!=(n=this.collection)._matchers?n._matchers:n._matchers=[]},e.prototype.getMatcher=function(t){var e,n;return this.fields.length>1?this.makeMatcher(t).bind(this):(e=this.fields[0],n=new RegExp(t.trim(),"i"),function(t){return n.test(t.get(e))})},e.prototype.mergeMatcher=function(t){var e,n,i,r,o;for(o=this._shared_matchers,e=i=0,r=o.length;r>i;e=++i)if(n=o[e],n._filter===this){o.splice(e,1);break}return null!=t&&(n=this.getMatcher(t),n._filter=this,o.push(n)),o.length>1?function(t){var e,i;for(e=0,i=o.length;i>e;e++)if(n=o[e],!1===("function"==typeof n?n(t):void 0))return!1;return!0}:o[0]},e.prototype.search=function(){return this._search(this.$el.find("input[type=text]").val())},e.prototype._search=function(t){var e,n,i,r;return console.log("search",t),e=this.collection,null!=(r=e.pageableCollection)&&r.getFirstPage({silent:!0}),n=this.mergeMatcher(t),n?(i=this.shadowCollection.filter(n),e.reset(i,{reindex:!1}),e._filtered=!0):e._filtered&&(e.reset(this.shadowCollection.models,{reindex:!1}),e._filtered=!1),this.lastQuery=t,this},e.prototype.clear=function(){var t;return t=this.$el.find("input[type=text]"),t.val()&&(t.val(""),this.search(null)),this},e}(Backgrid.Extension.ClientSideFilter),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"click a[href]":function(t){return t.preventDefault(),this.select(t.target),!1}},e.prototype.initialize=function(t){var n,i;if(n=(null!=t?t.field:void 0)||this.field,"string"!=typeof n)throw new Error("nav filter only accept one options.field");return this.fields=[n],this.keys=n.split("."),i=t.urlRoot||this.urlRoot||n,this._regex=new RegExp("#"+i+":(\\w+)"),this._matchers={},e.__super__.initialize.call(this,t)},e.prototype.getMatcher=function(t){var e;return null!=(e=this._matchers)[t]?e[t]:e[t]=this.makeMatcher(t)},e.prototype.makeMatcher=function(t){var e,n;return console.log("q",t),e=this.keys,1===e.length?(e=e[0],""===t?function(t){var n;return n=t.get(e),""===n||null==n}:(n=new RegExp(t.trim(),"i"),function(t){return n.test(t.get(e))})):""===t?function(t){var n,i,r;for(n=0,r=t.get(e[0]);r&&(i=e[++n]);)r=r[i];return""===r||null==r}:(n=new RegExp(t.trim(),"i"),function(t){var i,r,o;for(i=0,o=t.get(e[0]);o&&(r=e[++i]);)o=o[r];return n.test(o)})},e.prototype.search=function(t){return this._search(t)},e.prototype.render=function(){return this.delegateEvents(),this},e.prototype.clear=function(){return this.select(null)},e.prototype.select=function(t){var e,n,i;return null==t&&(t=g("a[href]",this.el)),e=g(".active",this.el),e!==(null!=t?t.parentElement:void 0)&&(n=t.href.match(this._regex),i=null!=n?n[1]:void 0,console.log("filter",this.fields[0],i),this.search(function(){switch(i){case"all":return null;case"empty":return"";default:return i}}()),null!=e&&e.classList.remove("active"),t.parentElement.classList.add("active")),this},e}(a),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.field="workflow_id",e.prototype.urlRoot="project",e.prototype.headerTitle="Projects",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.allowEmpty=t.allowEmpty,this.headerTitle=t.headerTitle||this.headerTitle,this.list=new c({el:this.el,auto:!1,collection:d.projects,urlRoot:this.urlRoot,headerTitle:this.headerTitle,defaultItem:"all",emptyItem:"empty",allowEmpty:this.allowEmpty,itemClassName:"project-list-item"})},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.list.fetch()||this.list.render(),this},e}(u),l=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.defaultFilterField="title",i.prototype._predefinedColumns={checkbox:{name:"",cell:"select-row",headerCell:"select-all"},id:{name:"id",label:"#",cell:f,editable:!1},name:{name:"name",label:"Name",cell:"tooltip",editable:!1},desc:{name:"desc",label:"Description",cell:"string",editable:!1},workflow:{name:"workflow_id",label:"Project/Workflow",cell:"workflow",editable:!1},node_action:{name:"action",label:"Node: Action",cell:"node-action",editable:!1},type:{name:"type",label:"Type",cell:"label",cls:"label-info",editable:!1},sharing:{name:"tenant_id",label:"Sharing",cell:Backgrid.LabelCell.extend({formatter:{fromRaw:function(t){return null!=t?"private":"public"}}}),cls:{private:"label-info",public:"label-inverse"},editable:!1},status:{name:"status",label:"Status",cell:"label",cls:p,editable:!1},created_at:{name:"created_at",label:"Created",cell:"readonly-datetime",editable:!1},updated_at:{name:"updated_at",label:"Last Updated",cell:"readonly-datetime",editable:!1}},i.prototype._defaultEvents={"click .action-cell button[name]":"_action_cell","click .action-buttons .btn":"_action_buttons",'change .select-row-cell input[type="checkbox"]':"_selection_changed"},i.prototype.initialize=function(t){var n,r,l,u,c,h,d,p;null==this.events&&(this.events={}),d=this._defaultEvents;for(l in d)e.call(d,l)&&(n=d[l],null==(c=this.events)[l]&&(c[l]=n));if(i.__super__.initialize.call(this,t),t.collection instanceof o&&(this.collection=t.collection),r=this.collection,u=r.fullCollection,!(r instanceof o))throw new Error("collection must be a instance of ManagerCollection");return this.listenTo(r,"remove",this._selection_changed),r.setPageSize(t.pageSize||15),this.grid=new Backgrid.Grid({columns:this._configColumns(),collection:r}),this.paginator=new s({collection:r}),this.filter=new a({collection:u,fields:[this.defaultFilterField],wait:300}),h=this.grid.body,p=h.render.bind(h),h.render=function(){return u.forEach(function(t,e){return t._seq=e+1}),p()},this.$enable_if_selected=this.$el.find(".enable_if_selected"),this._selection_changed=_.debounce(this._selection_changed.bind(this),100),$(".action-buttons .btn[title]").attr({"data-placement":"bottom","data-container":"body"}),this},i.prototype._configColumns=function(){var t,e,n,i,r,o;for(n=[],o=this.columns,i=0,r=o.length;r>i;i++)t=o[i],"string"==typeof t?(e=t.split(":"),e[1]?(t=function(){switch(e[0]){case"actions":return{name:e[1],label:"",editable:!1,sortable:!1,cell:"actions"};case"name":return{name:"name",label:"Name",cell:"link",urlRoot:e[1],editable:!1};default:return null}}(),t?n.push(t):console.error("cannot understand predefined column",t)):null!=this._predefinedColumns[t]?(t=this._predefinedColumns[t],n.push(t)):console.error("cannot found predefined column",t)):n.push(t);return n},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.$el.find("table.grid-table").replaceWith(this.grid.render().$el.addClass("grid-table")),this.$el.find(".grid-paginator").replaceWith(this.paginator.render().$el.addClass("grid-paginator")),this.$el.find(".grid-filter").empty().append(this.filter.render().$el),this.reload(),this},i.prototype.refresh=function(){return this.rendered&&this.grid.body.refresh(),this},i.prototype.reload=function(){return this.collection.fullCollection.set(null),this.collection.load(function(t){return function(){return t.collection.getFirstPage({silent:!0}),t.filter.clear()}}(this),{expires:500}),this},i.prototype.getSelected=function(){return this.grid.getSelectedModels().filter(function(t){return null!=t})},i.prototype._action_cell=function(t){var e,n,i,r;n=t.target,e=n.dataset.action||n.getAttribute("name"),i=n.parentNode,r=this.collection.get(i.dataset.model),console.log("action",e,r),$(n).tooltip("hide"),e&&r&&this.trigger(e,r)},i.prototype._action_buttons=function(t){var e,n,i;n=t.target,e=n.dataset.action||n.getAttribute("name"),e&&(n.classList.contains("enable_if_selected")?(i=this.getSelected(),console.log("action",e,i),this.trigger(e,i,this)):(console.log("action",e),this.trigger(e,this),"function"==typeof this[e]&&this[e]()))},i.prototype._selection_changed=function(){var t,e,n,i,r,o;r=this.getSelected(),this.$enable_if_selected.prop("disabled",!(null!=r?r.length:void 0)),this.trigger("selection_changed",r,this.grid,this),e=y(".select-row-cell input[type=checkbox]",this.el),"undefined"!=typeof t&&null!==t&&(n=null!=(o=e[0])?o.checked:void 0,i=e.some(function(t){return t.checked!==n}),t=g(".select-all-header-cell input[type=checkbox]",this.el),t.indeterminate=i,i||(t.checked=n))},i}(r),{ManagerView:l,NavFilterView:u,ProjectFilterView:h}}),function(){var t,e,n;t="Marxo Console is powered by HTML5 technologies which need a modern browser to support.\nPlease upgrade or switch your browser.",e=navigator.userAgent,n=function(e){return alert(e?""+e+"\n\n"+t:t),location.href="http://browsehappy.com/?locale=en"},/MSIE[1-8]\b/i.test(e)?n("Microsoft Internet Explorer versions below 9 are not supported!"):/^Opera\//i.test(e)?n("Old versions of Opera (before 15) are not tested for compatibility!\nA recent version of Opera (from 15) is recommended."):/^Mozilla\/4/i.test(e)&&n("Your browser is out-of-date!")}(),console.log("ver","console",5),requirejs.config({shim:{"lib/jquery-ui":{deps:["lib/common"]}},config:{models:{BASE_URL:"/api"}}}),define("main",["lib/backbone.localstorage","console"],function(t,e){var n,i,r,o,s,l,a,u;a=e.findAll,n=e.ConsoleView,o=e.SignInView,r=e.Router,i=function(){var t,e,i,s,l;if(localStorage.no_transition)for(t=document.body.classList,t.remove("fade"),t.add("no-transition"),l=a(".fade"),i=0,s=l.length;s>i;i++)e=l[i],e.classList.remove("fade");window.app={console:n.get(),signin:o.get(),router:r.get()},Backbone.history.start(),document.title=document.title.replace(/^.*?(?=MARXO)/i,""),document.body.style.opacity=1},l=1,u=window.load_demo_data=function(t){localStorage.clear(),require(["data"],function(){return localStorage._demo_data_loaded=l,"function"==typeof t?t():void 0})},s=Number(localStorage._demo_data_loaded||0),s>=l?i():u(i)}),define("notification",["base","manager","models"],function(t,e,i){var r,o,s,l,a,u,c,h,d,p,f,m,g,y;return g=t.find,y=t.tpl,m=t.fill,r=t.FrameView,l=t.NavListView,o=e.ManagerView,s=e.NavFilterView,p=e.ProjectFilterView,f=i.Projects,d=i.Notifications,c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.center=new u({el:this.el,parent:this})},e.prototype.render=function(){return this.center.render(),e.__super__.render.apply(this,arguments)},e}(r),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this._hide("process"),this},e}(Backgrid.ActionsCell),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.columns=["id",{name:"name",label:"Name",cell:"tooltip",placement:"right",tooltip:"desc",editable:!1},{name:"workflow_id",label:"Project",cell:"workflow",editable:!1},{name:"level",label:"Level",cell:"label",cls:{normal:"label-info",major:"label-warning",critical:"label-important",fatal:"label-important",error:"label-important"},editable:!1},{name:"status",label:"Status",cell:"label",cls:{active:"label-warning",precessed:"label-success",expired:"label-default"},editable:!1},"created_at","updated_at",{name:"notification",label:"",editable:!1,sortable:!1,cell:a}],e.prototype._levelCls={minor:"",trivial:"",normal:"label-info",major:"label-warning",critical:"label-important",fatal:"label-important",error:"label-important"},e.prototype.collection=new d,e.prototype.initialize=function(t){var n;return e.__super__.initialize.call(this,t),n=this.collection.fullCollection,this.levelFilter=new s({el:g(".level-filter",this.el),field:"level",collection:n}),this.projectFilter=new p({el:g("ul.project-list",this.el),collection:n,allowEmpty:!0}),this},e.prototype.reload=function(){return e.__super__.reload.apply(this,arguments),this.projectFilter.clear()},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.projectFilter.render(),this},e}(o),h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.auto=!1,e.prototype.urlRoot="notification",e.prototype.headerTitle="Notification",e.prototype.itemClassName="notification-list-item",e.prototype.collection=d.notifications,e.prototype.defaultItem=null,e.prototype.initialize=function(t){var n;return e.__super__.initialize.call(this,t),n=this._renderPopover.bind(this),this.autoUpdate=this.autoUpdate.bind(this),this.$el.popover({html:!0,selector:"a.pointer",container:"body",placement:"right",trigger:"click",title:function(){return this.innerHTML},content:function(){var t,e;return t=$(this).addClass("active"),e=t.data("popover"),setTimeout(function(){return t.removeClass("active"),$(document.body).one("click",function(){return e.hide()})},100),n(t.data("model"))}}),this},e.prototype.autoUpdate=function(t){return this._auto_update&&(this._auto_update=clearTimeout(this._auto_update)),t&&this.fetch({success:function(t){return function(){return console.log("auto update notifications successful"),t._auto_update=setTimeout(t.autoUpdate,t._reload_timeout+1)}}(this),error:function(){return console.log("auto update notifications failed, stop auto update")}}),this},e.prototype._renderPopover=function(t){var e,n,i,r;return console.log("render popover",t),e=document.createElement("div"),e.className="notification-content",i=document.createElement("p"),i.innerHTML=t.escape("desc"),e.appendChild(i),/FINISHED|STOPPED|EXPIRED/.test(t.status())||t.has("expires_at")&&(r=document.createElement("small"),n=new Date(t.get("expires_at")).toLocaleString(),r.innerHTML="Expected expires at "+n,e.appendChild(r)),e},e.prototype._render=function(t){var e,n,i;return null==t&&(t=this.collection),t.fullCollection&&(t=t.fullCollection),n=document.createDocumentFragment(),e=t.filter(function(t){switch(t._date=new Date(t.get("updated_at")||t.get("created_at")).getTime(),t._before=Date.now()-t._date,t.status()){case"EXPIRED":return!1;case"FINISHED":return t._before<864e5;default:return t._before<2592e6}}),i=this._levelWeight,_.sortBy(e,function(t){var e,n;return n=t._before,e=i[(t.get("level")||"").toLowerCase()]||0,1e10*e+n}),e.forEach(function(t){return function(e){return n.appendChild(t._renderItem(e))}}(this)),this.el.appendChild(n)},e.prototype._levelWeight={normal:0,critical:1,error:2},e.prototype._levelCls={normal:"text-info",critical:"text-warning",error:"text-error"},e.prototype._renderItem=function(t){var e,n,i,r,o,s;return null==t&&(t=this.defaultItem),r=document.createElement("li"),this.itemClassName&&(r.className=this.itemClassName),e=document.createElement("a"),null!=t.id?(e.className="pointer "+n,e.dataset.id=t.id,$.data(e,"model",t),n=this._levelCls[null!=(s=t.get("level"))?s.toLowerCase():void 0]||"",o=document.createElement("span"),o.textContent=t.get("name"),o.className=n,i=document.createElement("i"),i.className="icon-notify "+n,e.appendChild(i),e.appendChild(o)):t.href&&(e.href=t.href,e.textContent=t.title),r.appendChild(e),r},e.prototype.render=function(){return this._clear(),this._render(),this.el.appendChild(this._renderItem({title:"View All >",href:"#notification"})),this._super_render(),this},e}(l),c.NotificationListView=h,c}),define("diagram",["base","lib/d3v3"],function(t,e){var i,r;return i=t.View,r=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.initialize=function(t){var e;return this.model=t.model,this.r=t.radius||20,this.t=null!=(e=t.timeout)?e:100,this.max_t=t.maxTimeout,this._tick=this._tick.bind(this),this._draw=_.debounce(this._draw.bind(this),100),this._click=this._click.bind(this),this._mouseover=this._mouseover.bind(this),this._mouseleave=this._mouseleave.bind(this),this.draw=this.draw.bind(this),this.highlight=this.highlight.bind(this),i.__super__.initialize.call(this,t)},i.prototype._click=function(t){return this.trigger("select",t.model,this.model)},i.prototype._data=function(t){var e,n,i,r,o,s,l,a;this.model=t,o=this.r+1,s=o+o,l=0,n=0,i=this.$el.innerWidth()||o,r=this.$el.innerHeight()||o,e=!0,this._invalid=!(null!=t.startNode&&t.sort()._sorted),this.data={nodes:t.nodes.map(function(a,u){var c,h,d,p,f,_,m,g;return a._idx=u,_=a.has("offset"),m=_?a.get("offset"):(e=!1,{x:o*u*.56,y:n/2}),p=m.x,f=m.y,p=Math.round((p||0)/s)*o,f=Math.round((f||0)/s)*o,i>p&&(i=p),r>f&&(r=f),p>l&&(l=p),f>n&&(n=f),c=[],d="Node "+(u+1)+": "+a.get("name"),a===t.startNode&&(d="[Start] "+d,c.push("start-node")),(h=a.get("status")||"")&&(/^IDLE$|^NONE$/i.test(h)||(d+=" ("+h.toUpperCase()+")"),c.push("status-"+h.toLowerCase())),{x:p,y:f,id:"node_"+(null!=(g=a.id)?g:a.cid),cls:c.join(" "),tooltip:d,fixed:_||a===t.startNode,index:u+1,model:a}}),links:t.links.map(function(t,e){var n,i,r,o,s;return i=t.prevNode._idx,o=t.nextNode._idx,(r=t.get("status")||"")&&(n="status-"+r.toLowerCase(),r=/^IDLE$|^NONE$/i.test(r)?"":" ("+r.toUpperCase()+")"),{id:"link_"+(null!=(s=t.id)?s:t.cid),cls:n,source:i,target:o,tooltip:"Link "+(e+1)+": "+t.name()+(r||""),straight:o>i,model:t}})},i-=s,r-=s,l-=i,n-=r,this.data.nodes.forEach(function(t){t.x-=i,t.y-=r}),e&&n>l&&(a=[n,l],l=a[0],n=a[1],this.data.nodes.forEach(function(t){var e;e=t.x,t.x=t.y,t.y=e})),l=this.w=Math.max(this.$el.innerWidth(),l+s),n=this.h=Math.max(this.$el.innerHeight(),n+s),this.fixed=e,t.nodes._draw_proc=!0,this.force.size([l,n]),this.svg.attr("viewBox","0 0 "+l+" "+n)},i.prototype._init=function(t){var n;this.force=e.layout.force().friction(.5).charge(-800).linkDistance(100).on("tick",this._tick),n=this.svg=e.select(this.el).html("").append("svg").attr("preserveAspectRatio","xMidYMid meet"),e.select("svg marker#end-arrow").size()||e.select("body").append("svg").style({width:0,height:0}).append("svg:defs").append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",6).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","#000"),this.link=n.append("svg:g").attr("class","links").selectAll(".link"),this.node=n.append("svg:g").attr("class","nodes").selectAll("g"),this.tooltip=e.select(this.el).append("div").attr("class","tooltip").style("opacity",0),"function"==typeof t&&t(e),this._init=function(){return!1}},i.prototype._tick=function(){var t,e;e=this.r,t=e+7,this.node.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),this.link.attr("d",function(n){var i,r,o,s,l,a,u,c,h,d;if(u=n.source.x,c=n.source.y,h=n.target.x,d=n.target.y,r=h-u,o=d-c,r||o){if(i=0,s=Math.sqrt(r*r+o*o),l=r/s,a=o/s,u+=e*l,c+=e*a,h-=t*l,d-=t*a,s*=.75,n.straight)return"M"+u+","+c+"L"+h+","+d}else i=1,s=e,++h,++d;return"M"+u+","+c+"A"+s+","+s+" 0,"+i+",1 "+h+","+d})},i.prototype._mouseover=function(t){var n;return n=e.mouse(this.el),this.tooltip.transition().duration(200).style("opacity",.9).style("left",n[0]+"px").style("top",n[1]+"px").text(t.tooltip)},i.prototype._mouseleave=function(){return this.tooltip.transition().duration(500).style("opacity",0)},i.prototype._draw=function(){var t,e,n,i,r,o,s;console.log("draw",this.data),o=this.r,s=this.t,t=this.data,n=this.force,n.nodes(t.nodes).links(t.links),i=this.link=this.link.data(t.links),i.enter().append("path").attr("class",function(t){return"link "+t.cls}).attr("id",function(t){return t.id}).style("marker-end","url(#end-arrow)").on("click",this._click).on("mouseover",this._mouseover).on("mouseleave",this._mouseleave),i.exit().remove(),this.node=this.node.data(t.nodes),r=this.node.enter().append("svg:g").call(this.force.drag()),r.attr("id",function(t){return t.id}).on("click",this._click).on("mouseover",this._mouseover).on("mouseleave",this._mouseleave),r.append("circle").attr("class",function(t){return"node "+t.cls}).attr("r",o),r.append("svg:text").attr("x",0).attr("y",10).attr("class","index").text(function(t){return t.index}),this.node.exit().remove(),n.start(),e=this.fixed,s&&e&&setTimeout(function(){return n.stop()},s),this.svg.classed("invalid",this._invalid),this.$el[this._invalid?"addClass":"removeClass"]("invalid")},i.prototype.clear=function(){var t;return this.svg&&(this.model={},this.data={},this.w=this.h=0,t=[],this.force.nodes(t).links(t),this.link=this.link.data(t),this.link.exit().remove(),this.node=this.node.data(t),this.node.exit().remove()),this},i.prototype.draw=function(t){if(null==t&&(t=this.model),!t.nodes)throw new Error("unable to draw workflow");return this.rendered||this.render(),this.w=this.h=0,t.loaded()?this.svg?(this.model&&t===this.model&&t.nodes._draw_proc||(this.clear(),this._data(t)),this._draw()):this._init(function(e){return function(){e._data(t),e._draw()}}(this)):(console.log("wf diagram load wf",t._name,t.id),t.fetch({success:this.draw})),this},i.prototype.highlight=function(t,e){var n,i;return(n=this.svg)&&(t&&null!=t.cid&&(e=t._name,t=null!=(i=t.id)?i:t.cid),n.selectAll(".active").classed("active",!1),e&&t&&n.select("#"+e+"_"+t).classed("active",!0)),this},i}(i)}),define("actions",["base","models","lib/jquery-ui"],function(t,e){var i,r,o,s,l,a,u,c,h;return u=t.find,c=t.findAll,h=t.tplAll,l=t.BoxView,a=t.DurationConvertor,i=e.Action,o=e.Actions,s=function(){function t(){}return t.prototype.initActions=function(t){return this.actionsEl=(null!=t?t.actionEl:void 0)||u(".node-actions",this.el),(this.projectMode=Boolean(null!=t?t.projectMode:void 0))||$(this.actionsEl).sortable({axis:"y",delay:150,distance:15,cancel:".box-content"}),this},t.prototype.fillActions=function(t){if(t){if(Array.isArray(t)&&(t=new o(t)),!(t instanceof o))throw new Error("fill action only accept Actions or array");console.log("fill actions",t),this.actions=t,this.actions.forEach(this.addAction.bind(this))}return this},t.prototype.readActions=function(){return c(".action",this.actionsEl).map(function(t){var e;if(e=$(t).data("view"),!e)throw new Error("cannot get action from action.$el");return e.read()})},t.prototype.clearActions=function(){var t;return null!=(t=this.actions)&&t.forEach(function(t){var e;return null!=(e=t.view)?e.remove():void 0}),this.actions=null,$(c(".action",this.actionsEl)).remove(),this},t.prototype.viewAction=function(t){var e,n;return console.log("view action id:",t),e=this.actionsEl.querySelector("#action_"+t),null!=e&&(n=this.el.getAttribute("aria-hidden"),"true"===n?this.$el.one("shown",function(){return e.scrollIntoViewIfNeeded()}):"false"===n?e.scrollIntoViewIfNeeded():setTimeout(function(){return e.scrollIntoViewIfNeeded()},600)),e},t.prototype.addAction=function(t,e){var n,o;try{t instanceof i||(t=new i(t)),n=new r({model:t,parent:this,container:this.actionsEl,projectMode:this.projectMode,readonly:this.readonly&&"IDLE"!==t.status()}),this.listenTo(n,"remove",this.removeAction.bind(this)),n.render(),(null!=e?e.scrollIntoView:void 0)&&n.el.scrollIntoViewIfNeeded(),this.delayedTrigger("actions_update",100)}catch(_error){o=_error,console.error("faild to load action:",o,t)}return this},t.prototype.removeAction=function(t){return console.log("remove action view",t),"function"==typeof t.remove&&t.remove(),this.delayedTrigger("actions_update",100),this},t}(),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.className="box action",e.prototype._tpl=h("#actions_tpl"),e.prototype.events={"change .event-inputs input[type=checkbox]":function(t){var e,n;n=t.currentTarget,e=$(n).parents(".event-inputs").find("input[name$=duration]"),e.prop("disabled",!n.checked),n.checked&&e[0].focus()},"change .event-inputs input[name$=duration]":function(t){var e;e=a.parse(t.currentTarget.value.trim()),t.currentTarget.value=e?a.stringify(e):""},"blur .event-inputs input[name$=duration]":_.debounce(function(t){var e;e=$(t.target),e.val().trim()||e.parents(".event-inputs").find("input[type=checkbox]").prop("checked",!1).change()},150)},e.prototype.initialize=function(t){var n,i;if(e.__super__.initialize.call(this,t),!t.model)throw console.dir(t),new Error("need action model");return this.projectMode=t.projectMode,this.readonly=t.readonly,this.containerEl=t.container,this.model=t.model,this.model.view=this,this.alertEl=u(".alert",this.containerEl),n=this.type=(("function"==typeof(i=this.model).get?i.get("type"):void 0)||t.model.type||t.type||"").toLowerCase(),this._tpl.hasOwnProperty(n)||(this.type="unknown",console.warn("unknown action type",n,t)),this},e.prototype.remove=function(){return this.remove=function(){return this},e.__super__.remove.apply(this,arguments)},e.prototype.render=function(){var t,n,i,r,o,s,l,a,c,h;return h=this._tpl[this.type],h?null==this.model?(console.error("no action model to render",this),this.remove()):(s=this.model,o=s.toJSON(),null!=o.event&&(o.event=$.extend({},o.event)),null!=o.tracking&&(o.tracking=$.extend({},o.tracking)),this.el.innerHTML=h,this.el.id="action_"+s.id||s.cid,this._name=this.$el.find(".box-header h4").text(),null!=this.alertEl?this.containerEl.insertBefore(this.el,this.alertEl):this.containerEl.appendChild(this.el),e.__super__.render.apply(this,arguments),/webkit/i.test(navigator.userAgent)?$(this.el).disableSelection():$(".box-header, .btn",this.el).disableSelection(),this.form=u("form",this.el),t=$(this.form),(l=this.projectMode||this.readonly)&&$(this.btn_close).remove(),this.form.key.readOnly=l,this.readonly&&(t.find("input, textarea").prop("readOnly",!0),t.find("select, input[type=checkbox], input[type=radio]").prop("disabled",!0)),this.$el.find(".btn-event").each(function(){var t,e,n,i,r,l,a;return t=$(this),e=t.parents(".event-inputs"),l=null,s.isNew()||(l=t.siblings("input[name$=duration]").attr("name"))&&null==(r=null!=(a=o[l=l.slice(0,-9)])?a.id:void 0)?(t.parent().removeClass("input-append"),t.remove()):t.prop("href","#event/"+r),s.isNew()?void 0:(i=o[l],n=null!=i&&(Number(i.duration)||i.ends),e.find("input[type=checkbox]").prop("checked",n),e.find("input[name$=duration]").prop("disabled",!n))}),"page"===this.type&&(r=null!=(c=s.get("content"))?c.id:void 0)&&(a="#content/"+r,n=u("a.btn-design",this.el),n.removeAttribute("disabled"),n.href=a,i=u("a.btn-preview",this.el),i.removeAttribute("disabled"),i.href=a+"/preview"),this.fill(o),this.$el.data({model:s,view:this}),this.listenTo(s,"destroy",this.remove.bind(this))):(console.error("unable to find tpl for action type",this.type),this.remove()),e.__super__.render.apply(this,arguments)},e.prototype.fill=function(t){var e,n,i,r,o;if(t&&this.form)return t.name||(t.name=this._name),t.key||(t.key=t.type),null!=(i=t.event)&&(i.duration=a.stringify(t.event.duration)),null!=(r=t.tracking)&&(r.duration=a.stringify(t.tracking.duration)),e=this.form,n="",(o=function(t,n){var i,r,s,l;for(r in n)s=n[r],"_"!==r.charAt(0)&&(r=t+r,$.isPlainObject(s)?o(r+".",s):(null!=(l=e[r])?l.name:void 0)===r&&(i=e[r],/^checkbox$/i.test(i.type)&&"boolean"==typeof s?i.checked=s:$(i).val(s)))})(n,t),this},e.prototype.read=function(){var t,e,n,i,r,o,s,l,u,c,h,d,p,f,_,m,g,y,v;if(!this.form)throw new Error("cannot find the form, may not rendered yet");for(e=this.model.toJSON(),e.type=this.type.toUpperCase(),y=[].slice.call(this.form.elements),d=0,_=y.length;_>d;d++)if(i=y[d],i.name&&!i.disabled&&(t=$(i),u=/^checkbox$/i.test(i.type)?i.checked:t.val(),l=i.name.split("."),null!=l?l.length:void 0)){for(h=e,s=l.pop(),p=0,m=l.length;m>p;p++)r=l[p],h=null!=h[r]?h[r]:h[r]={};h[s]=u}for(null==e.event&&(e.event={}),e.event.duration?"string"==typeof e.event.duration&&(e.event.duration=a.parse(e.event.duration)):null!=e.event.ends?delete e.event.duration:e.event.duration=0,null!=e.tracking&&(n=e.tracking.duration,n&&"string"==typeof n&&(n=e.tracking.duration=a.parse(n)),n||null!=e.tracking.ends?(c=e.tracking).name||(c.name=e.name+" (Tracking)"):delete e.tracking),v=["content","event","tracking"],f=0,g=v.length;g>f;f++)o=v[f],null!=e[o]&&(h=e[o],null!=e.id&&(h.action_id=e.id),null!=e.node_id&&(h.node_id=e.node_id),null!=e.workflow_id&&(h.workflow_id=e.workflow_id),h.name||(h.name=e.name));return e},e}(l),s}),define("home",["base","models","notification","diagram"],function(t,e,i,r){var o,s,l,a,u,c,h,d,p,f,m,g;return m=t.find,g=t.tpl,f=t.fill,p=t.View,o=t.FrameView,l=t.NavListView,d=t.STATUS_CLS,u=e.Project,h=e.Projects,a=i.NotificationListView,s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.collection=h.projects,e.prototype.initialize=function(t){var n,i;e.__super__.initialize.call(this,t),n=this.notificationList=new a({el:m(".sidebar-list",this.el),parent:this}),this.viewEl=m("#home_view",this.el),this._render=_.throttle(this._render.bind(this),100,{trailing:!1}),this.listenTo(this.collection,"reset",this._render),this.listenTo(this.collection,"add",function(t){return function(e){var n;n=t.views.index["_idx_"+e.cid]=new c({model:e,parent:t}),$(t.viewEl).prepend(n.render().$el),t.views.unshift(n)}}(this)),this.listenTo(this.collection,"remove",function(t){return function(e){var n;null!=(n=t.views["_idx_"+e.cid])&&n.remove()}}(this)),i=n.autoUpdate.bind(n),i(!0),this.on("activate",function(t){return function(){return t.render(),i(!0)}}(this)),this.on("deactivate",function(){return i(!1)})},e.prototype._render=function(){var t,e,n;null!=(n=this.views)&&n.forEach(function(t){return t.remove()}),e=document.createDocumentFragment(),t={},this.views=this.collection.map(function(n){return function(i){var r;return r=t["_idx_"+i.cid]=new c({model:i,parent:n}),e.appendChild(r.render().el),r}}(this)),this.views.index=t,this.viewEl.innerHTML="",this.viewEl.appendChild(e)},e.prototype.render=function(){return this.collection.load(this._render),this.notificationList.fetch(),e.__super__.render.apply(this,arguments)},e}(o),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype._tpl=g("#project_overview_tpl"),e.prototype.initialize=function(t){return this.model=t.model,this.listenTo(this.model,"loaded",this._render.bind(this)),this.listenTo(this.model,"destroy",this.remove.bind(this)),e.__super__.initialize.call(this,t)
},e.prototype.render=function(){if(!this.model)throw new Error("nothing to load");return this.el.id="overview_"+this.model.cid,this.el.innerHTML=this._tpl,this.diagram=new r({maxTimeout:1e3,el:m(".wf-diagram",this.el)}),this.model.fetch({reset:!0}),e.__super__.render.apply(this,arguments)},e.prototype._find=function(t){return m("[name='"+t+"']",this.el)},e.prototype._render=function(){var t,e,n,i,r,o,s,l,a,u,c,h,p,f,g,y,v,w,b,k,x,C,E;p=this.model,h=p.toJSON(),h.counts="("+((null!=(b=p.nodes)?b.length:void 0)||0)+" Nodes, "+((null!=(k=p.links)?k.length:void 0)||0)+" Links)";for(o in h)y=h[o],null!=(x=this._find(o))&&(x.textContent=y);if(null!=(C=m("a.btn-view",this.el))&&(C.href="#project/"+p.id),e=d[p.status({lowercase:!0})],e&&null!=(E=m(".label[name=status]",this.el))&&E.classList.add(e),i=this._find("cur-nodes"),n=_.uniq(p.get("current_node_ids")||[]),s=n.length){for(i.innerHTML='<li class="nav-header">Current Nodes ('+s+")</li>",r=document.createDocumentFragment(),v=0,w=n.length;w>v;v++)c=n[v],u=p.nodes.get(c),a=u.get("name")||"(No Name)",g=u.status({lowercase:!0}),l=document.createElement("li"),t=document.createElement("a"),t.href="#project/"+p.id+"/node/"+u.id,t.className="status-"+g,t.textContent=a,f=document.createElement("span"),f.className="label pull-right "+d[g]||"",f.textContent=g.toUpperCase(),t.appendChild(f),l.appendChild(t),r.appendChild(l);i.appendChild(r)}else i.innerHTML='<li class="nav-header">No Current Node</li>';this.diagram.draw(p)},e.prototype.remove=function(){return this.diagram.remove(),this.el.innerHTML="",e.__super__.remove.apply(this,arguments)},e}(p),s}),define("profile",["base"],function(t){var e,i,r,o,s;return s=t.find,i=t.FrameView,e=t.FormViewMixin,o=t.User,r=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.acts_as(e),i.prototype.initialize=function(t){if(i.__super__.initialize.call(this,t),!o.current)throw new Error("not signed in yet");return this.model=o.current,this.initForm(),this.btn=s("#update_user",this.el),this.avatar=s("#user_avatar img",this.el),this.load=_.throttle(this.load.bind(this),100,{trailing:!1}),this.on("activate",this.load)},i.prototype.render=function(){return this.load(),i.__super__.render.apply(this,arguments)},i.prototype.load=function(){return(this.model=o.current).fetch({success:function(t){return function(e){var n,i;return null==o.current?void console.warn("user logged out"):(console.log("fetch tenant",e.attributes),t.model=o.current=e,n=e.toJSON(),i=n.sex,n.sex=/^male$|^female$/i.test(i)?i.capitalize():"Unspecified",t.fill(n),t.avatar.src="https://secure.gravatar.com/avatar/"+n.email_md5+"?s=200&d=mm",t.btn.href="#config/users/"+e.id,void $(t.btn).removeAttr("disabled"))}}(this)}),this},i}(i)}),define("config",["base","manager","models"],function(t,e,r){var o,s,l,a,u,c,h,d,p,f,m,g,y,v,w,b,k,x,C;return x=t.find,C=t.findAll,k=t.View,a=t.FrameView,u=t.InnerFrameView,h=t.ModalDialogView,l=t.FormViewMixin,s=t.FormDialogView,c=e.ManagerView,d=e.ProjectFilterView,g=r.Tenant,v=r.User,p=r.Publisher,f=r.Publishers,m=r.Service,o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.profile=new y({el:"#tenant_profile",parent:this}),this.manager=new b({el:"#user_manager",parent:this,list:this.list}),this.connector=new u({el:"#service_connector",parent:this}),this},e.prototype.open=function(t){switch(t){case"users":this.switchTo(this.manager),this.manager.open(sub);break;case"tenant":this.switchTo(this.profile);break;case"service":this.switchTo(this.connector);break;default:throw new Error("empty or unknown sub action for config frame "+t)}return this},e}(a),y=function(t){function e(){return this.reload=i(this.reload,this),e.__super__.constructor.apply(this,arguments)}return n(e,t),e.acts_as(l),e.prototype.events={"reset form":function(){this.model&&setTimeout(function(t){return function(){return t.fill(t.model.attributes)}}(this),1)},"click .btn-reload":function(){return this.reload(!0)}},e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.initForm(),this.$btnReload=$(x(".btn-reload",this.el)),this.$btns=$(C(".btn",this.form)),this.on("submit",function(t){return function(){t.$btns.prop("disabled",!0),t.save()}}(this)),this.reload=_.debounce(this.reload.bind(this),100),this},e.prototype.save=function(){var t,e;return t=$(this._submit_btn),t.button("loading"),e=this.read(),console.log("save",e),this.model.save(e,{wait:!0,success:function(e){return function(){return t.button("reset"),e.reload(!0)}}(this)}),this},e.prototype.render=function(){return this.reload(!1),e.__super__.render.apply(this,arguments)},e.prototype.reload=function(t){var e,n;return e=this.$btnReload.button("loading"),n=this.$btns.prop("disabled",!0),this._load(t,function(){e.button("reset"),n.prop("disabled",!1)}),this},e.prototype._throttle=6e4,e.prototype._last_load=0,e.prototype._load=function(t,e){var n;if(!(null!=(n=v.current)?n.has("tenant_id"):void 0))throw new Error("invalid user logined");t||Date.now()-this._last_load>this._throttle?(this.model=null,this.form.reset(),null==this.model&&(this.model=new g({id:v.current.get("tenant_id")})),this.model.fetch({reset:!0,success:function(t){return function(n){return console.log("fetch tenant",n.attributes),t.model=g.current=n,t.fill(n.attributes),t._last_load=(new Date).getTime(),"function"==typeof e?e(n):void 0}}(this)})):"function"==typeof e&&e(null)},e}(u),w=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.goBackOnHidden="config/users",e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.$title=$(x(".modal-title",this.el)),this.$sex=$(C("[name=sex]",this.form)),this.$editOnly=this.$el.find(".edit-only"),this.passwords=C("[type=password]",this.form),this.$el.find("#user_avatar, #link_fb").parents(".control-group").remove(),this},e.prototype._setSex=function(t){var e;return null==t&&(t=""),e=this.$sex.filter("[value='"+t.toLowerCase()+"']"),e.length||(e=this.$sex.filter("[value='']")),e.hasClass("active")||(this.$sex.not(e).removeClass("active"),e.addClass("active")),e},e.prototype._getSex=function(){return this.$sex.filter(".active").attr("value").toUpperCase()},e.prototype.fill=function(t){return e.__super__.fill.call(this,t),this._setSex(t.sex),this},e.prototype.read=function(){var t,n;return t=e.__super__.read.apply(this,arguments),n=this.passwords[0].value,n&&(t.password=n),t.sex=this._getSex(),t},e.prototype.reset=function(){return this.$title.text("Create User"),this.$editOnly.hide(),this.form.email.disabled=!1,$(this.passwords).removeAttr("required"),this._setSex(),e.__super__.reset.apply(this,arguments)},e.prototype.popup=function(t,n){return e.__super__.popup.call(this,t,n),t.email?(this.form.email.disabled=!0,this.$editOnly.show(),this.$title.text(t.first_name||t.last_name?"User: "+t.first_name+" "+t.last_name:"User: "+t.email)):$(this.passwords).attr("required","required"),this.fill(t),this},e.prototype.validate=function(){var t,n;return t=this.passwords[0].value,n=this.passwords[1].value,(t||n)&&t!==n?(this.passwords[1].select(),alert("Passwords are not matched!"),!1):e.__super__.validate.apply(this,arguments)},e.prototype.save=function(){var t,e;return t=this.data=this.read(),e=this.form.email.value.trim(),t.password?require(["crypto"],function(n){return function(i){var r;return r=i.hashPassword,console.log("crypto",e,t.password),t.password=r(e,t.password),n.callback("save"),n.hide(!0)}}(this)):(this.callback("save"),this.hide(!0)),this},e}(s),b=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.columns=["checkbox","id",{name:"first_name",label:"Username",cell:Backgrid.StringCell.extend({render:function(){return this.$el.text(this.model.name()),this}}),editable:!1},{name:"email",label:"Email",cell:"email",editable:!1},"status","created_at","actions:user"],e.prototype.collection=new f,e.prototype.initialize=function(t){return e.__super__.initialize.call(this,t),this.editor=new w({el:"#user_editor",parent:this}),this.projectFilter=new d({el:x("ul.project-list",this.el),collection:this.collection.fullCollection}),this.edit=this.edit.bind(this),this.remove=this.remove.bind(this),this.on("remove remove_selected",this.remove),this},e.prototype.reload=function(){return this.projectFilter.clear(),e.__super__.reload.apply(this,arguments)},e.prototype.open=function(t){var e;return t?"new"===t?this.edit(null):(e=this.collection.get(t),(null!=e?e.has("email"):void 0)?this.edit(e):new p({id:t}).fetch({success:this.edit})):this.editor.cancel(),this},e.prototype.edit=function(t){return t instanceof p||(t=new p),this.editor.popup(t.toJSON(),function(e){return function(n,i){return console.log("user",n,i),"save"===n?(i.tenant_id=e.signin_user.tenant_id,t.isNew()?e.collection.create(i,{wait:!0}):t.save(i,{wait:!0}),e.refresh()):void 0}}(this)),this},e.prototype.remove=function(t){var e,n,i;for(Array.isArray(t)||(t=[t]),n=0,i=t.length;i>n;n++)e=t[n],this._remove(e);return this.refresh(),this},e.prototype._remove=function(t){var e;return e=t.get("email"),this.signin_user.email===e?alert("Cannot remove currently signed in user "+e):confirm("Are you sure to remoe user "+e+"?\n\nIt cannot be restored after removal!")?t.destroy():void 0},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.signin_user=v.current.toJSON(),this.projectFilter.render(),this},e}(c),o})}).call(this);